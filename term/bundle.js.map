{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/xterm/dist/xterm.js","webpack:///./node_modules/xterm-addon-web-links/lib/xterm-addon-web-links.js","webpack:///./node_modules/xterm-addon-fit/lib/xterm-addon-fit.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","e","f","require","u","a","Error","code","length","1","extendStatics","__extends","this","b","setPrototypeOf","__proto__","Array","__","constructor","Strings","Platform_1","RenderDebouncer_1","Lifecycle_1","Lifecycle_2","ScreenDprMonitor_1","AccessibilityManager","_super","_terminal","_dimensions","_this","_liveRegionLineCount","_charsToConsume","_charsToAnnounce","_accessibilityTreeRoot","document","createElement","classList","add","_rowContainer","_rowElements","rows","_createAccessibilityTreeNode","appendChild","_topBoundaryFocusListener","_onBoundaryFocus","_bottomBoundaryFocusListener","addEventListener","_refreshRowsDimensions","_renderRowsDebouncer","RenderDebouncer","_renderRows","_refreshRows","_liveRegion","setAttribute","element","insertAdjacentElement","register","onResize","_onResize","onRender","start","end","onScroll","addDisposableListener","char","_onChar","onLineFeed","spaceCount","_onTab","onKey","_onKey","_clearLiveRegion","_screenDprMonitor","ScreenDprMonitor","setListener","addDisposableDomListener","window","dispose","removeChild","position","boundaryElement","target","beforeBoundaryElement","getAttribute","buffer","lines","relatedTarget","topBoundaryElement","bottomBoundaryElement","pop","shift","removeEventListener","newElement","unshift","push","scrollLines","focus","preventDefault","stopImmediatePropagation","children","tabIndex","_refreshRowDimensions","MAX_ROWS_TO_READ","textContent","tooMuchOutput","isMac","parentNode","setTimeout","keyChar","refresh","setSize","toString","lineData","translateBufferLineToString","ydisp","posInSet","blankLine","_announceCharacters","actualCellHeight","setDimensions","dimensions","style","height","Disposable","2","CircularList_1","BufferLine_1","BufferReflow_1","Marker_1","MAX_BUFFER_SIZE","Buffer","_hasScrollback","savedCurAttrData","DEFAULT_ATTR_DATA","clone","markers","_nullCell","CellData","fromCharData","NULL_CELL_CHAR","NULL_CELL_WIDTH","NULL_CELL_CODE","_whitespaceCell","WHITESPACE_CELL_CHAR","WHITESPACE_CELL_WIDTH","WHITESPACE_CELL_CODE","_cols","cols","_rows","clear","getNullCell","attr","fg","bg","getWhitespaceCell","getBlankLine","isWrapped","BufferLine","maxLength","configurable","relativeY","ybase","y","_getCorrectBufferLength","correctBufferLength","options","scrollback","fillViewportRows","fillAttr","undefined","x","CircularList","scrollTop","scrollBottom","setupTabStops","resize","newCols","newRows","nullCell","newMaxLength","addToY","amountToTrim","trimStart","Math","max","min","savedY","savedX","_isReflowEnabled","_reflow","windowsMode","_reflowLarger","_reflowSmaller","toRemove","reflowLargerGetLinesToRemove","newLayoutResult","reflowLargerCreateNewLayout","reflowLargerApplyNewLayout","layout","_reflowLargerAdjustViewport","countRemoved","viewportAdjustments","toInsert","countToInsert","nextLine","getTrimmedLength","wrappedLines","absoluteY","lastLineLength","destLineLengths","reflowSmallerGetNewLineLengths","linesToAdd","trimmedLines","newLines","newLine","apply","destLineIndex","destCol","srcLineIndex","srcCol","cellsToCopy","copyCellsFrom","wrappedLinesIndex","getWrappedLineTrimmedLength","setCell","insertEvents","originalLines","originalLinesLength","originalLineIndex","nextToInsertIndex","nextToInsert","countInsertedSoFar","nextI","set","index","amount","insertCountEmitted","onInsertEmitter","fire","onTrimEmitter","stringIndexToBufferIndex","lineIndex","stringIndex","trimRight","line","length_1","CHAR_DATA_WIDTH_INDEX","CHAR_DATA_CHAR_INDEX","startCol","endCol","translateToString","getWrappedRangeForLine","first","last","tabs","prevStop","tabStopWidth","nextStop","addMarker","marker","Marker","onTrim","onInsert","event","onDelete","onDispose","_removeMarker","splice","indexOf","iterator","startIndex","endIndex","startOverscan","endOverscan","BufferStringIterator","_buffer","_trimRight","_startIndex","_endIndex","_startOverscan","_endOverscan","_current","hasNext","next","range","result","content","3","Buffer_1","EventEmitter2_1","BufferSet","_onBufferActivate","EventEmitter2","_normal","_alt","_activeBuffer","activateNormalBuffer","activeBuffer","inactiveBuffer","activateAltBuffer","4","CharMeasure","parentElement","_onCharSizeChanged","_document","_parentElement","_measureElement","_width","_height","measure","fontFamily","fontSize","geometry","getBoundingClientRect","width","adjustedHeight","ceil","5","TypedArrayUtils_1","wcwidth","opts","COMBINING_BMP","COMBINING_HIGH","control","table","Uint8Array","fill","nul","num","ucs","data","mid","bisearch","getStringCellWidth","charCodeAt","second","6","prepareTextForTerminal","text","replace","bracketTextForPaste","bracketedPasteMode","moveTextAreaUnderMouseCursor","ev","term","pos","screenElement","left","clientX","top","clientY","textarea","zIndex","copyHandler","selectionManager","browser","isMSIE","clipboardData","setData","selectionText","pasteHandler","stopPropagation","dispatchPaste","handler","emit","cancel","getData","rightClickHandler","shouldSelectWord","isClickInSelection","selectWordAtCursor","select","7","CompositionHelper","_textarea","_compositionView","_isComposing","_isSendingComposition","_compositionPosition","compositionstart","compositionupdate","updateCompositionElements","compositionend","_finalizeComposition","keydown","keyCode","_handleAnyTextareaChanges","waitForPropagation","remove","_clearTextareaPosition","currentCompositionPosition_1","input","substring","oldValue","diff","dontRecurse","isCursorInViewport","cellHeight","charMeasure","lineHeight","cursorTop","cursorLeft","compositionViewBounds","8","TextDecoder_1","low","high","arr","TransitionTable","state","action","addMany","codes","PRINTABLES","EXECUTABLES","VT500_TRANSITION_TABLE","states","DcsDummy","hook","collect","params","flag","put","unhook","EscapeSequenceParser","TRANSITIONS","initialState","currentState","_osc","_params","_collect","_printHandlerFb","_executeHandlerFb","_csiHandlerFb","_escHandlerFb","_oscHandlerFb","identifier","_dcsHandlerFb","_errorHandlerFb","_printHandler","_executeHandlers","_csiHandlers","_escHandlers","_oscHandlers","_dcsHandlers","_activeDcsHandler","_errorHandler","setEscHandler","setPrintHandler","callback","clearPrintHandler","setExecuteHandler","clearExecuteHandler","setExecuteHandlerFallback","addCsiHandler","handlerList","handlerIndex","setCsiHandler","clearCsiHandler","setCsiHandlerFallback","collectAndFlag","clearEscHandler","setEscHandlerFallback","addOscHandler","ident","setOscHandler","clearOscHandler","setOscHandlerFallback","setDcsHandler","clearDcsHandler","setDcsHandlerFallback","setErrorHandler","clearErrorHandler","reset","parse","transition","error","print","dcs","osc","dcsHandler","abort","handlers","j","String","fromCharCode","j_1","utf32ToString","idx","parseInt","handlers_1","j_2","9","EscapeSequences_1","Charsets_1","CharWidth_1","EscapeSequenceParser_1","GLEVEL","DECRQSS","_data","Uint32Array","concat","subarray","C0","ESC","pt","getOption","InputHandler","_parser","_parseBuffer","_stringDecoder","StringToUtf32","_utf8Decoder","Utf8ToUtf32","_workCell","_onCursorMove","_onData","_onLineFeed","_onScroll","insertChars","cursorUp","cursorDown","cursorForward","cursorBackward","cursorNextLine","cursorPrecedingLine","cursorCharAbsolute","cursorPosition","cursorForwardTab","eraseInDisplay","eraseInLine","insertLines","deleteLines","deleteChars","scrollUp","scrollDown","eraseChars","cursorBackwardTab","charPosAbsolute","hPositionRelative","repeatPrecedingCharacter","sendDeviceAttributes","linePosAbsolute","vPositionRelative","hVPosition","tabClear","setMode","resetMode","charAttributes","deviceStatus","softReset","setCursorStyle","setScrollRegion","saveCursor","restoreCursor","BEL","bell","LF","lineFeed","VT","FF","CR","carriageReturn","BS","backspace","HT","tab","SO","shiftOut","SI","shiftIn","C1","IND","NEL","HTS","tabSet","setTitle","reverseIndex","keypadApplicationMode","keypadNumericMode","setgLevel","selectDefaultCharset","_loop_1","this_1","selectCharset","CHARSETS","cursorStartX","cursorStartY","debug","log","decode","parseUtf8","chWidth","charset","screenReaderMode","wraparoundMode","insertMode","curAttr","curAttrData","bufferRow","updateRange","ch","stringFromCodePoint","scroll","insertCells","getWidth","setCellFromCodePoint","addCodepointToCell","convertEol","originalX","eraseAttrData","param","col","row","_eraseInBufferLine","clearWrap","replaceCells","_resetBufferLine","scrollBackSize","scrollBottomRowsOffset","scrollBottomAbsolute","deleteCells","loadCell","is","applicationCursor","setgCharset","DEFAULT_CHARSET","savedCols","originMode","applicationKeypad","viewport","syncScrollArea","x10Mouse","vt200Mouse","normalMouse","mouseEvents","disable","sendFocus","utfMouse","sgrMouse","urxvtMouse","cursorHidden","buffers","showCursor","enable","AttributeData","fromColorRGB","glevel","charsets","setOption","isBlinking","handleTitle","level","10","MouseZoneManager_1","Linkifier","_linkMatchers","_nextLinkMatcherId","_onLinkHover","_onLinkLeave","_onLinkTooltip","_rowsToLinkify","attachToDom","mouseZoneManager","_mouseZoneManager","linkifyRows","clearAll","_rowsTimeoutId","clearTimeout","_linkifyRows","TIME_BEFORE_LINKIFY","absoluteRowIndexStart","absoluteRowIndexEnd","overscanLineLimit","OVERSCAN_CHAR_LIMIT","_doLinkifyRow","registerLinkMatcher","regex","matcher","id","matchIndex","validationCallback","hoverTooltipCallback","tooltipCallback","hoverLeaveCallback","leaveCallback","willLinkActivate","priority","_addLinkMatcherToList","deregisterLinkMatcher","matcherId","rowIndex","match","rex","RegExp","source","flags","uri","console","lastIndex","bufferIndex","getFg","isValid","_addLink","exec","x1","y1","floor","x2","y2","MouseZone","open","_createLinkHoverEvent","11","MouseHelper","_renderCoordinator","getCoordsRelativeToElement","rect","getCoords","colCount","rowCount","isSelection","coords","actualCellWidth","getRawByteCoords","12","MouseZoneManager","_zones","_areZonesActive","_tooltipTimeout","_currentZone","_lastHoverCoords","_onMouseDown","_mouseMoveListener","_onMouseMove","_mouseLeaveListener","_onMouseLeave","_clickListener","_onClick","_deactivate","zone","_activate","pageX","pageY","_onHover","_findZoneEventAt","hoverCallback","_onTooltip","_initialSelectionLength","getSelection","currentSelectionLength","clickCallback","mouseHelper","13","MouseHelper_1","Browser","SelectionModel_1","AltClickHandler_1","NON_BREAKING_SPACE_CHAR","ALL_NON_BREAKING_SPACE_REGEX","SelectionManager","_charMeasure","_enabled","_onLinuxMouseSelection","_onRedrawRequest","_onSelectionChange","_initListeners","_model","SelectionModel","_activeSelectionMode","_removeMouseDownListeners","active","_mouseUpListener","_onMouseUp","initBuffersListeners","_trimListener","_onTrim","onBufferActivate","clearSelection","finalSelectionStart","finalSelectionEnd","lineText","startRowEndCol","bufferLine","map","join","isMSWindows","isLinuxMouseSelection","_refreshAnimationFrame","requestAnimationFrame","_refresh","isLinux","columnSelectMode","_getMouseBufferCoords","_areCoordsInSelection","_selectWordAt","selectionEnd","selectAll","isSelectAllActive","selectLines","selectionStart","_getMouseEventScrollAmount","offset","terminalHeight","abs","round","shouldForceSelection","altKey","macOptionClickForcesSelection","shiftKey","onMouseDown","_mouseDownTimeStamp","timeStamp","button","hasSelection","_dragScrollAmount","_onIncrementalClick","detail","_onSingleClick","_onDoubleClick","_onTripleClick","_addMouseDownListeners","ownerDocument","_dragScrollIntervalTimer","setInterval","_dragScroll","clearInterval","selectionStartLength","shouldColumnSelect","hasWidth","_selectLineAt","previousSelectionEnd","_selectToWordAt","timeElapsed","AltClickHandler","move","_convertViewportColToCharacterIndex","charIndex","getChars","setSelection","_getWordAt","allowWhitespaceOnlySelection","followWrappedLinesAbove","followWrappedLinesBelow","charOffset","leftWideCharCount","rightWideCharCount","leftLongCharOffset","rightLongCharOffset","charAt","length_2","getString","_isCharWordSeparator","length_3","length_4","slice","trim","getCodePoint","previousBufferLine","previousLineWordPosition","nextBufferLine","nextLineWordPosition","wordPosition","endRow","areSelectionValuesReversed","cell","wrappedRange","14","startPlusLength","15","DEFAULT_BELL_SOUND","SoundManager","_audioContext","audioContextCtor","AudioContext","webkitAudioContext","warn","playBellSound","ctx","audioContext","bellAudioSource","createBufferSource","decodeAudioData","_base64ToArrayBuffer","_removeMimeType","bellSound","connect","destination","base64","binaryString","atob","len","bytes","dataURI","split","16","promptLabel","17","BufferSet_1","CompositionHelper_1","EventEmitter_1","Viewport_1","Clipboard_1","InputHandler_1","Renderer_1","Linkifier_1","SelectionManager_1","CharMeasure_1","SoundManager_1","AccessibilityManager_1","CharAtlasCache_1","DomRenderer_1","Keyboard_1","Clone_1","WindowsMode_1","ColorManager_1","RenderCoordinator_1","CONSTRUCTOR_ONLY_OPTIONS","DEFAULT_OPTIONS","termName","cursorBlink","cursorStyle","bellStyle","drawBoldTextInBrightColors","enableBold","experimentalCharAtlas","fontWeight","fontWeightBold","letterSpacing","screenKeys","macOptionIsMeta","cancelEvents","disableStdin","useFlowControl","allowTransparency","theme","rightClickSelectsWord","rendererType","Terminal","_blankLine","_onRender","_onTitleChange","_setup","onCursorMove","onData","domEvent","onSelectionChange","onTitleChange","_windowsMode","_customKeyEventHandler","removeTerminalFromCache","write","destroy","keys","forEach","_parent","body","cursorState","gcharset","_eraseAttrData","currentParam","writeBuffer","writeBufferUtf8","_writeInProgress","_xoffSentToCatchUp","_userScrolling","_inputHandler","linkifier","soundManager","applyWindowsMode","preventScroll","activeElement","hasFocus","_setTheme","newBufferLength","needsRefresh","setRenderer","_createRenderer","_accessibilityManager","onOptionsChanged","_onTextAreaFocus","updateCursorStyle","blur","_onTextAreaBlur","_initGlobal","_bindKeys","pasteHandlerWrapper","isFirefox","self","_keyDown","_keyPress","wasModifierKeyOnlyEvent","_keyUp","_compositionHelper","_queueLinkification","parent","_context","defaultView","dir","fragment","createDocumentFragment","_viewportElement","_viewportScrollArea","_helperContainer","_theme","_colorManager","ColorManager","setTheme","renderer","RenderCoordinator","Viewport","onThemeChange","colors","onBlur","onFocus","onCharSizeChanged","onDimensionsChange","onRedrawRequest","onSelectionChanged","onLinuxMouseSelection","toggle","bindMouse","Renderer","DomRenderer","setColors","el","pressed","sendButton","meta","ctrl","mod","overrideType","type","which","deltaY","metaKey","ctrlKey","getButton","sendEvent","encode","_vt300Mouse","data_1","_decLocator","page","moveHandler","sendMove","hasScrollback","getLinesScrolled","sequence","onWheel","onTouchStart","onTouchMove","refreshRows","eraseAttr","getBg","topRow","bottomRow","willBufferBeTrimmed","isFull","recycle","copyFrom","scrollRegionHeight","shiftElements","disp","suppressScrollEvent","oldYdisp","scrollPages","pageCount","scrollToTop","scrollToBottom","scrollToLine","scrollAmount","writeUtf8","_isDisposed","DC3","_innerWriteUtf8","bufferOffset","startTime","Date","now","DC1","_refreshStart","_refreshEnd","_innerWrite","writeln","attachCustomKeyEventHandler","customKeyEventHandler","registerCharacterJoiner","joinerId","deregisterCharacterJoiner","cursorYOffset","normal","column","getSelectionPosition","startColumn","startRow","endColumn","evaluateKeyboardEvent","scrollCount","_isThirdLevelShift","thirdLevelKey","g","charCode","_soundBell","_visualBell","_visualBellTimer","isNaN","maxRange","title","inputHandler","writeInProgress","xoffSentToCatchUp","userScrolling","force","EventEmitter","18","FALLBACK_SCROLL_BAR_WIDTH","_scrollArea","scrollBarWidth","_currentRowHeight","_lastRecordedBufferLength","_lastRecordedViewportHeight","_lastRecordedBufferHeight","_lastScrollTop","_wheelPartialScroll","_ignoreNextScrollEvent","offsetWidth","onDimensionsChance","backgroundColor","background","css","_innerRefresh","scaledCellHeight","devicePixelRatio","offsetHeight","newBufferHeight","canvasHeight","newScrollTop","offsetParent","_getPixelsScrolled","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","_lastTouchY","touches","19","terminal","lastChar","CHAR_DATA_CODE_INDEX","20","_maxLength","onDeleteEmitter","_array","_length","newArray","_getCyclicIndex","newLength","deleteCount","items","_i","arguments","countToTrim","count","expandListBy","21","val","depth","clonedObject","isArray","22","_events","on","listener","disposed","off","obj","removeAllListeners","args","emitMayRemoveListeners","listeners","23","_listeners","_event","queue","24","_disposables","unregister","25","isNode","navigator","userAgent","platform","contains","isSafari","test","isIpad","isIphone","26","fillFallback","array","27","DEFAULT_COLOR","28","NUL","SOH","STX","ETX","EOT","ENQ","ACK","DLE","DC2","DC4","NAK","SYN","ETB","CAN","EM","SUB","FS","GS","RS","US","SP","DEL","PAD","HOP","BPH","NBH","SSA","ESA","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","SGCI","SCI","CSI","ST","OSC","PM","APC","29","Types_1","DEFAULT_ATTR","CHAR_DATA_ATTR_INDEX","CELL_SIZE","toColorRGB","newObj","isInverse","isBold","isUnderline","isBlink","isInvisible","isItalic","isDim","getFgColorMode","getBgColorMode","isFgRGB","isBgRGB","isFgPalette","isBgPalette","isFgDefault","isBgDefault","getFgColor","getBgColor","freeze","combinedData","setFromCharData","isCombined","getCode","combined","getAsCharData","fillCellData","_combined","cp","hasContent","codePoint","src","applyInReverse","srcData","srcCombinedKeys","30","endsInNull","followingLineStartsWithWide","oldCols","bufferAbsoluteY","srcTrimmedTineLength","srcRemainingCells","destRemainingCells","countToRemove","i_1","nextToRemoveIndex","nextToRemoveStart","countRemovedSoFar","newLayout","newLayoutLines","newLineLengths","cellsNeeded","reduce","srcLine","cellsAvailable","oldTrimmedLength","endsWithWide","lineLength","31","_id","_nextId","isDisposed","_onDispose","32","33","KEYCODE_KEY_MAPPINGS","48","49","50","51","52","53","54","55","56","57","186","187","188","189","190","191","192","219","220","221","222","applicationCursorMode","modifiers","keyMapping","34","codepoint","_interim","size","startPos","interim","byte1","byte2","byte3","byte4","discardInterim","tmp","missing","fourStop","35","_mouseEvent","_a","_lines","_startCol","_startRow","coordinates","coordinate","_endCol","_endRow","_arrowSequences","_moveHorizontallyOnly","_resetStartingRow","_moveToRequestedRow","_moveToRequestedCol","repeat","_bufferLine","_wrappedRowsForRow","_sequence","_wrappedRowsCount","_verticalDirection","direction","_horizontalDirection","wrappedRows","currentRow","lineWraps","forward","currentCol","bufferStr","str","rpt","36","AddonManager","_addons","instance","loadAddon","loadedAddon","_wrappedAddonDispose","activate","37","Terminal_1","AddonManager_1","_core","_addonManager","BufferApiView","columns","applyAddon","addon","getLine","BufferLineApiView","_line","getCell","BufferCellApiView","_x","38","Types_2","BaseRenderLayer","_container","_alpha","_colors","_scaledCharWidth","_scaledCharHeight","_scaledCellWidth","_scaledCellHeight","_scaledCharLeft","_scaledCharTop","_currentGlyphIdentifier","chars","bold","dim","italic","_canvas","_initCanvas","_charAtlas","_ctx","getContext","alpha","onGridChanged","colorSet","_refreshCharAtlas","setTransparency","oldCanvas","cloneNode","replaceChild","acquireCharAtlas","warmUp","scaledCellWidth","scaledCharWidth","scaledCharHeight","scaledCharLeft","scaledCharTop","scaledCanvasWidth","scaledCanvasHeight","canvasWidth","fillCells","fillRect","fillBottomLineAtCells","fillLeftLineAtCell","strokeRectAtCell","lineWidth","strokeRect","clearRect","fillStyle","clearCells","fillCharTrueColor","font","_getFont","textBaseline","_clipRow","fillText","drawChars","_drawUncachedChars","INVERTED_DEFAULT_COLOR","draw","save","ansi","foreground","globalAlpha","DIM_OPACITY","restore","beginPath","clip","39","JoinedCellData","firstCell","CharacterJoinerRegistry","_characterJoiners","_nextCharacterJoinerId","joiner","getJoinedCharacters","ranges","lineStr","rangeStartColumn","currentStringIndex","rangeStartStringIndex","rangeAttrFG","rangeAttrBG","joinedRanges","_getJoinedRanges","joinerRanges","_mergeRanges","_stringRangesToCellRanges","currentRangeIndex","currentRangeStarted","currentRange","newRange","inRange","40","BaseRenderLayer_1","CursorRenderLayer","container","_cell","_state","isFocused","_cursorRenderers","_renderBarCursor","_renderBlockCursor","_renderUnderlineCursor","_clearCursor","_cursorBlinkStateManager","pause","resume","CursorBlinkStateManager","_render","restartBlinkAnimation","isPaused","triggeredByAnimationFrame","cursorY","viewportRelativeCursorY","cursor","_renderBlurCursor","isCursorVisible","cursorAccent","strokeStyle","_renderCallback","_restartInterval","_blinkStartTimeout","_blinkInterval","_animationFrame","cancelAnimationFrame","_animationTimeRestarted","timeToStart","time","41","GridCache","cache","42","CharAtlasUtils_1","LinkRenderLayer","onLinkHover","onLinkLeave","_clearCurrentLink","middleRowCount","is256Color","43","_renderer","_rowCount","_isPaused","_needsFullRefresh","_canvasWidth","_canvasHeight","_onDimensionsChange","_onRefreshRequest","_renderDebouncer","onDevicePixelRatioChange","observer_1","IntersectionObserver","_onIntersectionChange","threshold","observe","disconnect","entry","intersectionRatio","renderRows","_fireOnCanvasResize","changeOptions","_fullRefresh","44","TextRenderLayer_1","SelectionRenderLayer_1","CursorRenderLayer_1","LinkRenderLayer_1","CharacterJoinerRegistry_1","_characterJoinerRegistry","_renderLayers","TextRenderLayer","SelectionRenderLayer","_devicePixelRatio","_updateDimensions","_runOperation","operation","45","_clearState","_didStateChange","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","selection","middleRowsCount","_areCoordinatesEqual","coord1","coord2","46","GridCache_1","characterJoinerRegistry","_characterOverlapCache","terminalFont","_characterWidth","_characterFont","_forEachCell","firstRow","lastRow","joinerRegistry","isJoined","lastCharX","_isOverlapping","_drawBackground","startX","startY","prevFillStyle","nextFillStyle","_drawForeground","beginFrame","overlaps","measureText","47","BaseCharAtlas","_didWarmUp","_doWarmUp","default","DynamicCharAtlas_1","NoneCharAtlas_1","StaticCharAtlas_1","charAtlasImplementations","charAtlasCache","newConfig","generateConfig","ownedByIndex","ownedBy","configEquals","config","atlas","newEntry","clearColor","imageData","color","isEmpty","rgba","getFont","generateStaticCharAtlasTexture","context","canvasFactory","cellWidth","CHAR_ATLAS_CELL_SPACING","canvas","colorIndex","charAtlasImageData","getImageData","createImageBitmap","clonedColors","colorCode","BaseCharAtlas_1","CharAtlasGenerator_1","LRUMap_1","TEXTURE_WIDTH","TEXTURE_HEIGHT","TRANSPARENT_COLOR","getGlyphCacheKey","glyph","DynamicCharAtlas","_config","_drawToCacheCount","_glyphsWaitingOnBitmap","_bitmapCommitTimeout","_bitmap","_cacheCanvas","_cacheCtx","tmpCanvas","_tmpCtx","capacity","_cacheMap","prealloc","_canCache","glyphKey","cacheValue","_drawFromCache","peek","cacheValue_1","_drawToCache","_toCoordinateX","_toCoordinateY","cacheX","cacheY","drawImage","inBitmap","_getColorFromAnsiIndex","DEFAULT_ANSI_COLORS","_getBackgroundColor","_getForegroundColor","globalCompositeOperation","fontStyle","putImageData","_addGlyphToBitmap","_generateBitmap","glyphsMovingToBitmap","then","bitmap","LRUMap","_map","_head","_tail","_nodePool","_unlinkNode","node","prev","_appendNode","tail","nodePool","peekValue","head","NoneCharAtlas","StaticCharAtlas","_canvasFactory","HTMLCanvasElement","_texture","texture","_isCached","isAscii","isBasicColor","isDefaultColor","isDefaultBackground","charAtlasCellWidth","charAtlasCellHeight","DomRendererRowFactory_1","TERMINAL_CLASS_PREFIX","ROW_CONTAINER_CLASS","SELECTION_CLASS","nextTerminalId","_terminalClass","_refreshRowElements","_selectionContainer","_injectCss","_rowFactory","DomRendererRowFactory","_themeStyleElement","_dimensionsStyleElement","overflow","styles","_terminalSelector","innerHTML","BOLD_CLASS","ITALIC_CLASS","CURSOR_CLASS","CURSOR_BLINK_CLASS","CURSOR_STYLE_BLOCK_CLASS","CURSOR_STYLE_BAR_CLASS","CURSOR_STYLE_UNDERLINE_CLASS","documentFragment","_createSelectionElement","endCol_1","colStart","colEnd","cursorAbsoluteY","cursorX","rowElement","createRow","_setCellUnderline","enabled","span","textDecoration","DIM_CLASS","UNDERLINE_CLASS","_terminalOptions","isCursorRow","charElement","swapColor","58","DEFAULT_FOREGROUND","fromHex","DEFAULT_BACKGROUND","DEFAULT_CURSOR","DEFAULT_CURSOR_ACCENT","DEFAULT_SELECTION","toPaddedHex","v","_litmusColor","createLinearGradient","_parseColor","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","fallback","59","useCapture","60","rowStart","rowEnd","_rowStart","_rowEnd","61","_currentDevicePixelRatio","_listener","clearListener","_outerListener","_updateDpr","_resolutionMediaMatchList","removeListener","matchMedia","addListener","62","_handler","_options","_linkMatcherId","WebLinksAddon","fit","proposeDimensions","_renderService","getComputedStyle","getPropertyValue","FitAddon","xterm","command","getElementById","prompt","printable","altGraphKey","runCommand"],"mappings":"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AQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,M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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Terminal = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Strings = require(\"./Strings\");\nvar Platform_1 = require(\"./common/Platform\");\nvar RenderDebouncer_1 = require(\"./ui/RenderDebouncer\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Lifecycle_2 = require(\"./common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"./ui/ScreenDprMonitor\");\nvar MAX_ROWS_TO_READ = 20;\nvar AccessibilityManager = (function (_super) {\n    __extends(AccessibilityManager, _super);\n    function AccessibilityManager(_terminal, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._dimensions = _dimensions;\n        _this._liveRegionLineCount = 0;\n        _this._charsToConsume = [];\n        _this._charsToAnnounce = '';\n        _this._accessibilityTreeRoot = document.createElement('div');\n        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add('xterm-accessibility-tree');\n        _this._rowElements = [];\n        for (var i = 0; i < _this._terminal.rows; i++) {\n            _this._rowElements[i] = _this._createAccessibilityTreeNode();\n            _this._rowContainer.appendChild(_this._rowElements[i]);\n        }\n        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };\n        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };\n        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);\n        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);\n        _this._refreshRowsDimensions();\n        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);\n        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._refreshRows();\n        _this._liveRegion = document.createElement('div');\n        _this._liveRegion.classList.add('live-region');\n        _this._liveRegion.setAttribute('aria-live', 'assertive');\n        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);\n        _this.register(_this._renderRowsDebouncer);\n        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));\n        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));\n        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));\n        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\\n'); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));\n        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));\n        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this.register(_this._screenDprMonitor);\n        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });\n        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));\n        return _this;\n    }\n    AccessibilityManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal.element.removeChild(this._accessibilityTreeRoot);\n        this._rowElements.length = 0;\n    };\n    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {\n        var boundaryElement = e.target;\n        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];\n        var posInSet = boundaryElement.getAttribute('aria-posinset');\n        var lastRowPos = position === 0 ? '1' : \"\" + this._terminal.buffer.lines.length;\n        if (posInSet === lastRowPos) {\n            return;\n        }\n        if (e.relatedTarget !== beforeBoundaryElement) {\n            return;\n        }\n        var topBoundaryElement;\n        var bottomBoundaryElement;\n        if (position === 0) {\n            topBoundaryElement = boundaryElement;\n            bottomBoundaryElement = this._rowElements.pop();\n            this._rowContainer.removeChild(bottomBoundaryElement);\n        }\n        else {\n            topBoundaryElement = this._rowElements.shift();\n            bottomBoundaryElement = boundaryElement;\n            this._rowContainer.removeChild(topBoundaryElement);\n        }\n        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n        if (position === 0) {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.unshift(newElement);\n            this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n        }\n        else {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.push(newElement);\n            this._rowContainer.appendChild(newElement);\n        }\n        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._terminal.scrollLines(position === 0 ? -1 : 1);\n        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    AccessibilityManager.prototype._onResize = function (rows) {\n        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n            this._rowElements[i] = this._createAccessibilityTreeNode();\n            this._rowContainer.appendChild(this._rowElements[i]);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {\n        var element = document.createElement('div');\n        element.setAttribute('role', 'listitem');\n        element.tabIndex = -1;\n        this._refreshRowDimensions(element);\n        return element;\n    };\n    AccessibilityManager.prototype._onTab = function (spaceCount) {\n        for (var i = 0; i < spaceCount; i++) {\n            this._onChar(' ');\n        }\n    };\n    AccessibilityManager.prototype._onChar = function (char) {\n        var _this = this;\n        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n            if (this._charsToConsume.length > 0) {\n                var shiftedChar = this._charsToConsume.shift();\n                if (shiftedChar !== char) {\n                    this._charsToAnnounce += char;\n                }\n            }\n            else {\n                this._charsToAnnounce += char;\n            }\n            if (char === '\\n') {\n                this._liveRegionLineCount++;\n                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n                    this._liveRegion.textContent += Strings.tooMuchOutput;\n                }\n            }\n            if (Platform_1.isMac) {\n                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n                    setTimeout(function () {\n                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n                    }, 0);\n                }\n            }\n        }\n    };\n    AccessibilityManager.prototype._clearLiveRegion = function () {\n        this._liveRegion.textContent = '';\n        this._liveRegionLineCount = 0;\n        if (Platform_1.isMac) {\n            if (this._liveRegion.parentNode) {\n                this._accessibilityTreeRoot.removeChild(this._liveRegion);\n            }\n        }\n    };\n    AccessibilityManager.prototype._onKey = function (keyChar) {\n        this._clearLiveRegion();\n        this._charsToConsume.push(keyChar);\n    };\n    AccessibilityManager.prototype._refreshRows = function (start, end) {\n        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    AccessibilityManager.prototype._renderRows = function (start, end) {\n        var buffer = this._terminal.buffer;\n        var setSize = buffer.lines.length.toString();\n        for (var i = start; i <= end; i++) {\n            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n            var posInSet = (buffer.ydisp + i + 1).toString();\n            var element = this._rowElements[i];\n            if (element) {\n                element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;\n                element.setAttribute('aria-posinset', posInSet);\n                element.setAttribute('aria-setsize', setSize);\n            }\n        }\n        this._announceCharacters();\n    };\n    AccessibilityManager.prototype._refreshRowsDimensions = function () {\n        if (!this._dimensions.actualCellHeight) {\n            return;\n        }\n        if (this._rowElements.length !== this._terminal.rows) {\n            this._onResize(this._terminal.rows);\n        }\n        for (var i = 0; i < this._terminal.rows; i++) {\n            this._refreshRowDimensions(this._rowElements[i]);\n        }\n    };\n    AccessibilityManager.prototype.setDimensions = function (dimensions) {\n        this._dimensions = dimensions;\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._refreshRowDimensions = function (element) {\n        element.style.height = this._dimensions.actualCellHeight + \"px\";\n    };\n    AccessibilityManager.prototype._announceCharacters = function () {\n        if (this._charsToAnnounce.length === 0) {\n            return;\n        }\n        this._liveRegion.textContent += this._charsToAnnounce;\n        this._charsToAnnounce = '';\n    };\n    return AccessibilityManager;\n}(Lifecycle_2.Disposable));\nexports.AccessibilityManager = AccessibilityManager;\n\n},{\"./Strings\":16,\"./common/Lifecycle\":24,\"./common/Platform\":25,\"./ui/Lifecycle\":59,\"./ui/RenderDebouncer\":60,\"./ui/ScreenDprMonitor\":61}],2:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CircularList_1 = require(\"./common/CircularList\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar BufferReflow_1 = require(\"./core/buffer/BufferReflow\");\nvar Marker_1 = require(\"./core/buffer/Marker\");\nexports.MAX_BUFFER_SIZE = 4294967295;\nvar Buffer = (function () {\n    function Buffer(_terminal, _hasScrollback) {\n        this._terminal = _terminal;\n        this._hasScrollback = _hasScrollback;\n        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.markers = [];\n        this._nullCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.NULL_CELL_CHAR, BufferLine_1.NULL_CELL_WIDTH, BufferLine_1.NULL_CELL_CODE]);\n        this._whitespaceCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.WHITESPACE_CELL_CHAR, BufferLine_1.WHITESPACE_CELL_WIDTH, BufferLine_1.WHITESPACE_CELL_CODE]);\n        this._cols = this._terminal.cols;\n        this._rows = this._terminal.rows;\n        this.clear();\n    }\n    Buffer.prototype.getNullCell = function (attr) {\n        if (attr) {\n            this._nullCell.fg = attr.fg;\n            this._nullCell.bg = attr.bg;\n        }\n        else {\n            this._nullCell.fg = 0;\n            this._nullCell.bg = 0;\n        }\n        return this._nullCell;\n    };\n    Buffer.prototype.getWhitespaceCell = function (attr) {\n        if (attr) {\n            this._whitespaceCell.fg = attr.fg;\n            this._whitespaceCell.bg = attr.bg;\n        }\n        else {\n            this._whitespaceCell.fg = 0;\n            this._whitespaceCell.bg = 0;\n        }\n        return this._whitespaceCell;\n    };\n    Buffer.prototype.getBlankLine = function (attr, isWrapped) {\n        return new BufferLine_1.BufferLine(this._terminal.cols, this.getNullCell(attr), isWrapped);\n    };\n    Object.defineProperty(Buffer.prototype, \"hasScrollback\", {\n        get: function () {\n            return this._hasScrollback && this.lines.maxLength > this._rows;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"isCursorInViewport\", {\n        get: function () {\n            var absoluteY = this.ybase + this.y;\n            var relativeY = absoluteY - this.ydisp;\n            return (relativeY >= 0 && relativeY < this._rows);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._getCorrectBufferLength = function (rows) {\n        if (!this._hasScrollback) {\n            return rows;\n        }\n        var correctBufferLength = rows + this._terminal.options.scrollback;\n        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;\n    };\n    Buffer.prototype.fillViewportRows = function (fillAttr) {\n        if (this.lines.length === 0) {\n            if (fillAttr === undefined) {\n                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;\n            }\n            var i = this._rows;\n            while (i--) {\n                this.lines.push(this.getBlankLine(fillAttr));\n            }\n        }\n    };\n    Buffer.prototype.clear = function () {\n        this.ydisp = 0;\n        this.ybase = 0;\n        this.y = 0;\n        this.x = 0;\n        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));\n        this.scrollTop = 0;\n        this.scrollBottom = this._rows - 1;\n        this.setupTabStops();\n    };\n    Buffer.prototype.resize = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var newMaxLength = this._getCorrectBufferLength(newRows);\n        if (newMaxLength > this.lines.maxLength) {\n            this.lines.maxLength = newMaxLength;\n        }\n        if (this.lines.length > 0) {\n            if (this._cols < newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n            var addToY = 0;\n            if (this._rows < newRows) {\n                for (var y = this._rows; y < newRows; y++) {\n                    if (this.lines.length < newRows + this.ybase) {\n                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                            this.ybase--;\n                            addToY++;\n                            if (this.ydisp > 0) {\n                                this.ydisp--;\n                            }\n                        }\n                        else {\n                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                        }\n                    }\n                }\n            }\n            else {\n                for (var y = this._rows; y > newRows; y--) {\n                    if (this.lines.length > newRows + this.ybase) {\n                        if (this.lines.length > this.ybase + this.y + 1) {\n                            this.lines.pop();\n                        }\n                        else {\n                            this.ybase++;\n                            this.ydisp++;\n                        }\n                    }\n                }\n            }\n            if (newMaxLength < this.lines.maxLength) {\n                var amountToTrim = this.lines.length - newMaxLength;\n                if (amountToTrim > 0) {\n                    this.lines.trimStart(amountToTrim);\n                    this.ybase = Math.max(this.ybase - amountToTrim, 0);\n                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n                }\n                this.lines.maxLength = newMaxLength;\n            }\n            this.x = Math.min(this.x, newCols - 1);\n            this.y = Math.min(this.y, newRows - 1);\n            if (addToY) {\n                this.y += addToY;\n            }\n            this.savedY = Math.min(this.savedY, newRows - 1);\n            this.savedX = Math.min(this.savedX, newCols - 1);\n            this.scrollTop = 0;\n        }\n        this.scrollBottom = newRows - 1;\n        if (this._isReflowEnabled) {\n            this._reflow(newCols, newRows);\n            if (this._cols > newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n        }\n        this._cols = newCols;\n        this._rows = newRows;\n    };\n    Object.defineProperty(Buffer.prototype, \"_isReflowEnabled\", {\n        get: function () {\n            return this._hasScrollback && !this._terminal.options.windowsMode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._reflow = function (newCols, newRows) {\n        if (this._cols === newCols) {\n            return;\n        }\n        if (newCols > this._cols) {\n            this._reflowLarger(newCols, newRows);\n        }\n        else {\n            this._reflowSmaller(newCols, newRows);\n        }\n    };\n    Buffer.prototype._reflowLarger = function (newCols, newRows) {\n        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n        if (toRemove.length > 0) {\n            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);\n            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n        }\n    };\n    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var viewportAdjustments = countRemoved;\n        while (viewportAdjustments-- > 0) {\n            if (this.ybase === 0) {\n                if (this.y > 0) {\n                    this.y--;\n                }\n                if (this.lines.length < newRows) {\n                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                }\n            }\n            else {\n                if (this.ydisp === this.ybase) {\n                    this.ydisp--;\n                }\n                this.ybase--;\n            }\n        }\n    };\n    Buffer.prototype._reflowSmaller = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var toInsert = [];\n        var countToInsert = 0;\n        for (var y = this.lines.length - 1; y >= 0; y--) {\n            var nextLine = this.lines.get(y);\n            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n                continue;\n            }\n            var wrappedLines = [nextLine];\n            while (nextLine.isWrapped && y > 0) {\n                nextLine = this.lines.get(--y);\n                wrappedLines.unshift(nextLine);\n            }\n            var absoluteY = this.ybase + this.y;\n            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n                continue;\n            }\n            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n            var linesToAdd = destLineLengths.length - wrappedLines.length;\n            var trimmedLines = void 0;\n            if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n            }\n            else {\n                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n            }\n            var newLines = [];\n            for (var i = 0; i < linesToAdd; i++) {\n                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);\n                newLines.push(newLine);\n            }\n            if (newLines.length > 0) {\n                toInsert.push({\n                    start: y + wrappedLines.length + countToInsert,\n                    newLines: newLines\n                });\n                countToInsert += newLines.length;\n            }\n            wrappedLines.push.apply(wrappedLines, newLines);\n            var destLineIndex = destLineLengths.length - 1;\n            var destCol = destLineLengths[destLineIndex];\n            if (destCol === 0) {\n                destLineIndex--;\n                destCol = destLineLengths[destLineIndex];\n            }\n            var srcLineIndex = wrappedLines.length - linesToAdd - 1;\n            var srcCol = lastLineLength;\n            while (srcLineIndex >= 0) {\n                var cellsToCopy = Math.min(srcCol, destCol);\n                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n                destCol -= cellsToCopy;\n                if (destCol === 0) {\n                    destLineIndex--;\n                    destCol = destLineLengths[destLineIndex];\n                }\n                srcCol -= cellsToCopy;\n                if (srcCol === 0) {\n                    srcLineIndex--;\n                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);\n                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n                }\n            }\n            for (var i = 0; i < wrappedLines.length; i++) {\n                if (destLineLengths[i] < newCols) {\n                    wrappedLines[i].setCell(destLineLengths[i], nullCell);\n                }\n            }\n            var viewportAdjustments = linesToAdd - trimmedLines;\n            while (viewportAdjustments-- > 0) {\n                if (this.ybase === 0) {\n                    if (this.y < newRows - 1) {\n                        this.y++;\n                        this.lines.pop();\n                    }\n                    else {\n                        this.ybase++;\n                        this.ydisp++;\n                    }\n                }\n                else {\n                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n                        if (this.ybase === this.ydisp) {\n                            this.ydisp++;\n                        }\n                        this.ybase++;\n                    }\n                }\n            }\n        }\n        if (toInsert.length > 0) {\n            var insertEvents = [];\n            var originalLines = [];\n            for (var i = 0; i < this.lines.length; i++) {\n                originalLines.push(this.lines.get(i));\n            }\n            var originalLinesLength = this.lines.length;\n            var originalLineIndex = originalLinesLength - 1;\n            var nextToInsertIndex = 0;\n            var nextToInsert = toInsert[nextToInsertIndex];\n            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n            var countInsertedSoFar = 0;\n            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n                        this.lines.set(i--, nextToInsert.newLines[nextI]);\n                    }\n                    i++;\n                    insertEvents.push({\n                        index: originalLineIndex + 1,\n                        amount: nextToInsert.newLines.length\n                    });\n                    countInsertedSoFar += nextToInsert.newLines.length;\n                    nextToInsert = toInsert[++nextToInsertIndex];\n                }\n                else {\n                    this.lines.set(i, originalLines[originalLineIndex--]);\n                }\n            }\n            var insertCountEmitted = 0;\n            for (var i = insertEvents.length - 1; i >= 0; i--) {\n                insertEvents[i].index += insertCountEmitted;\n                this.lines.onInsertEmitter.fire(insertEvents[i]);\n                insertCountEmitted += insertEvents[i].amount;\n            }\n            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n            if (amountToTrim > 0) {\n                this.lines.onTrimEmitter.fire(amountToTrim);\n            }\n        }\n    };\n    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {\n        if (trimRight === void 0) { trimRight = false; }\n        while (stringIndex) {\n            var line = this.lines.get(lineIndex);\n            if (!line) {\n                return [-1, -1];\n            }\n            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;\n            for (var i = 0; i < length_1; ++i) {\n                if (line.get(i)[BufferLine_1.CHAR_DATA_WIDTH_INDEX]) {\n                    stringIndex -= line.get(i)[BufferLine_1.CHAR_DATA_CHAR_INDEX].length || 1;\n                }\n                if (stringIndex < 0) {\n                    return [lineIndex, i];\n                }\n            }\n            lineIndex++;\n        }\n        return [lineIndex, 0];\n    };\n    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {\n        if (startCol === void 0) { startCol = 0; }\n        var line = this.lines.get(lineIndex);\n        if (!line) {\n            return '';\n        }\n        return line.translateToString(trimRight, startCol, endCol);\n    };\n    Buffer.prototype.getWrappedRangeForLine = function (y) {\n        var first = y;\n        var last = y;\n        while (first > 0 && this.lines.get(first).isWrapped) {\n            first--;\n        }\n        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {\n            last++;\n        }\n        return { first: first, last: last };\n    };\n    Buffer.prototype.setupTabStops = function (i) {\n        if (i !== null && i !== undefined) {\n            if (!this.tabs[i]) {\n                i = this.prevStop(i);\n            }\n        }\n        else {\n            this.tabs = {};\n            i = 0;\n        }\n        for (; i < this._cols; i += this._terminal.options.tabStopWidth) {\n            this.tabs[i] = true;\n        }\n    };\n    Buffer.prototype.prevStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[--x] && x > 0)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.nextStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[++x] && x < this._cols)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.addMarker = function (y) {\n        var _this = this;\n        var marker = new Marker_1.Marker(y);\n        this.markers.push(marker);\n        marker.register(this.lines.onTrim(function (amount) {\n            marker.line -= amount;\n            if (marker.line < 0) {\n                marker.dispose();\n            }\n        }));\n        marker.register(this.lines.onInsert(function (event) {\n            if (marker.line >= event.index) {\n                marker.line += event.amount;\n            }\n        }));\n        marker.register(this.lines.onDelete(function (event) {\n            if (marker.line >= event.index && marker.line < event.index + event.amount) {\n                marker.dispose();\n            }\n            if (marker.line > event.index) {\n                marker.line -= event.amount;\n            }\n        }));\n        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));\n        return marker;\n    };\n    Buffer.prototype._removeMarker = function (marker) {\n        this.markers.splice(this.markers.indexOf(marker), 1);\n    };\n    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {\n        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n    };\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nvar BufferStringIterator = (function () {\n    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {\n        if (_startIndex === void 0) { _startIndex = 0; }\n        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }\n        if (_startOverscan === void 0) { _startOverscan = 0; }\n        if (_endOverscan === void 0) { _endOverscan = 0; }\n        this._buffer = _buffer;\n        this._trimRight = _trimRight;\n        this._startIndex = _startIndex;\n        this._endIndex = _endIndex;\n        this._startOverscan = _startOverscan;\n        this._endOverscan = _endOverscan;\n        if (this._startIndex < 0) {\n            this._startIndex = 0;\n        }\n        if (this._endIndex > this._buffer.lines.length) {\n            this._endIndex = this._buffer.lines.length;\n        }\n        this._current = this._startIndex;\n    }\n    BufferStringIterator.prototype.hasNext = function () {\n        return this._current < this._endIndex;\n    };\n    BufferStringIterator.prototype.next = function () {\n        var range = this._buffer.getWrappedRangeForLine(this._current);\n        if (range.first < this._startIndex - this._startOverscan) {\n            range.first = this._startIndex - this._startOverscan;\n        }\n        if (range.last > this._endIndex + this._endOverscan) {\n            range.last = this._endIndex + this._endOverscan;\n        }\n        range.first = Math.max(range.first, 0);\n        range.last = Math.min(range.last, this._buffer.lines.length);\n        var result = '';\n        for (var i = range.first; i <= range.last; ++i) {\n            result += this._buffer.translateBufferLineToString(i, this._trimRight);\n        }\n        this._current = range.last + 1;\n        return { range: range, content: result };\n    };\n    return BufferStringIterator;\n}());\nexports.BufferStringIterator = BufferStringIterator;\n\n},{\"./common/CircularList\":20,\"./core/buffer/BufferLine\":29,\"./core/buffer/BufferReflow\":30,\"./core/buffer/Marker\":31}],3:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferSet = (function () {\n    function BufferSet(_terminal) {\n        this._terminal = _terminal;\n        this._onBufferActivate = new EventEmitter2_1.EventEmitter2();\n        this._normal = new Buffer_1.Buffer(this._terminal, true);\n        this._normal.fillViewportRows();\n        this._alt = new Buffer_1.Buffer(this._terminal, false);\n        this._activeBuffer = this._normal;\n        this.setupTabStops();\n    }\n    Object.defineProperty(BufferSet.prototype, \"onBufferActivate\", {\n        get: function () { return this._onBufferActivate.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"alt\", {\n        get: function () {\n            return this._alt;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"active\", {\n        get: function () {\n            return this._activeBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"normal\", {\n        get: function () {\n            return this._normal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferSet.prototype.activateNormalBuffer = function () {\n        if (this._activeBuffer === this._normal) {\n            return;\n        }\n        this._normal.x = this._alt.x;\n        this._normal.y = this._alt.y;\n        this._alt.clear();\n        this._activeBuffer = this._normal;\n        this._onBufferActivate.fire({\n            activeBuffer: this._normal,\n            inactiveBuffer: this._alt\n        });\n    };\n    BufferSet.prototype.activateAltBuffer = function (fillAttr) {\n        if (this._activeBuffer === this._alt) {\n            return;\n        }\n        this._alt.fillViewportRows(fillAttr);\n        this._alt.x = this._normal.x;\n        this._alt.y = this._normal.y;\n        this._activeBuffer = this._alt;\n        this._onBufferActivate.fire({\n            activeBuffer: this._alt,\n            inactiveBuffer: this._normal\n        });\n    };\n    BufferSet.prototype.resize = function (newCols, newRows) {\n        this._normal.resize(newCols, newRows);\n        this._alt.resize(newCols, newRows);\n    };\n    BufferSet.prototype.setupTabStops = function (i) {\n        this._normal.setupTabStops(i);\n        this._alt.setupTabStops(i);\n    };\n    return BufferSet;\n}());\nexports.BufferSet = BufferSet;\n\n},{\"./Buffer\":2,\"./common/EventEmitter2\":23}],4:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar CharMeasure = (function () {\n    function CharMeasure(document, parentElement) {\n        this._onCharSizeChanged = new EventEmitter2_1.EventEmitter2();\n        this._document = document;\n        this._parentElement = parentElement;\n        this._measureElement = this._document.createElement('span');\n        this._measureElement.classList.add('xterm-char-measure-element');\n        this._measureElement.textContent = 'W';\n        this._measureElement.setAttribute('aria-hidden', 'true');\n        this._parentElement.appendChild(this._measureElement);\n    }\n    Object.defineProperty(CharMeasure.prototype, \"onCharSizeChanged\", {\n        get: function () { return this._onCharSizeChanged.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function (options) {\n        this._measureElement.style.fontFamily = options.fontFamily;\n        this._measureElement.style.fontSize = options.fontSize + \"px\";\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        var adjustedHeight = Math.ceil(geometry.height);\n        if (this._width !== geometry.width || this._height !== adjustedHeight) {\n            this._width = geometry.width;\n            this._height = adjustedHeight;\n            this._onCharSizeChanged.fire();\n        }\n    };\n    return CharMeasure;\n}());\nexports.CharMeasure = CharMeasure;\n\n},{\"./common/EventEmitter2\":23}],5:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nexports.wcwidth = (function (opts) {\n    var COMBINING_BMP = [\n        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n    ];\n    var COMBINING_HIGH = [\n        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n        [0xE0100, 0xE01EF]\n    ];\n    function bisearch(ucs, data) {\n        var min = 0;\n        var max = data.length - 1;\n        var mid;\n        if (ucs < data[0][0] || ucs > data[max][1]) {\n            return false;\n        }\n        while (max >= min) {\n            mid = (min + max) >> 1;\n            if (ucs > data[mid][1]) {\n                min = mid + 1;\n            }\n            else if (ucs < data[mid][0]) {\n                max = mid - 1;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    function wcwidthHigh(ucs) {\n        if (bisearch(ucs, COMBINING_HIGH)) {\n            return 0;\n        }\n        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {\n            return 2;\n        }\n        return 1;\n    }\n    var control = opts.control | 0;\n    var table = new Uint8Array(65536);\n    TypedArrayUtils_1.fill(table, 1);\n    table[0] = opts.nul;\n    TypedArrayUtils_1.fill(table, opts.control, 1, 32);\n    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);\n    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);\n    table[0x2329] = 2;\n    table[0x232a] = 2;\n    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);\n    table[0x303f] = 1;\n    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);\n    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);\n    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);\n    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);\n    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);\n    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);\n    for (var r = 0; r < COMBINING_BMP.length; ++r) {\n        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);\n    }\n    return function (num) {\n        if (num < 32) {\n            return control | 0;\n        }\n        if (num < 127) {\n            return 1;\n        }\n        if (num < 65536) {\n            return table[num];\n        }\n        return wcwidthHigh(num);\n    };\n})({ nul: 0, control: 0 });\nfunction getStringCellWidth(s) {\n    var result = 0;\n    var length = s.length;\n    for (var i = 0; i < length; ++i) {\n        var code = s.charCodeAt(i);\n        if (0xD800 <= code && code <= 0xDBFF) {\n            if (++i >= length) {\n                return result + exports.wcwidth(code);\n            }\n            var second = s.charCodeAt(i);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                result += exports.wcwidth(second);\n            }\n        }\n        result += exports.wcwidth(code);\n    }\n    return result;\n}\nexports.getStringCellWidth = getStringCellWidth;\n\n},{\"./common/TypedArrayUtils\":26}],6:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction prepareTextForTerminal(text) {\n    return text.replace(/\\r?\\n/g, '\\r');\n}\nexports.prepareTextForTerminal = prepareTextForTerminal;\nfunction bracketTextForPaste(text, bracketedPasteMode) {\n    if (bracketedPasteMode) {\n        return '\\x1b[200~' + text + '\\x1b[201~';\n    }\n    return text;\n}\nexports.bracketTextForPaste = bracketTextForPaste;\nfunction copyHandler(ev, term, selectionManager) {\n    if (term.browser.isMSIE) {\n        window.clipboardData.setData('Text', selectionManager.selectionText);\n    }\n    else {\n        ev.clipboardData.setData('text/plain', selectionManager.selectionText);\n    }\n    ev.preventDefault();\n}\nexports.copyHandler = copyHandler;\nfunction pasteHandler(ev, term) {\n    ev.stopPropagation();\n    var text;\n    var dispatchPaste = function (text) {\n        text = prepareTextForTerminal(text);\n        text = bracketTextForPaste(text, term.bracketedPasteMode);\n        term.handler(text);\n        term.textarea.value = '';\n        term.emit('paste', text);\n        term.cancel(ev);\n    };\n    if (term.browser.isMSIE) {\n        if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n            dispatchPaste(text);\n        }\n    }\n    else {\n        if (ev.clipboardData) {\n            text = ev.clipboardData.getData('text/plain');\n            dispatchPaste(text);\n        }\n    }\n}\nexports.pasteHandler = pasteHandler;\nfunction moveTextAreaUnderMouseCursor(ev, term) {\n    var pos = term.screenElement.getBoundingClientRect();\n    var left = ev.clientX - pos.left - 10;\n    var top = ev.clientY - pos.top - 10;\n    term.textarea.style.position = 'absolute';\n    term.textarea.style.width = '20px';\n    term.textarea.style.height = '20px';\n    term.textarea.style.left = left + \"px\";\n    term.textarea.style.top = top + \"px\";\n    term.textarea.style.zIndex = '1000';\n    term.textarea.focus();\n    setTimeout(function () {\n        term.textarea.style.position = null;\n        term.textarea.style.width = null;\n        term.textarea.style.height = null;\n        term.textarea.style.left = null;\n        term.textarea.style.top = null;\n        term.textarea.style.zIndex = null;\n    }, 200);\n}\nexports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;\nfunction rightClickHandler(ev, term, selectionManager, shouldSelectWord) {\n    moveTextAreaUnderMouseCursor(ev, term);\n    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {\n        selectionManager.selectWordAtCursor(ev);\n    }\n    term.textarea.value = selectionManager.selectionText;\n    term.textarea.select();\n}\nexports.rightClickHandler = rightClickHandler;\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CompositionHelper = (function () {\n    function CompositionHelper(_textarea, _compositionView, _terminal) {\n        this._textarea = _textarea;\n        this._compositionView = _compositionView;\n        this._terminal = _terminal;\n        this._isComposing = false;\n        this._isSendingComposition = false;\n        this._compositionPosition = { start: null, end: null };\n    }\n    CompositionHelper.prototype.compositionstart = function () {\n        this._isComposing = true;\n        this._compositionPosition.start = this._textarea.value.length;\n        this._compositionView.textContent = '';\n        this._compositionView.classList.add('active');\n    };\n    CompositionHelper.prototype.compositionupdate = function (ev) {\n        var _this = this;\n        this._compositionView.textContent = ev.data;\n        this.updateCompositionElements();\n        setTimeout(function () {\n            _this._compositionPosition.end = _this._textarea.value.length;\n        }, 0);\n    };\n    CompositionHelper.prototype.compositionend = function () {\n        this._finalizeComposition(true);\n    };\n    CompositionHelper.prototype.keydown = function (ev) {\n        if (this._isComposing || this._isSendingComposition) {\n            if (ev.keyCode === 229) {\n                return false;\n            }\n            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n                return false;\n            }\n            this._finalizeComposition(false);\n        }\n        if (ev.keyCode === 229) {\n            this._handleAnyTextareaChanges();\n            return false;\n        }\n        return true;\n    };\n    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {\n        var _this = this;\n        this._compositionView.classList.remove('active');\n        this._isComposing = false;\n        this._clearTextareaPosition();\n        if (!waitForPropagation) {\n            this._isSendingComposition = false;\n            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n            this._terminal.handler(input);\n        }\n        else {\n            var currentCompositionPosition_1 = {\n                start: this._compositionPosition.start,\n                end: this._compositionPosition.end\n            };\n            this._isSendingComposition = true;\n            setTimeout(function () {\n                if (_this._isSendingComposition) {\n                    _this._isSendingComposition = false;\n                    var input = void 0;\n                    if (_this._isComposing) {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);\n                    }\n                    else {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);\n                    }\n                    _this._terminal.handler(input);\n                }\n            }, 0);\n        }\n    };\n    CompositionHelper.prototype._handleAnyTextareaChanges = function () {\n        var _this = this;\n        var oldValue = this._textarea.value;\n        setTimeout(function () {\n            if (!_this._isComposing) {\n                var newValue = _this._textarea.value;\n                var diff = newValue.replace(oldValue, '');\n                if (diff.length > 0) {\n                    _this._terminal.handler(diff);\n                }\n            }\n        }, 0);\n    };\n    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {\n        var _this = this;\n        if (!this._isComposing) {\n            return;\n        }\n        if (this._terminal.buffer.isCursorInViewport) {\n            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);\n            var cursorTop = this._terminal.buffer.y * cellHeight;\n            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;\n            this._compositionView.style.left = cursorLeft + 'px';\n            this._compositionView.style.top = cursorTop + 'px';\n            this._compositionView.style.height = cellHeight + 'px';\n            this._compositionView.style.lineHeight = cellHeight + 'px';\n            this._compositionView.style.fontFamily = this._terminal.options.fontFamily;\n            this._compositionView.style.fontSize = this._terminal.options.fontSize + 'px';\n            var compositionViewBounds = this._compositionView.getBoundingClientRect();\n            this._textarea.style.left = cursorLeft + 'px';\n            this._textarea.style.top = cursorTop + 'px';\n            this._textarea.style.width = compositionViewBounds.width + 'px';\n            this._textarea.style.height = compositionViewBounds.height + 'px';\n            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n        }\n        if (!dontRecurse) {\n            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);\n        }\n    };\n    CompositionHelper.prototype._clearTextareaPosition = function () {\n        this._textarea.style.left = '';\n        this._textarea.style.top = '';\n    };\n    return CompositionHelper;\n}());\nexports.CompositionHelper = CompositionHelper;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nfunction r(low, high) {\n    var c = high - low;\n    var arr = new Array(c);\n    while (c--) {\n        arr[c] = --high;\n    }\n    return arr;\n}\nvar TransitionTable = (function () {\n    function TransitionTable(length) {\n        this.table = (typeof Uint8Array === 'undefined')\n            ? new Array(length)\n            : new Uint8Array(length);\n    }\n    TransitionTable.prototype.add = function (code, state, action, next) {\n        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);\n    };\n    TransitionTable.prototype.addMany = function (codes, state, action, next) {\n        for (var i = 0; i < codes.length; i++) {\n            this.add(codes[i], state, action, next);\n        }\n    };\n    return TransitionTable;\n}());\nexports.TransitionTable = TransitionTable;\nvar PRINTABLES = r(0x20, 0x7f);\nvar EXECUTABLES = r(0x00, 0x18);\nEXECUTABLES.push(0x19);\nEXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\nvar NON_ASCII_PRINTABLE = 0xA0;\nexports.VT500_TRANSITION_TABLE = (function () {\n    var table = new TransitionTable(4095);\n    var states = r(0, 13 + 1);\n    var state;\n    for (state in states) {\n        for (var code = 0; code <= NON_ASCII_PRINTABLE; ++code) {\n            table.add(code, state, 1, 0);\n        }\n    }\n    table.addMany(PRINTABLES, 0, 2, 0);\n    for (state in states) {\n        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);\n        table.addMany(r(0x80, 0x90), state, 3, 0);\n        table.addMany(r(0x90, 0x98), state, 3, 0);\n        table.add(0x9c, state, 0, 0);\n        table.add(0x1b, state, 11, 1);\n        table.add(0x9d, state, 4, 8);\n        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);\n        table.add(0x9b, state, 11, 3);\n        table.add(0x90, state, 11, 9);\n    }\n    table.addMany(EXECUTABLES, 0, 3, 0);\n    table.addMany(EXECUTABLES, 1, 3, 1);\n    table.add(0x7f, 1, 0, 1);\n    table.addMany(EXECUTABLES, 8, 0, 8);\n    table.addMany(EXECUTABLES, 3, 3, 3);\n    table.add(0x7f, 3, 0, 3);\n    table.addMany(EXECUTABLES, 4, 3, 4);\n    table.add(0x7f, 4, 0, 4);\n    table.addMany(EXECUTABLES, 6, 3, 6);\n    table.addMany(EXECUTABLES, 5, 3, 5);\n    table.add(0x7f, 5, 0, 5);\n    table.addMany(EXECUTABLES, 2, 3, 2);\n    table.add(0x7f, 2, 0, 2);\n    table.add(0x5d, 1, 4, 8);\n    table.addMany(PRINTABLES, 8, 5, 8);\n    table.add(0x7f, 8, 5, 8);\n    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);\n    table.addMany(r(0x1c, 0x20), 8, 0, 8);\n    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);\n    table.addMany(PRINTABLES, 7, 0, 7);\n    table.addMany(EXECUTABLES, 7, 0, 7);\n    table.add(0x9c, 7, 0, 0);\n    table.add(0x7f, 7, 0, 7);\n    table.add(0x5b, 1, 11, 3);\n    table.addMany(r(0x40, 0x7f), 3, 7, 0);\n    table.addMany(r(0x30, 0x3a), 3, 8, 4);\n    table.add(0x3b, 3, 8, 4);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);\n    table.addMany(r(0x30, 0x3a), 4, 8, 4);\n    table.add(0x3b, 4, 8, 4);\n    table.addMany(r(0x40, 0x7f), 4, 7, 0);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);\n    table.addMany(r(0x20, 0x40), 6, 0, 6);\n    table.add(0x7f, 6, 0, 6);\n    table.addMany(r(0x40, 0x7f), 6, 0, 0);\n    table.add(0x3a, 3, 0, 6);\n    table.addMany(r(0x20, 0x30), 3, 9, 5);\n    table.addMany(r(0x20, 0x30), 5, 9, 5);\n    table.addMany(r(0x30, 0x40), 5, 0, 6);\n    table.addMany(r(0x40, 0x7f), 5, 7, 0);\n    table.addMany(r(0x20, 0x30), 4, 9, 5);\n    table.addMany(r(0x20, 0x30), 1, 9, 2);\n    table.addMany(r(0x20, 0x30), 2, 9, 2);\n    table.addMany(r(0x30, 0x7f), 2, 10, 0);\n    table.addMany(r(0x30, 0x50), 1, 10, 0);\n    table.addMany(r(0x51, 0x58), 1, 10, 0);\n    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);\n    table.addMany(r(0x60, 0x7f), 1, 10, 0);\n    table.add(0x50, 1, 11, 9);\n    table.addMany(EXECUTABLES, 9, 0, 9);\n    table.add(0x7f, 9, 0, 9);\n    table.addMany(r(0x1c, 0x20), 9, 0, 9);\n    table.addMany(r(0x20, 0x30), 9, 9, 12);\n    table.add(0x3a, 9, 0, 11);\n    table.addMany(r(0x30, 0x3a), 9, 8, 10);\n    table.add(0x3b, 9, 8, 10);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);\n    table.addMany(EXECUTABLES, 11, 0, 11);\n    table.addMany(r(0x20, 0x80), 11, 0, 11);\n    table.addMany(r(0x1c, 0x20), 11, 0, 11);\n    table.addMany(EXECUTABLES, 10, 0, 10);\n    table.add(0x7f, 10, 0, 10);\n    table.addMany(r(0x1c, 0x20), 10, 0, 10);\n    table.addMany(r(0x30, 0x3a), 10, 8, 10);\n    table.add(0x3b, 10, 8, 10);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);\n    table.addMany(r(0x20, 0x30), 10, 9, 12);\n    table.addMany(EXECUTABLES, 12, 0, 12);\n    table.add(0x7f, 12, 0, 12);\n    table.addMany(r(0x1c, 0x20), 12, 0, 12);\n    table.addMany(r(0x20, 0x30), 12, 9, 12);\n    table.addMany(r(0x30, 0x40), 12, 0, 11);\n    table.addMany(r(0x40, 0x7f), 12, 12, 13);\n    table.addMany(r(0x40, 0x7f), 10, 12, 13);\n    table.addMany(r(0x40, 0x7f), 9, 12, 13);\n    table.addMany(EXECUTABLES, 13, 13, 13);\n    table.addMany(PRINTABLES, 13, 13, 13);\n    table.add(0x7f, 13, 0, 13);\n    table.addMany([0x1b, 0x9c], 13, 14, 0);\n    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);\n    return table;\n})();\nvar DcsDummy = (function () {\n    function DcsDummy() {\n    }\n    DcsDummy.prototype.hook = function (collect, params, flag) { };\n    DcsDummy.prototype.put = function (data, start, end) { };\n    DcsDummy.prototype.unhook = function () { };\n    return DcsDummy;\n}());\nvar EscapeSequenceParser = (function (_super) {\n    __extends(EscapeSequenceParser, _super);\n    function EscapeSequenceParser(TRANSITIONS) {\n        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }\n        var _this = _super.call(this) || this;\n        _this.TRANSITIONS = TRANSITIONS;\n        _this.initialState = 0;\n        _this.currentState = _this.initialState;\n        _this._osc = '';\n        _this._params = [0];\n        _this._collect = '';\n        _this._printHandlerFb = function (data, start, end) { };\n        _this._executeHandlerFb = function (code) { };\n        _this._csiHandlerFb = function (collect, params, flag) { };\n        _this._escHandlerFb = function (collect, flag) { };\n        _this._oscHandlerFb = function (identifier, data) { };\n        _this._dcsHandlerFb = new DcsDummy();\n        _this._errorHandlerFb = function (state) { return state; };\n        _this._printHandler = _this._printHandlerFb;\n        _this._executeHandlers = Object.create(null);\n        _this._csiHandlers = Object.create(null);\n        _this._escHandlers = Object.create(null);\n        _this._oscHandlers = Object.create(null);\n        _this._dcsHandlers = Object.create(null);\n        _this._activeDcsHandler = null;\n        _this._errorHandler = _this._errorHandlerFb;\n        _this.setEscHandler('\\\\', function () { });\n        return _this;\n    }\n    EscapeSequenceParser.prototype.dispose = function () {\n        this._printHandlerFb = null;\n        this._executeHandlerFb = null;\n        this._csiHandlerFb = null;\n        this._escHandlerFb = null;\n        this._oscHandlerFb = null;\n        this._dcsHandlerFb = null;\n        this._errorHandlerFb = null;\n        this._printHandler = null;\n        this._executeHandlers = null;\n        this._escHandlers = null;\n        this._csiHandlers = null;\n        this._oscHandlers = null;\n        this._dcsHandlers = null;\n        this._activeDcsHandler = null;\n        this._errorHandler = null;\n    };\n    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {\n        this._printHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearPrintHandler = function () {\n        this._printHandler = this._printHandlerFb;\n    };\n    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {\n        this._executeHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {\n        if (this._executeHandlers[flag.charCodeAt(0)])\n            delete this._executeHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {\n        this._executeHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addCsiHandler = function (flag, callback) {\n        var index = flag.charCodeAt(0);\n        if (this._csiHandlers[index] === undefined) {\n            this._csiHandlers[index] = [];\n        }\n        var handlerList = this._csiHandlers[index];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {\n        this._csiHandlers[flag.charCodeAt(0)] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {\n        if (this._csiHandlers[flag.charCodeAt(0)])\n            delete this._csiHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {\n        this._csiHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {\n        this._escHandlers[collectAndFlag] = callback;\n    };\n    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {\n        if (this._escHandlers[collectAndFlag])\n            delete this._escHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {\n        this._escHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addOscHandler = function (ident, callback) {\n        if (this._oscHandlers[ident] === undefined) {\n            this._oscHandlers[ident] = [];\n        }\n        var handlerList = this._oscHandlers[ident];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {\n        this._oscHandlers[ident] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {\n        if (this._oscHandlers[ident])\n            delete this._oscHandlers[ident];\n    };\n    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {\n        this._oscHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {\n        this._dcsHandlers[collectAndFlag] = handler;\n    };\n    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {\n        if (this._dcsHandlers[collectAndFlag])\n            delete this._dcsHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {\n        this._dcsHandlerFb = handler;\n    };\n    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {\n        this._errorHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearErrorHandler = function () {\n        this._errorHandler = this._errorHandlerFb;\n    };\n    EscapeSequenceParser.prototype.reset = function () {\n        this.currentState = this.initialState;\n        this._osc = '';\n        this._params = [0];\n        this._collect = '';\n        this._activeDcsHandler = null;\n    };\n    EscapeSequenceParser.prototype.parse = function (data, length) {\n        var code = 0;\n        var transition = 0;\n        var error = false;\n        var currentState = this.currentState;\n        var print = -1;\n        var dcs = -1;\n        var osc = this._osc;\n        var collect = this._collect;\n        var params = this._params;\n        var table = this.TRANSITIONS.table;\n        var dcsHandler = this._activeDcsHandler;\n        var callback = null;\n        for (var i = 0; i < length; ++i) {\n            code = data[i];\n            if (currentState === 0 && code > 0x1f && code < 0x80) {\n                print = (~print) ? print : i;\n                do\n                    i++;\n                while (i < length && data[i] > 0x1f && data[i] < 0x80);\n                i--;\n                continue;\n            }\n            if (currentState === 4 && (code > 0x2f && code < 0x39)) {\n                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                continue;\n            }\n            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n            switch (transition >> 4) {\n                case 2:\n                    print = (~print) ? print : i;\n                    break;\n                case 3:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    callback = this._executeHandlers[code];\n                    if (callback)\n                        callback();\n                    else\n                        this._executeHandlerFb(code);\n                    break;\n                case 0:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    else if (~dcs) {\n                        dcsHandler.put(data, dcs, i);\n                        dcs = -1;\n                    }\n                    break;\n                case 1:\n                    if (code > 0x9f) {\n                        switch (currentState) {\n                            case 0:\n                                print = (~print) ? print : i;\n                                break;\n                            case 6:\n                                transition |= 6;\n                                break;\n                            case 11:\n                                transition |= 11;\n                                break;\n                            case 13:\n                                dcs = (~dcs) ? dcs : i;\n                                transition |= 13;\n                                break;\n                            default:\n                                error = true;\n                        }\n                    }\n                    else {\n                        error = true;\n                    }\n                    if (error) {\n                        var inject = this._errorHandler({\n                            position: i,\n                            code: code,\n                            currentState: currentState,\n                            print: print,\n                            dcs: dcs,\n                            osc: osc,\n                            collect: collect,\n                            params: params,\n                            abort: false\n                        });\n                        if (inject.abort)\n                            return;\n                        error = false;\n                    }\n                    break;\n                case 7:\n                    var handlers = this._csiHandlers[code];\n                    var j = handlers ? handlers.length - 1 : -1;\n                    for (; j >= 0; j--) {\n                        if (handlers[j](params, collect) !== false) {\n                            break;\n                        }\n                    }\n                    if (j < 0) {\n                        this._csiHandlerFb(collect, params, code);\n                    }\n                    break;\n                case 8:\n                    if (code === 0x3b)\n                        params.push(0);\n                    else\n                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                    break;\n                case 9:\n                    collect += String.fromCharCode(code);\n                    break;\n                case 10:\n                    callback = this._escHandlers[collect + String.fromCharCode(code)];\n                    if (callback)\n                        callback(collect, code);\n                    else\n                        this._escHandlerFb(collect, code);\n                    break;\n                case 11:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 12:\n                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];\n                    if (!dcsHandler)\n                        dcsHandler = this._dcsHandlerFb;\n                    dcsHandler.hook(collect, params, code);\n                    break;\n                case 13:\n                    dcs = (~dcs) ? dcs : i;\n                    break;\n                case 14:\n                    if (dcsHandler) {\n                        if (~dcs)\n                            dcsHandler.put(data, dcs, i);\n                        dcsHandler.unhook();\n                        dcsHandler = null;\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 4:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    break;\n                case 5:\n                    for (var j_1 = i + 1;; j_1++) {\n                        if (j_1 >= length\n                            || (code = data[j_1]) < 0x20\n                            || (code > 0x7f && code <= 0x9f)) {\n                            osc += TextDecoder_1.utf32ToString(data, i, j_1);\n                            i = j_1 - 1;\n                            break;\n                        }\n                    }\n                    break;\n                case 6:\n                    if (osc && code !== 0x18 && code !== 0x1a) {\n                        var idx = osc.indexOf(';');\n                        if (idx === -1) {\n                            this._oscHandlerFb(-1, osc);\n                        }\n                        else {\n                            var identifier = parseInt(osc.substring(0, idx));\n                            var content = osc.substring(idx + 1);\n                            var handlers_1 = this._oscHandlers[identifier];\n                            var j_2 = handlers_1 ? handlers_1.length - 1 : -1;\n                            for (; j_2 >= 0; j_2--) {\n                                if (handlers_1[j_2](content) !== false) {\n                                    break;\n                                }\n                            }\n                            if (j_2 < 0) {\n                                this._oscHandlerFb(identifier, content);\n                            }\n                        }\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n            }\n            currentState = transition & 15;\n        }\n        if (currentState === 0 && ~print) {\n            this._printHandler(data, print, length);\n        }\n        else if (currentState === 13 && ~dcs && dcsHandler) {\n            dcsHandler.put(data, dcs, length);\n        }\n        this._osc = osc;\n        this._collect = collect;\n        this._params = params;\n        this._activeDcsHandler = dcsHandler;\n        this.currentState = currentState;\n    };\n    return EscapeSequenceParser;\n}(Lifecycle_1.Disposable));\nexports.EscapeSequenceParser = EscapeSequenceParser;\n\n},{\"./common/Lifecycle\":24,\"./core/input/TextDecoder\":34}],9:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar Charsets_1 = require(\"./core/data/Charsets\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EscapeSequenceParser_1 = require(\"./EscapeSequenceParser\");\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\nvar DECRQSS = (function () {\n    function DECRQSS(_terminal) {\n        this._terminal = _terminal;\n        this._data = new Uint32Array(0);\n    }\n    DECRQSS.prototype.hook = function (collect, params, flag) {\n        this._data = new Uint32Array(0);\n    };\n    DECRQSS.prototype.put = function (data, start, end) {\n        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));\n    };\n    DECRQSS.prototype.unhook = function () {\n        var data = TextDecoder_1.utf32ToString(this._data);\n        this._data = new Uint32Array(0);\n        switch (data) {\n            case '\"q':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0\\\"q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case '\"p':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r61\\\"p\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'r':\n                var pt = '' + (this._terminal.buffer.scrollTop + 1) +\n                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + pt + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'm':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0m\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case ' q':\n                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };\n                var style = STYLES[this._terminal.getOption('cursorStyle')];\n                style -= this._terminal.getOption('cursorBlink');\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + style + \" q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            default:\n                this._terminal.error('Unknown DCS $q %s', data);\n                this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0$r\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n        }\n    };\n    return DECRQSS;\n}());\nvar InputHandler = (function (_super) {\n    __extends(InputHandler, _super);\n    function InputHandler(_terminal, _parser) {\n        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._parser = _parser;\n        _this._parseBuffer = new Uint32Array(4096);\n        _this._stringDecoder = new TextDecoder_1.StringToUtf32();\n        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();\n        _this._workCell = new BufferLine_1.CellData();\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this.register(_this._parser);\n        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {\n            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setEscHandlerFallback(function (collect, flag) {\n            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setExecuteHandlerFallback(function (code) {\n            _this._terminal.error('Unknown EXECUTE code: ', { code: code });\n        });\n        _this._parser.setOscHandlerFallback(function (identifier, data) {\n            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });\n        });\n        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });\n        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });\n        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });\n        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });\n        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });\n        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });\n        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });\n        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });\n        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });\n        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });\n        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });\n        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });\n        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });\n        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });\n        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });\n        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });\n        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });\n        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });\n        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });\n        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });\n        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });\n        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });\n        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });\n        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });\n        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });\n        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });\n        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });\n        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });\n        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });\n        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });\n        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });\n        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });\n        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });\n        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });\n        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });\n        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });\n        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });\n        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });\n        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });\n        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });\n        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });\n        _this._parser.setEscHandler('D', function () { return _this.index(); });\n        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });\n        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });\n        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });\n        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });\n        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });\n        _this._parser.setEscHandler('c', function () { return _this.reset(); });\n        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });\n        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });\n        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });\n        var _loop_1 = function (flag) {\n            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });\n            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });\n            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });\n            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });\n            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });\n            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });\n            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });\n        };\n        var this_1 = this;\n        for (var flag in Charsets_1.CHARSETS) {\n            _loop_1(flag);\n        }\n        _this._parser.setErrorHandler(function (state) {\n            _this._terminal.error('Parsing error: ', state);\n            return state;\n        });\n        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));\n        return _this;\n    }\n    Object.defineProperty(InputHandler.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    InputHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal = null;\n    };\n    InputHandler.prototype.parse = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._onCursorMove.fire();\n        }\n    };\n    InputHandler.prototype.parseUtf8 = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._utf8Decoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._terminal.emit('cursormove');\n        }\n    };\n    InputHandler.prototype.print = function (data, start, end) {\n        var code;\n        var chWidth;\n        var buffer = this._terminal.buffer;\n        var charset = this._terminal.charset;\n        var screenReaderMode = this._terminal.options.screenReaderMode;\n        var cols = this._terminal.cols;\n        var wraparoundMode = this._terminal.wraparoundMode;\n        var insertMode = this._terminal.insertMode;\n        var curAttr = this._terminal.curAttrData;\n        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n        this._terminal.updateRange(buffer.y);\n        for (var pos = start; pos < end; ++pos) {\n            code = data[pos];\n            chWidth = CharWidth_1.wcwidth(code);\n            if (code < 127 && charset) {\n                var ch = charset[String.fromCharCode(code)];\n                if (ch) {\n                    code = ch.charCodeAt(0);\n                }\n            }\n            if (screenReaderMode) {\n                this._terminal.emit('a11y.char', TextDecoder_1.stringFromCodePoint(code));\n            }\n            if (!chWidth && buffer.x) {\n                if (!bufferRow.getWidth(buffer.x - 1)) {\n                    bufferRow.addCodepointToCell(buffer.x - 2, code);\n                }\n                else {\n                    bufferRow.addCodepointToCell(buffer.x - 1, code);\n                }\n                continue;\n            }\n            if (buffer.x + chWidth - 1 >= cols) {\n                if (wraparoundMode) {\n                    buffer.x = 0;\n                    buffer.y++;\n                    if (buffer.y > buffer.scrollBottom) {\n                        buffer.y--;\n                        this._terminal.scroll(true);\n                    }\n                    else {\n                        buffer.lines.get(buffer.y).isWrapped = true;\n                    }\n                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n                }\n                else {\n                    if (chWidth === 2) {\n                        continue;\n                    }\n                }\n            }\n            if (insertMode) {\n                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));\n                if (bufferRow.getWidth(cols - 1) === 2) {\n                    bufferRow.setCellFromCodePoint(cols - 1, BufferLine_1.NULL_CELL_CODE, BufferLine_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);\n                }\n            }\n            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);\n            if (chWidth > 0) {\n                while (--chWidth) {\n                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);\n                }\n            }\n        }\n        this._terminal.updateRange(buffer.y);\n    };\n    InputHandler.prototype.addCsiHandler = function (flag, callback) {\n        return this._parser.addCsiHandler(flag, callback);\n    };\n    InputHandler.prototype.addOscHandler = function (ident, callback) {\n        return this._parser.addOscHandler(ident, callback);\n    };\n    InputHandler.prototype.bell = function () {\n        this._terminal.bell();\n    };\n    InputHandler.prototype.lineFeed = function () {\n        var buffer = this._terminal.buffer;\n        if (this._terminal.options.convertEol) {\n            buffer.x = 0;\n        }\n        buffer.y++;\n        if (buffer.y > buffer.scrollBottom) {\n            buffer.y--;\n            this._terminal.scroll();\n        }\n        if (buffer.x >= this._terminal.cols) {\n            buffer.x--;\n        }\n        this._onLineFeed.fire();\n    };\n    InputHandler.prototype.carriageReturn = function () {\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.backspace = function () {\n        if (this._terminal.buffer.x > 0) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.tab = function () {\n        var originalX = this._terminal.buffer.x;\n        this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        if (this._terminal.options.screenReaderMode) {\n            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);\n        }\n    };\n    InputHandler.prototype.shiftOut = function () {\n        this._terminal.setgLevel(1);\n    };\n    InputHandler.prototype.shiftIn = function () {\n        this._terminal.setgLevel(0);\n    };\n    InputHandler.prototype.insertChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.cursorUp = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n    };\n    InputHandler.prototype.cursorDown = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.cursorForward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.cursorBackward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n        this._terminal.buffer.x -= param;\n        if (this._terminal.buffer.x < 0) {\n            this._terminal.buffer.x = 0;\n        }\n    };\n    InputHandler.prototype.cursorNextLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorPrecedingLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorCharAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n    };\n    InputHandler.prototype.cursorPosition = function (params) {\n        var col;\n        var row = params[0] - 1;\n        if (params.length >= 2) {\n            col = params[1] - 1;\n        }\n        else {\n            col = 0;\n        }\n        if (row < 0) {\n            row = 0;\n        }\n        else if (row >= this._terminal.rows) {\n            row = this._terminal.rows - 1;\n        }\n        if (col < 0) {\n            col = 0;\n        }\n        else if (col >= this._terminal.cols) {\n            col = this._terminal.cols - 1;\n        }\n        this._terminal.buffer.x = col;\n        this._terminal.buffer.y = row;\n    };\n    InputHandler.prototype.cursorForwardTab = function (params) {\n        var param = params[0] || 1;\n        while (param--) {\n            this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        }\n    };\n    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {\n        if (clearWrap === void 0) { clearWrap = false; }\n        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);\n        line.replaceCells(start, end, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        if (clearWrap) {\n            line.isWrapped = false;\n        }\n    };\n    InputHandler.prototype._resetBufferLine = function (y) {\n        this._eraseInBufferLine(y, 0, this._terminal.cols, true);\n    };\n    InputHandler.prototype.eraseInDisplay = function (params) {\n        var j;\n        switch (params[0]) {\n            case 0:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);\n                for (; j < this._terminal.rows; j++) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(j);\n                break;\n            case 1:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);\n                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {\n                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;\n                }\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 2:\n                j = this._terminal.rows;\n                this._terminal.updateRange(j - 1);\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 3:\n                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;\n                if (scrollBackSize > 0) {\n                    this._terminal.buffer.lines.trimStart(scrollBackSize);\n                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);\n                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);\n                    this._onScroll.fire(0);\n                }\n                break;\n        }\n    };\n    InputHandler.prototype.eraseInLine = function (params) {\n        switch (params[0]) {\n            case 0:\n                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);\n                break;\n            case 1:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);\n                break;\n            case 2:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);\n                break;\n        }\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.insertLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;\n        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n        while (param--) {\n            buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var j;\n        j = this._terminal.rows - 1 - buffer.scrollBottom;\n        j = this._terminal.rows - 1 + buffer.ybase - j;\n        while (param--) {\n            buffer.lines.splice(row, 1);\n            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.scrollUp = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this._terminal.updateRange(buffer.scrollTop);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.scrollDown = function (params, collect) {\n        if (params.length < 2 && !collect) {\n            var param = params[0] || 1;\n            var buffer = this._terminal.buffer;\n            while (param--) {\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n            }\n            this._terminal.updateRange(buffer.scrollTop);\n            this._terminal.updateRange(buffer.scrollBottom);\n        }\n    };\n    InputHandler.prototype.eraseChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n    };\n    InputHandler.prototype.cursorBackwardTab = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.x = buffer.prevStop();\n        }\n    };\n    InputHandler.prototype.charPosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.hPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.repeatPrecedingCharacter = function (params) {\n        var buffer = this._terminal.buffer;\n        var line = buffer.lines.get(buffer.ybase + buffer.y);\n        line.loadCell(buffer.x - 1, this._workCell);\n        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), (this._workCell.content !== undefined) ? this._workCell : buffer.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n    };\n    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {\n        if (params[0] > 0) {\n            return;\n        }\n        if (!collect) {\n            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');\n            }\n        }\n        else if (collect === '>') {\n            if (this._terminal.is('xterm')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');\n            }\n            else if (this._terminal.is('rxvt-unicode')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(params[0] + 'c');\n            }\n            else if (this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');\n            }\n        }\n    };\n    InputHandler.prototype.linePosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y = param - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n    };\n    InputHandler.prototype.vPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.hVPosition = function (params) {\n        if (params[0] < 1)\n            params[0] = 1;\n        if (params[1] < 1)\n            params[1] = 1;\n        this._terminal.buffer.y = params[0] - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = params[1] - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.tabClear = function (params) {\n        var param = params[0];\n        if (param <= 0) {\n            delete this._terminal.buffer.tabs[this._terminal.buffer.x];\n        }\n        else if (param === 3) {\n            this._terminal.buffer.tabs = {};\n        }\n    };\n    InputHandler.prototype.setMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.setMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = true;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = true;\n                    break;\n                case 2:\n                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);\n                    break;\n                case 3:\n                    this._terminal.savedCols = this._terminal.cols;\n                    this._terminal.resize(132, this._terminal.rows);\n                    break;\n                case 6:\n                    this._terminal.originMode = true;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = true;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Serial port requested application keypad.');\n                    this._terminal.applicationKeypad = true;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = params[0] === 9;\n                    this._terminal.vt200Mouse = params[0] === 1000;\n                    this._terminal.normalMouse = params[0] > 1000;\n                    this._terminal.mouseEvents = true;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.add('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.disable();\n                    }\n                    this._terminal.log('Binding to mouse events.');\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = true;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = true;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = true;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = true;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = false;\n                    break;\n                case 1048:\n                    this.saveCursor(params);\n                    break;\n                case 1049:\n                    this.saveCursor(params);\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = true;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.resetMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.resetMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = false;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = false;\n                    break;\n                case 3:\n                    if (this._terminal.cols === 132 && this._terminal.savedCols) {\n                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);\n                    }\n                    delete this._terminal.savedCols;\n                    break;\n                case 6:\n                    this._terminal.originMode = false;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = false;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Switching back to normal keypad.');\n                    this._terminal.applicationKeypad = false;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = false;\n                    this._terminal.vt200Mouse = false;\n                    this._terminal.normalMouse = false;\n                    this._terminal.mouseEvents = false;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.remove('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.enable();\n                    }\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = false;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = false;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = false;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = false;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = true;\n                    break;\n                case 1048:\n                    this.restoreCursor(params);\n                    break;\n                case 1049:\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateNormalBuffer();\n                    if (params[0] === 1049) {\n                        this.restoreCursor(params);\n                    }\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = false;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.charAttributes = function (params) {\n        if (params.length === 1 && params[0] === 0) {\n            this._terminal.curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n            this._terminal.curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            return;\n        }\n        var l = params.length;\n        var p;\n        var attr = this._terminal.curAttrData;\n        for (var i = 0; i < l; i++) {\n            p = params[i];\n            if (p >= 30 && p <= 37) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 30);\n            }\n            else if (p >= 40 && p <= 47) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 40);\n            }\n            else if (p >= 90 && p <= 97) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 90) | 8;\n            }\n            else if (p >= 100 && p <= 107) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 100) | 8;\n            }\n            else if (p === 0) {\n                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            }\n            else if (p === 1) {\n                attr.fg |= 134217728;\n            }\n            else if (p === 3) {\n                attr.bg |= 67108864;\n            }\n            else if (p === 4) {\n                attr.fg |= 268435456;\n            }\n            else if (p === 5) {\n                attr.fg |= 536870912;\n            }\n            else if (p === 7) {\n                attr.fg |= 67108864;\n            }\n            else if (p === 8) {\n                attr.fg |= 1073741824;\n            }\n            else if (p === 2) {\n                attr.bg |= 134217728;\n            }\n            else if (p === 22) {\n                attr.fg &= ~134217728;\n                attr.bg &= ~134217728;\n            }\n            else if (p === 23) {\n                attr.bg &= ~67108864;\n            }\n            else if (p === 24) {\n                attr.fg &= ~268435456;\n            }\n            else if (p === 25) {\n                attr.fg &= ~536870912;\n            }\n            else if (p === 27) {\n                attr.fg &= ~67108864;\n            }\n            else if (p === 28) {\n                attr.fg &= ~1073741824;\n            }\n            else if (p === 39) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n            }\n            else if (p === 49) {\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else if (p === 38) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.fg |= 50331648;\n                    attr.fg &= ~16777215;\n                    attr.fg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.fg &= ~(50331648 | 255);\n                    attr.fg |= 33554432 | p;\n                }\n            }\n            else if (p === 48) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.bg |= 50331648;\n                    attr.bg &= ~16777215;\n                    attr.bg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.bg &= ~(50331648 | 255);\n                    attr.bg |= 33554432 | p;\n                }\n            }\n            else if (p === 100) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else {\n                this._terminal.error('Unknown SGR attribute: %d.', p);\n            }\n        }\n    };\n    InputHandler.prototype.deviceStatus = function (params, collect) {\n        if (!collect) {\n            switch (params[0]) {\n                case 5:\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[0n\");\n                    break;\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[\" + y + \";\" + x + \"R\");\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[?\" + y + \";\" + x + \"R\");\n                    break;\n                case 15:\n                    break;\n                case 25:\n                    break;\n                case 26:\n                    break;\n                case 53:\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.softReset = function (params, collect) {\n        if (collect === '!') {\n            this._terminal.cursorHidden = false;\n            this._terminal.insertMode = false;\n            this._terminal.originMode = false;\n            this._terminal.wraparoundMode = true;\n            this._terminal.applicationKeypad = false;\n            if (this._terminal.viewport) {\n                this._terminal.viewport.syncScrollArea();\n            }\n            this._terminal.applicationCursor = false;\n            this._terminal.buffer.scrollTop = 0;\n            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;\n            this._terminal.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n            this._terminal.buffer.x = this._terminal.buffer.y = 0;\n            this._terminal.charset = null;\n            this._terminal.glevel = 0;\n            this._terminal.charsets = [null];\n        }\n    };\n    InputHandler.prototype.setCursorStyle = function (params, collect) {\n        if (collect === ' ') {\n            var param = params[0] < 1 ? 1 : params[0];\n            switch (param) {\n                case 1:\n                case 2:\n                    this._terminal.setOption('cursorStyle', 'block');\n                    break;\n                case 3:\n                case 4:\n                    this._terminal.setOption('cursorStyle', 'underline');\n                    break;\n                case 5:\n                case 6:\n                    this._terminal.setOption('cursorStyle', 'bar');\n                    break;\n            }\n            var isBlinking = param % 2 === 1;\n            this._terminal.setOption('cursorBlink', isBlinking);\n        }\n    };\n    InputHandler.prototype.setScrollRegion = function (params, collect) {\n        if (collect) {\n            return;\n        }\n        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;\n        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;\n        this._terminal.buffer.x = 0;\n        this._terminal.buffer.y = 0;\n    };\n    InputHandler.prototype.saveCursor = function (params) {\n        this._terminal.buffer.savedX = this._terminal.buffer.x;\n        this._terminal.buffer.savedY = this._terminal.buffer.y;\n        this._terminal.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;\n        this._terminal.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;\n    };\n    InputHandler.prototype.restoreCursor = function (params) {\n        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;\n        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;\n        this._terminal.curAttrData.fg = this._terminal.buffer.savedCurAttrData.fg;\n        this._terminal.curAttrData.bg = this._terminal.buffer.savedCurAttrData.bg;\n    };\n    InputHandler.prototype.setTitle = function (data) {\n        this._terminal.handleTitle(data);\n    };\n    InputHandler.prototype.nextLine = function () {\n        this._terminal.buffer.x = 0;\n        this.index();\n    };\n    InputHandler.prototype.keypadApplicationMode = function () {\n        this._terminal.log('Serial port requested application keypad.');\n        this._terminal.applicationKeypad = true;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.keypadNumericMode = function () {\n        this._terminal.log('Switching back to normal keypad.');\n        this._terminal.applicationKeypad = false;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.selectDefaultCharset = function () {\n        this._terminal.setgLevel(0);\n        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.selectCharset = function (collectAndFlag) {\n        if (collectAndFlag.length !== 2) {\n            this.selectDefaultCharset();\n            return;\n        }\n        if (collectAndFlag[0] === '/') {\n            return;\n        }\n        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);\n        return;\n    };\n    InputHandler.prototype.index = function () {\n        this._terminal.index();\n    };\n    InputHandler.prototype.tabSet = function () {\n        this._terminal.tabSet();\n    };\n    InputHandler.prototype.reverseIndex = function () {\n        this._terminal.reverseIndex();\n    };\n    InputHandler.prototype.reset = function () {\n        this._parser.reset();\n        this._terminal.reset();\n    };\n    InputHandler.prototype.setgLevel = function (level) {\n        this._terminal.setgLevel(level);\n    };\n    return InputHandler;\n}(Lifecycle_1.Disposable));\nexports.InputHandler = InputHandler;\n\n},{\"./CharWidth\":5,\"./EscapeSequenceParser\":8,\"./common/EventEmitter2\":23,\"./common/Lifecycle\":24,\"./common/TypedArrayUtils\":26,\"./common/data/EscapeSequences\":28,\"./core/buffer/BufferLine\":29,\"./core/data/Charsets\":32,\"./core/input/TextDecoder\":34}],10:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar Linkifier = (function () {\n    function Linkifier(_terminal) {\n        this._terminal = _terminal;\n        this._linkMatchers = [];\n        this._nextLinkMatcherId = 0;\n        this._onLinkHover = new EventEmitter2_1.EventEmitter2();\n        this._onLinkLeave = new EventEmitter2_1.EventEmitter2();\n        this._onLinkTooltip = new EventEmitter2_1.EventEmitter2();\n        this._rowsToLinkify = {\n            start: null,\n            end: null\n        };\n    }\n    Object.defineProperty(Linkifier.prototype, \"onLinkHover\", {\n        get: function () { return this._onLinkHover.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkLeave\", {\n        get: function () { return this._onLinkLeave.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkTooltip\", {\n        get: function () { return this._onLinkTooltip.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Linkifier.prototype.attachToDom = function (mouseZoneManager) {\n        this._mouseZoneManager = mouseZoneManager;\n    };\n    Linkifier.prototype.linkifyRows = function (start, end) {\n        var _this = this;\n        if (!this._mouseZoneManager) {\n            return;\n        }\n        if (this._rowsToLinkify.start === null) {\n            this._rowsToLinkify.start = start;\n            this._rowsToLinkify.end = end;\n        }\n        else {\n            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n        }\n        this._mouseZoneManager.clearAll(start, end);\n        if (this._rowsTimeoutId) {\n            clearTimeout(this._rowsTimeoutId);\n        }\n        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);\n    };\n    Linkifier.prototype._linkifyRows = function () {\n        this._rowsTimeoutId = null;\n        var buffer = this._terminal.buffer;\n        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n        if (absoluteRowIndexStart >= buffer.lines.length) {\n            return;\n        }\n        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;\n        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);\n        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n        while (iterator.hasNext()) {\n            var lineData = iterator.next();\n            for (var i = 0; i < this._linkMatchers.length; i++) {\n                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n            }\n        }\n        this._rowsToLinkify.start = null;\n        this._rowsToLinkify.end = null;\n    };\n    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {\n        if (options === void 0) { options = {}; }\n        if (!handler) {\n            throw new Error('handler must be defined');\n        }\n        var matcher = {\n            id: this._nextLinkMatcherId++,\n            regex: regex,\n            handler: handler,\n            matchIndex: options.matchIndex,\n            validationCallback: options.validationCallback,\n            hoverTooltipCallback: options.tooltipCallback,\n            hoverLeaveCallback: options.leaveCallback,\n            willLinkActivate: options.willLinkActivate,\n            priority: options.priority || 0\n        };\n        this._addLinkMatcherToList(matcher);\n        return matcher.id;\n    };\n    Linkifier.prototype._addLinkMatcherToList = function (matcher) {\n        if (this._linkMatchers.length === 0) {\n            this._linkMatchers.push(matcher);\n            return;\n        }\n        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {\n            if (matcher.priority <= this._linkMatchers[i].priority) {\n                this._linkMatchers.splice(i + 1, 0, matcher);\n                return;\n            }\n        }\n        this._linkMatchers.splice(0, 0, matcher);\n    };\n    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {\n        for (var i = 0; i < this._linkMatchers.length; i++) {\n            if (this._linkMatchers[i].id === matcherId) {\n                this._linkMatchers.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {\n        var _this = this;\n        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');\n        var match;\n        var stringIndex = -1;\n        var _loop_1 = function () {\n            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n            if (!uri) {\n                if (this_1._terminal.debug) {\n                    console.log({ match: match, matcher: matcher });\n                    throw new Error('match found without corresponding matchIndex');\n                }\n                return \"break\";\n            }\n            stringIndex = text.indexOf(uri, stringIndex + 1);\n            rex.lastIndex = stringIndex + uri.length;\n            if (stringIndex < 0) {\n                return \"break\";\n            }\n            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n            if (bufferIndex[0] < 0) {\n                return \"break\";\n            }\n            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);\n            var attr = line.getFg(bufferIndex[1]);\n            var fg;\n            if (attr) {\n                fg = (attr >> 9) & 0x1ff;\n            }\n            if (matcher.validationCallback) {\n                matcher.validationCallback(uri, function (isValid) {\n                    if (_this._rowsTimeoutId) {\n                        return;\n                    }\n                    if (isValid) {\n                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);\n                    }\n                });\n            }\n            else {\n                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);\n            }\n        };\n        var this_1 = this;\n        while ((match = rex.exec(text)) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {\n        var _this = this;\n        var width = CharWidth_1.getStringCellWidth(uri);\n        var x1 = x % this._terminal.cols;\n        var y1 = y + Math.floor(x / this._terminal.cols);\n        var x2 = (x1 + width) % this._terminal.cols;\n        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);\n        if (x2 === 0) {\n            x2 = this._terminal.cols;\n            y2--;\n        }\n        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {\n            if (matcher.handler) {\n                return matcher.handler(e, uri);\n            }\n            window.open(uri, '_blank');\n        }, function () {\n            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.add('xterm-cursor-pointer');\n        }, function (e) {\n            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            if (matcher.hoverTooltipCallback) {\n                matcher.hoverTooltipCallback(e, uri);\n            }\n        }, function () {\n            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.remove('xterm-cursor-pointer');\n            if (matcher.hoverLeaveCallback) {\n                matcher.hoverLeaveCallback();\n            }\n        }, function (e) {\n            if (matcher.willLinkActivate) {\n                return matcher.willLinkActivate(e, uri);\n            }\n            return true;\n        }));\n    };\n    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {\n        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };\n    };\n    Linkifier.TIME_BEFORE_LINKIFY = 200;\n    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;\n    return Linkifier;\n}());\nexports.Linkifier = Linkifier;\n\n},{\"./CharWidth\":5,\"./MouseZoneManager\":12,\"./common/EventEmitter2\":23}],11:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper = (function () {\n    function MouseHelper(_renderCoordinator) {\n        this._renderCoordinator = _renderCoordinator;\n    }\n    MouseHelper.getCoordsRelativeToElement = function (event, element) {\n        var rect = element.getBoundingClientRect();\n        return [event.clientX - rect.left, event.clientY - rect.top];\n    };\n    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {\n        if (!charMeasure.width || !charMeasure.height) {\n            return null;\n        }\n        var coords = MouseHelper.getCoordsRelativeToElement(event, element);\n        if (!coords) {\n            return null;\n        }\n        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderCoordinator.dimensions.actualCellWidth / 2 : 0)) / this._renderCoordinator.dimensions.actualCellWidth);\n        coords[1] = Math.ceil(coords[1] / this._renderCoordinator.dimensions.actualCellHeight);\n        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n        return coords;\n    };\n    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {\n        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);\n        var x = coords[0];\n        var y = coords[1];\n        x += 32;\n        y += 32;\n        return { x: x, y: y };\n    };\n    return MouseHelper;\n}());\nexports.MouseHelper = MouseHelper;\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar HOVER_DURATION = 500;\nvar MouseZoneManager = (function (_super) {\n    __extends(MouseZoneManager, _super);\n    function MouseZoneManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._zones = [];\n        _this._areZonesActive = false;\n        _this._tooltipTimeout = null;\n        _this._currentZone = null;\n        _this._lastHoverCoords = [null, null];\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));\n        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };\n        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };\n        _this._clickListener = function (e) { return _this._onClick(e); };\n        return _this;\n    }\n    MouseZoneManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._deactivate();\n    };\n    MouseZoneManager.prototype.add = function (zone) {\n        this._zones.push(zone);\n        if (this._zones.length === 1) {\n            this._activate();\n        }\n    };\n    MouseZoneManager.prototype.clearAll = function (start, end) {\n        if (this._zones.length === 0) {\n            return;\n        }\n        if (!end) {\n            start = 0;\n            end = this._terminal.rows - 1;\n        }\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if ((zone.y1 > start && zone.y1 <= end + 1) ||\n                (zone.y2 > start && zone.y2 <= end + 1) ||\n                (zone.y1 < start && zone.y2 > end + 1)) {\n                if (this._currentZone && this._currentZone === zone) {\n                    this._currentZone.leaveCallback();\n                    this._currentZone = null;\n                }\n                this._zones.splice(i--, 1);\n            }\n        }\n        if (this._zones.length === 0) {\n            this._deactivate();\n        }\n    };\n    MouseZoneManager.prototype._activate = function () {\n        if (!this._areZonesActive) {\n            this._areZonesActive = true;\n            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.addEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.addEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._deactivate = function () {\n        if (this._areZonesActive) {\n            this._areZonesActive = false;\n            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.removeEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.removeEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._onMouseMove = function (e) {\n        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n            this._onHover(e);\n            this._lastHoverCoords = [e.pageX, e.pageY];\n        }\n    };\n    MouseZoneManager.prototype._onHover = function (e) {\n        var _this = this;\n        var zone = this._findZoneEventAt(e);\n        if (zone === this._currentZone) {\n            return;\n        }\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n        if (!zone) {\n            return;\n        }\n        this._currentZone = zone;\n        if (zone.hoverCallback) {\n            zone.hoverCallback(e);\n        }\n        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);\n    };\n    MouseZoneManager.prototype._onTooltip = function (e) {\n        this._tooltipTimeout = null;\n        var zone = this._findZoneEventAt(e);\n        if (zone && zone.tooltipCallback) {\n            zone.tooltipCallback(e);\n        }\n    };\n    MouseZoneManager.prototype._onMouseDown = function (e) {\n        this._initialSelectionLength = this._terminal.getSelection().length;\n        if (!this._areZonesActive) {\n            return;\n        }\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            if (zone.willLinkActivate(e)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        }\n    };\n    MouseZoneManager.prototype._onMouseLeave = function (e) {\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n    };\n    MouseZoneManager.prototype._onClick = function (e) {\n        var zone = this._findZoneEventAt(e);\n        var currentSelectionLength = this._terminal.getSelection().length;\n        if (zone && currentSelectionLength === this._initialSelectionLength) {\n            zone.clickCallback(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    };\n    MouseZoneManager.prototype._findZoneEventAt = function (e) {\n        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);\n        if (!coords) {\n            return null;\n        }\n        var x = coords[0];\n        var y = coords[1];\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if (zone.y1 === zone.y2) {\n                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n                    return zone;\n                }\n            }\n            else {\n                if ((y === zone.y1 && x >= zone.x1) ||\n                    (y === zone.y2 && x < zone.x2) ||\n                    (y > zone.y1 && y < zone.y2)) {\n                    return zone;\n                }\n            }\n        }\n        return null;\n    };\n    return MouseZoneManager;\n}(Lifecycle_1.Disposable));\nexports.MouseZoneManager = MouseZoneManager;\nvar MouseZone = (function () {\n    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.clickCallback = clickCallback;\n        this.hoverCallback = hoverCallback;\n        this.tooltipCallback = tooltipCallback;\n        this.leaveCallback = leaveCallback;\n        this.willLinkActivate = willLinkActivate;\n    }\n    return MouseZone;\n}());\nexports.MouseZone = MouseZone;\n\n},{\"./common/Lifecycle\":24,\"./ui/Lifecycle\":59}],13:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar Browser = require(\"./common/Platform\");\nvar SelectionModel_1 = require(\"./SelectionModel\");\nvar AltClickHandler_1 = require(\"./handlers/AltClickHandler\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar DRAG_SCROLL_MAX_THRESHOLD = 50;\nvar DRAG_SCROLL_MAX_SPEED = 15;\nvar DRAG_SCROLL_INTERVAL = 50;\nvar ALT_CLICK_MOVE_CURSOR_TIME = 500;\nvar WORD_SEPARATORS = ' ()[]{}\\'\"';\nvar NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nvar ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\nvar SelectionManager = (function () {\n    function SelectionManager(_terminal, _charMeasure) {\n        this._terminal = _terminal;\n        this._charMeasure = _charMeasure;\n        this._enabled = true;\n        this._workCell = new BufferLine_1.CellData();\n        this._onLinuxMouseSelection = new EventEmitter2_1.EventEmitter2();\n        this._onRedrawRequest = new EventEmitter2_1.EventEmitter2();\n        this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        this._initListeners();\n        this.enable();\n        this._model = new SelectionModel_1.SelectionModel(_terminal);\n        this._activeSelectionMode = 0;\n    }\n    Object.defineProperty(SelectionManager.prototype, \"onLinuxMouseSelection\", {\n        get: function () { return this._onLinuxMouseSelection.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onRedrawRequest\", {\n        get: function () { return this._onRedrawRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.dispose = function () {\n        this._removeMouseDownListeners();\n    };\n    Object.defineProperty(SelectionManager.prototype, \"_buffer\", {\n        get: function () {\n            return this._terminal.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype._initListeners = function () {\n        var _this = this;\n        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };\n        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };\n        this.initBuffersListeners();\n    };\n    SelectionManager.prototype.initBuffersListeners = function () {\n        var _this = this;\n        this._trimListener = this._terminal.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n        this._terminal.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });\n    };\n    SelectionManager.prototype.disable = function () {\n        this.clearSelection();\n        this._enabled = false;\n    };\n    SelectionManager.prototype.enable = function () {\n        this._enabled = true;\n    };\n    Object.defineProperty(SelectionManager.prototype, \"selectionStart\", {\n        get: function () { return this._model.finalSelectionStart; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionEnd\", {\n        get: function () { return this._model.finalSelectionEnd; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"hasSelection\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return false;\n            }\n            return start[0] !== end[0] || start[1] !== end[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionText\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return '';\n            }\n            var result = [];\n            if (this._activeSelectionMode === 3) {\n                if (start[0] === end[0]) {\n                    return '';\n                }\n                for (var i = start[1]; i <= end[1]; i++) {\n                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);\n                    result.push(lineText);\n                }\n            }\n            else {\n                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n                for (var i = start[1] + 1; i <= end[1] - 1; i++) {\n                    var bufferLine = this._buffer.lines.get(i);\n                    var lineText = this._buffer.translateBufferLineToString(i, true);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n                if (start[1] !== end[1]) {\n                    var bufferLine = this._buffer.lines.get(end[1]);\n                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n            }\n            var formattedResult = result.map(function (line) {\n                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n            }).join(Browser.isMSWindows ? '\\r\\n' : '\\n');\n            return formattedResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.clearSelection = function () {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.refresh = function (isLinuxMouseSelection) {\n        var _this = this;\n        if (!this._refreshAnimationFrame) {\n            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });\n        }\n        if (Browser.isLinux && isLinuxMouseSelection) {\n            var selectionText = this.selectionText;\n            if (selectionText.length) {\n                this._onLinuxMouseSelection.fire(this.selectionText);\n            }\n        }\n    };\n    SelectionManager.prototype._refresh = function () {\n        this._refreshAnimationFrame = null;\n        this._onRedrawRequest.fire({\n            start: this._model.finalSelectionStart,\n            end: this._model.finalSelectionEnd,\n            columnSelectMode: this._activeSelectionMode === 3\n        });\n    };\n    SelectionManager.prototype.isClickInSelection = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        var start = this._model.finalSelectionStart;\n        var end = this._model.finalSelectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return this._areCoordsInSelection(coords, start, end);\n    };\n    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {\n        return (coords[1] > start[1] && coords[1] < end[1]) ||\n            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n    };\n    SelectionManager.prototype.selectWordAtCursor = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._selectWordAt(coords, false);\n            this._model.selectionEnd = null;\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype.selectAll = function () {\n        this._model.isSelectAllActive = true;\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.selectLines = function (start, end) {\n        this._model.clearSelection();\n        start = Math.max(start, 0);\n        end = Math.min(end, this._terminal.buffer.lines.length - 1);\n        this._model.selectionStart = [0, start];\n        this._model.selectionEnd = [this._terminal.cols, end];\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype._onTrim = function (amount) {\n        var needsRefresh = this._model.onTrim(amount);\n        if (needsRefresh) {\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._getMouseBufferCoords = function (event) {\n        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);\n        if (!coords) {\n            return null;\n        }\n        coords[0]--;\n        coords[1]--;\n        coords[1] += this._terminal.buffer.ydisp;\n        return coords;\n    };\n    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {\n        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];\n        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);\n        if (offset >= 0 && offset <= terminalHeight) {\n            return 0;\n        }\n        if (offset > terminalHeight) {\n            offset -= terminalHeight;\n        }\n        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n        offset /= DRAG_SCROLL_MAX_THRESHOLD;\n        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n    };\n    SelectionManager.prototype.shouldForceSelection = function (event) {\n        if (Browser.isMac) {\n            return event.altKey && this._terminal.options.macOptionClickForcesSelection;\n        }\n        return event.shiftKey;\n    };\n    SelectionManager.prototype.onMouseDown = function (event) {\n        this._mouseDownTimeStamp = event.timeStamp;\n        if (event.button === 2 && this.hasSelection) {\n            return;\n        }\n        if (event.button !== 0) {\n            return;\n        }\n        if (!this._enabled) {\n            if (!this.shouldForceSelection(event)) {\n                return;\n            }\n            event.stopPropagation();\n        }\n        event.preventDefault();\n        this._dragScrollAmount = 0;\n        if (this._enabled && event.shiftKey) {\n            this._onIncrementalClick(event);\n        }\n        else {\n            if (event.detail === 1) {\n                this._onSingleClick(event);\n            }\n            else if (event.detail === 2) {\n                this._onDoubleClick(event);\n            }\n            else if (event.detail === 3) {\n                this._onTripleClick(event);\n            }\n        }\n        this._addMouseDownListeners();\n        this.refresh(true);\n    };\n    SelectionManager.prototype._addMouseDownListeners = function () {\n        var _this = this;\n        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);\n    };\n    SelectionManager.prototype._removeMouseDownListeners = function () {\n        if (this._terminal.element.ownerDocument) {\n            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n        }\n        clearInterval(this._dragScrollIntervalTimer);\n        this._dragScrollIntervalTimer = null;\n    };\n    SelectionManager.prototype._onIncrementalClick = function (event) {\n        if (this._model.selectionStart) {\n            this._model.selectionEnd = this._getMouseBufferCoords(event);\n        }\n    };\n    SelectionManager.prototype._onSingleClick = function (event) {\n        this._model.selectionStartLength = 0;\n        this._model.isSelectAllActive = false;\n        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;\n        this._model.selectionStart = this._getMouseBufferCoords(event);\n        if (!this._model.selectionStart) {\n            return;\n        }\n        this._model.selectionEnd = null;\n        var line = this._buffer.lines.get(this._model.selectionStart[1]);\n        if (!line) {\n            return;\n        }\n        if (line.length >= this._model.selectionStart[0]) {\n            return;\n        }\n        if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n            this._model.selectionStart[0]++;\n        }\n    };\n    SelectionManager.prototype._onDoubleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 1;\n            this._selectWordAt(coords, true);\n        }\n    };\n    SelectionManager.prototype._onTripleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 2;\n            this._selectLineAt(coords[1]);\n        }\n    };\n    SelectionManager.prototype.shouldColumnSelect = function (event) {\n        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);\n    };\n    SelectionManager.prototype._onMouseMove = function (event) {\n        event.stopImmediatePropagation();\n        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n        this._model.selectionEnd = this._getMouseBufferCoords(event);\n        if (!this._model.selectionEnd) {\n            this.refresh(true);\n            return;\n        }\n        if (this._activeSelectionMode === 2) {\n            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n                this._model.selectionEnd[0] = 0;\n            }\n            else {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n        }\n        else if (this._activeSelectionMode === 1) {\n            this._selectToWordAt(this._model.selectionEnd);\n        }\n        this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n        if (this._activeSelectionMode !== 3) {\n            if (this._dragScrollAmount > 0) {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n            else if (this._dragScrollAmount < 0) {\n                this._model.selectionEnd[0] = 0;\n            }\n        }\n        if (this._model.selectionEnd[1] < this._buffer.lines.length) {\n            if (this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0]) === 0) {\n                this._model.selectionEnd[0]++;\n            }\n        }\n        if (!previousSelectionEnd ||\n            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype._dragScroll = function () {\n        if (this._dragScrollAmount) {\n            this._terminal.scrollLines(this._dragScrollAmount, false);\n            if (this._dragScrollAmount > 0) {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = this._terminal.cols;\n                }\n                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);\n            }\n            else {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = 0;\n                }\n                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;\n            }\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._onMouseUp = function (event) {\n        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n        this._removeMouseDownListeners();\n        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {\n            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();\n        }\n        else if (this.hasSelection) {\n            this._onSelectionChange.fire();\n        }\n    };\n    SelectionManager.prototype._onBufferActivate = function (e) {\n        var _this = this;\n        this.clearSelection();\n        if (this._trimListener) {\n            this._trimListener.dispose();\n        }\n        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n    };\n    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {\n        var charIndex = coords[0];\n        for (var i = 0; coords[0] >= i; i++) {\n            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;\n            if (this._workCell.getWidth() === 0) {\n                charIndex--;\n            }\n            else if (length_1 > 1 && coords[0] !== i) {\n                charIndex += length_1 - 1;\n            }\n        }\n        return charIndex;\n    };\n    SelectionManager.prototype.setSelection = function (col, row, length) {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this._model.selectionStart = [col, row];\n        this._model.selectionStartLength = length;\n        this.refresh();\n    };\n    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {\n        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }\n        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }\n        if (coords[0] >= this._terminal.cols) {\n            return null;\n        }\n        var bufferLine = this._buffer.lines.get(coords[1]);\n        if (!bufferLine) {\n            return null;\n        }\n        var line = this._buffer.translateBufferLineToString(coords[1], false);\n        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n        var endIndex = startIndex;\n        var charOffset = coords[0] - startIndex;\n        var leftWideCharCount = 0;\n        var rightWideCharCount = 0;\n        var leftLongCharOffset = 0;\n        var rightLongCharOffset = 0;\n        if (line.charAt(startIndex) === ' ') {\n            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n                startIndex--;\n            }\n            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n                endIndex++;\n            }\n        }\n        else {\n            var startCol = coords[0];\n            var endCol = coords[0];\n            if (bufferLine.getWidth(startCol) === 0) {\n                leftWideCharCount++;\n                startCol--;\n            }\n            if (bufferLine.getWidth(endCol) === 2) {\n                rightWideCharCount++;\n                endCol++;\n            }\n            var length_2 = bufferLine.getString(endCol).length;\n            if (length_2 > 1) {\n                rightLongCharOffset += length_2 - 1;\n                endIndex += length_2 - 1;\n            }\n            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n                bufferLine.loadCell(startCol - 1, this._workCell);\n                var length_3 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 0) {\n                    leftWideCharCount++;\n                    startCol--;\n                }\n                else if (length_3 > 1) {\n                    leftLongCharOffset += length_3 - 1;\n                    startIndex -= length_3 - 1;\n                }\n                startIndex--;\n                startCol--;\n            }\n            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n                bufferLine.loadCell(endCol + 1, this._workCell);\n                var length_4 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 2) {\n                    rightWideCharCount++;\n                    endCol++;\n                }\n                else if (length_4 > 1) {\n                    rightLongCharOffset += length_4 - 1;\n                    endIndex += length_4 - 1;\n                }\n                endIndex++;\n                endCol++;\n            }\n        }\n        endIndex++;\n        var start = startIndex\n            + charOffset\n            - leftWideCharCount\n            + leftLongCharOffset;\n        var length = Math.min(this._terminal.cols, endIndex\n            - startIndex\n            + leftWideCharCount\n            + rightWideCharCount\n            - leftLongCharOffset\n            - rightLongCharOffset);\n        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n            return null;\n        }\n        if (followWrappedLinesAbove) {\n            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {\n                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);\n                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);\n                    if (previousLineWordPosition) {\n                        var offset = this._terminal.cols - previousLineWordPosition.start;\n                        start -= offset;\n                        length += offset;\n                    }\n                }\n            }\n        }\n        if (followWrappedLinesBelow) {\n            if (start + length === this._terminal.cols && bufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);\n                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {\n                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n                    if (nextLineWordPosition) {\n                        length += nextLineWordPosition.length;\n                    }\n                }\n            }\n        }\n        return { start: start, length: length };\n    };\n    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {\n        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n        if (wordPosition) {\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                coords[1]--;\n            }\n            this._model.selectionStart = [wordPosition.start, coords[1]];\n            this._model.selectionStartLength = wordPosition.length;\n        }\n    };\n    SelectionManager.prototype._selectToWordAt = function (coords) {\n        var wordPosition = this._getWordAt(coords, true);\n        if (wordPosition) {\n            var endRow = coords[1];\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                endRow--;\n            }\n            if (!this._model.areSelectionValuesReversed()) {\n                while (wordPosition.start + wordPosition.length > this._terminal.cols) {\n                    wordPosition.length -= this._terminal.cols;\n                    endRow++;\n                }\n            }\n            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n        }\n    };\n    SelectionManager.prototype._isCharWordSeparator = function (cell) {\n        if (cell.getWidth() === 0) {\n            return false;\n        }\n        return WORD_SEPARATORS.indexOf(cell.getChars()) >= 0;\n    };\n    SelectionManager.prototype._selectLineAt = function (line) {\n        var wrappedRange = this._buffer.getWrappedRangeForLine(line);\n        this._model.selectionStart = [0, wrappedRange.first];\n        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];\n        this._model.selectionStartLength = 0;\n    };\n    return SelectionManager;\n}());\nexports.SelectionManager = SelectionManager;\n\n},{\"./MouseHelper\":11,\"./SelectionModel\":14,\"./common/EventEmitter2\":23,\"./common/Platform\":25,\"./core/buffer/BufferLine\":29,\"./handlers/AltClickHandler\":35}],14:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectionModel = (function () {\n    function SelectionModel(_terminal) {\n        this._terminal = _terminal;\n        this.clearSelection();\n    }\n    SelectionModel.prototype.clearSelection = function () {\n        this.selectionStart = null;\n        this.selectionEnd = null;\n        this.isSelectAllActive = false;\n        this.selectionStartLength = 0;\n    };\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionStart\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [0, 0];\n            }\n            if (!this.selectionEnd || !this.selectionStart) {\n                return this.selectionStart;\n            }\n            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionEnd\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];\n            }\n            if (!this.selectionStart) {\n                return null;\n            }\n            if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n                if (startPlusLength > this._terminal.cols) {\n                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];\n                }\n                return [startPlusLength, this.selectionStart[1]];\n            }\n            if (this.selectionStartLength) {\n                if (this.selectionEnd[1] === this.selectionStart[1]) {\n                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n                }\n            }\n            return this.selectionEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionModel.prototype.areSelectionValuesReversed = function () {\n        var start = this.selectionStart;\n        var end = this.selectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n    };\n    SelectionModel.prototype.onTrim = function (amount) {\n        if (this.selectionStart) {\n            this.selectionStart[1] -= amount;\n        }\n        if (this.selectionEnd) {\n            this.selectionEnd[1] -= amount;\n        }\n        if (this.selectionEnd && this.selectionEnd[1] < 0) {\n            this.clearSelection();\n            return true;\n        }\n        if (this.selectionStart && this.selectionStart[1] < 0) {\n            this.selectionStart[1] = 0;\n        }\n        return false;\n    };\n    return SelectionModel;\n}());\nexports.SelectionModel = SelectionModel;\n\n},{}],15:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';\nvar SoundManager = (function () {\n    function SoundManager(_terminal) {\n        this._terminal = _terminal;\n    }\n    Object.defineProperty(SoundManager, \"audioContext\", {\n        get: function () {\n            if (!SoundManager._audioContext) {\n                var audioContextCtor = window.AudioContext || window.webkitAudioContext;\n                if (!audioContextCtor) {\n                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n                    return null;\n                }\n                SoundManager._audioContext = new audioContextCtor();\n            }\n            return SoundManager._audioContext;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SoundManager.prototype.playBellSound = function () {\n        var ctx = SoundManager.audioContext;\n        if (!ctx) {\n            return;\n        }\n        var bellAudioSource = ctx.createBufferSource();\n        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {\n            bellAudioSource.buffer = buffer;\n            bellAudioSource.connect(ctx.destination);\n            bellAudioSource.start(0);\n        });\n    };\n    SoundManager.prototype._base64ToArrayBuffer = function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    };\n    SoundManager.prototype._removeMimeType = function (dataURI) {\n        var splitUri = dataURI.split(',');\n        return splitUri[1];\n    };\n    return SoundManager;\n}());\nexports.SoundManager = SoundManager;\n\n},{}],16:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blankLine = 'Blank line';\nexports.promptLabel = 'Terminal input';\nexports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n\n},{}],17:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferSet_1 = require(\"./BufferSet\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CompositionHelper_1 = require(\"./CompositionHelper\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar Viewport_1 = require(\"./Viewport\");\nvar Clipboard_1 = require(\"./Clipboard\");\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar InputHandler_1 = require(\"./InputHandler\");\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar Linkifier_1 = require(\"./Linkifier\");\nvar SelectionManager_1 = require(\"./SelectionManager\");\nvar CharMeasure_1 = require(\"./CharMeasure\");\nvar Browser = require(\"./common/Platform\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Strings = require(\"./Strings\");\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar SoundManager_1 = require(\"./SoundManager\");\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar AccessibilityManager_1 = require(\"./AccessibilityManager\");\nvar CharAtlasCache_1 = require(\"./renderer/atlas/CharAtlasCache\");\nvar DomRenderer_1 = require(\"./renderer/dom/DomRenderer\");\nvar Keyboard_1 = require(\"./core/input/Keyboard\");\nvar Clone_1 = require(\"./common/Clone\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar WindowsMode_1 = require(\"./WindowsMode\");\nvar ColorManager_1 = require(\"./ui/ColorManager\");\nvar RenderCoordinator_1 = require(\"./renderer/RenderCoordinator\");\nvar document = (typeof window !== 'undefined') ? window.document : null;\nvar WRITE_BUFFER_PAUSE_THRESHOLD = 5;\nvar WRITE_TIMEOUT_MS = 12;\nvar WRITE_BUFFER_LENGTH_THRESHOLD = 50;\nvar MINIMUM_COLS = 2;\nvar MINIMUM_ROWS = 1;\nvar CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\nvar DEFAULT_OPTIONS = {\n    cols: 80,\n    rows: 24,\n    convertEol: false,\n    termName: 'xterm',\n    cursorBlink: false,\n    cursorStyle: 'block',\n    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,\n    bellStyle: 'none',\n    drawBoldTextInBrightColors: true,\n    enableBold: true,\n    experimentalCharAtlas: 'static',\n    fontFamily: 'courier-new, courier, monospace',\n    fontSize: 15,\n    fontWeight: 'normal',\n    fontWeightBold: 'bold',\n    lineHeight: 1.0,\n    letterSpacing: 0,\n    scrollback: 1000,\n    screenKeys: false,\n    screenReaderMode: false,\n    debug: false,\n    macOptionIsMeta: false,\n    macOptionClickForcesSelection: false,\n    cancelEvents: false,\n    disableStdin: false,\n    useFlowControl: false,\n    allowTransparency: false,\n    tabStopWidth: 8,\n    theme: undefined,\n    rightClickSelectsWord: Browser.isMac,\n    rendererType: 'canvas',\n    windowsMode: false\n};\nvar Terminal = (function (_super) {\n    __extends(Terminal, _super);\n    function Terminal(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.browser = Browser;\n        _this._blankLine = null;\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onKey = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onResize = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        _this._onTitleChange = new EventEmitter2_1.EventEmitter2();\n        _this.options = Clone_1.clone(options);\n        _this._setup();\n        _this.onCursorMove(function () { return _this.emit('cursormove'); });\n        _this.onData(function (e) { return _this.emit('data', e); });\n        _this.onKey(function (e) { return _this.emit('key', e.key, e.domEvent); });\n        _this.onLineFeed(function () { return _this.emit('linefeed'); });\n        _this.onRender(function (e) { return _this.emit('refresh', e); });\n        _this.onResize(function (e) { return _this.emit('resize', e); });\n        _this.onSelectionChange(function () { return _this.emit('selection'); });\n        _this.onScroll(function (e) { return _this.emit('scroll', e); });\n        _this.onTitleChange(function (e) { return _this.emit('title', e); });\n        return _this;\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._onKey.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._onResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._onTitleChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this._windowsMode) {\n            this._windowsMode.dispose();\n            this._windowsMode = undefined;\n        }\n        this._customKeyEventHandler = null;\n        CharAtlasCache_1.removeTerminalFromCache(this);\n        this.handler = function () { };\n        this.write = function () { };\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n    Terminal.prototype.destroy = function () {\n        this.dispose();\n    };\n    Terminal.prototype._setup = function () {\n        var _this = this;\n        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {\n            if (_this.options[key] === null || _this.options[key] === undefined) {\n                _this.options[key] = DEFAULT_OPTIONS[key];\n            }\n        });\n        this._parent = document ? document.body : null;\n        this.cols = Math.max(this.options.cols, MINIMUM_COLS);\n        this.rows = Math.max(this.options.rows, MINIMUM_ROWS);\n        if (this.options.handler) {\n            this.onData(this.options.handler);\n        }\n        this.cursorState = 0;\n        this.cursorHidden = false;\n        this._customKeyEventHandler = null;\n        this.applicationKeypad = false;\n        this.applicationCursor = false;\n        this.originMode = false;\n        this.insertMode = false;\n        this.wraparoundMode = true;\n        this.bracketedPasteMode = false;\n        this.charset = null;\n        this.gcharset = null;\n        this.glevel = 0;\n        this.charsets = [null];\n        this.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this._eraseAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.params = [];\n        this.currentParam = 0;\n        this.writeBuffer = [];\n        this.writeBufferUtf8 = [];\n        this._writeInProgress = false;\n        this._xoffSentToCatchUp = false;\n        this._userScrolling = false;\n        this._inputHandler = new InputHandler_1.InputHandler(this);\n        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });\n        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });\n        this._inputHandler.onData(function (e) { return _this._onData.fire(e); });\n        this.register(this._inputHandler);\n        this.selectionManager = this.selectionManager || null;\n        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);\n        this._mouseZoneManager = this._mouseZoneManager || null;\n        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);\n        this.buffers = new BufferSet_1.BufferSet(this);\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n            this.selectionManager.initBuffersListeners();\n        }\n        if (this.options.windowsMode) {\n            this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () {\n            return this.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.eraseAttrData = function () {\n        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);\n        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;\n        return this._eraseAttrData;\n    };\n    Terminal.prototype.focus = function () {\n        if (this.textarea) {\n            this.textarea.focus({ preventScroll: true });\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"isFocused\", {\n        get: function () {\n            return document.activeElement === this.textarea && document.hasFocus();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.getOption = function (key) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        return this.options[key];\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {\n            console.error(\"Option \\\"\" + key + \"\\\" can only be set in the constructor\");\n        }\n        if (this.options[key] === value) {\n            return;\n        }\n        switch (key) {\n            case 'bellStyle':\n                if (!value) {\n                    value = 'none';\n                }\n                break;\n            case 'cursorStyle':\n                if (!value) {\n                    value = 'block';\n                }\n                break;\n            case 'fontWeight':\n                if (!value) {\n                    value = 'normal';\n                }\n                break;\n            case 'fontWeightBold':\n                if (!value) {\n                    value = 'bold';\n                }\n                break;\n            case 'lineHeight':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n            case 'rendererType':\n                if (!value) {\n                    value = 'canvas';\n                }\n                break;\n            case 'tabStopWidth':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n                break;\n            case 'theme':\n                this._setTheme(value);\n                break;\n            case 'scrollback':\n                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);\n                if (value < 0) {\n                    console.warn(key + \" cannot be less than 0, value: \" + value);\n                    return;\n                }\n                if (this.options[key] !== value) {\n                    var newBufferLength = this.rows + value;\n                    if (this.buffer.lines.length > newBufferLength) {\n                        var amountToTrim = this.buffer.lines.length - newBufferLength;\n                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);\n                        this.buffer.lines.trimStart(amountToTrim);\n                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);\n                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);\n                        if (needsRefresh) {\n                            this.refresh(0, this.rows - 1);\n                        }\n                    }\n                }\n                break;\n        }\n        this.options[key] = value;\n        switch (key) {\n            case 'fontFamily':\n            case 'fontSize':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this.charMeasure.measure(this.options);\n                }\n                break;\n            case 'drawBoldTextInBrightColors':\n            case 'experimentalCharAtlas':\n            case 'enableBold':\n            case 'letterSpacing':\n            case 'lineHeight':\n            case 'fontWeight':\n            case 'fontWeightBold':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this._renderCoordinator.onResize(this.cols, this.rows);\n                    this.refresh(0, this.rows - 1);\n                }\n                break;\n            case 'rendererType':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.setRenderer(this._createRenderer());\n                }\n                break;\n            case 'scrollback':\n                this.buffers.resize(this.cols, this.rows);\n                if (this.viewport) {\n                    this.viewport.syncScrollArea();\n                }\n                break;\n            case 'screenReaderMode':\n                if (value) {\n                    if (!this._accessibilityManager && this._renderCoordinator) {\n                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n                    }\n                }\n                else {\n                    if (this._accessibilityManager) {\n                        this._accessibilityManager.dispose();\n                        this._accessibilityManager = null;\n                    }\n                }\n                break;\n            case 'tabStopWidth':\n                this.buffers.setupTabStops();\n                break;\n            case 'windowsMode':\n                if (value) {\n                    if (!this._windowsMode) {\n                        this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n                    }\n                }\n                else {\n                    if (this._windowsMode) {\n                        this._windowsMode.dispose();\n                        this._windowsMode = undefined;\n                    }\n                }\n                break;\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.onOptionsChanged();\n        }\n    };\n    Terminal.prototype._onTextAreaFocus = function (ev) {\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[I');\n        }\n        this.updateCursorStyle(ev);\n        this.element.classList.add('focus');\n        this.showCursor();\n        this.emit('focus');\n    };\n    Terminal.prototype.blur = function () {\n        return this.textarea.blur();\n    };\n    Terminal.prototype._onTextAreaBlur = function () {\n        this.textarea.value = '';\n        this.refresh(this.buffer.y, this.buffer.y);\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[O');\n        }\n        this.element.classList.remove('focus');\n        this.emit('blur');\n    };\n    Terminal.prototype._initGlobal = function () {\n        var _this = this;\n        this._bindKeys();\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {\n            if (!_this.hasSelection()) {\n                return;\n            }\n            Clipboard_1.copyHandler(event, _this, _this.selectionManager);\n        }));\n        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));\n        if (Browser.isFirefox) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {\n                if (event.button === 2) {\n                    Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n                }\n            }));\n        }\n        else {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {\n                Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n            }));\n        }\n        if (Browser.isLinux) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {\n                if (event.button === 1) {\n                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this);\n                }\n            }));\n        }\n    };\n    Terminal.prototype._bindKeys = function () {\n        var _this = this;\n        var self = this;\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyDown(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyPress(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {\n            if (!wasModifierKeyOnlyEvent(ev)) {\n                _this.focus();\n            }\n            self._keyUp(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));\n        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));\n        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));\n    };\n    Terminal.prototype.open = function (parent) {\n        var _this = this;\n        this._parent = parent || this._parent;\n        if (!this._parent) {\n            throw new Error('Terminal requires a parent element.');\n        }\n        this._context = this._parent.ownerDocument.defaultView;\n        this._document = this._parent.ownerDocument;\n        this.element = this._document.createElement('div');\n        this.element.dir = 'ltr';\n        this.element.classList.add('terminal');\n        this.element.classList.add('xterm');\n        this.element.setAttribute('tabindex', '0');\n        this._parent.appendChild(this.element);\n        var fragment = document.createDocumentFragment();\n        this._viewportElement = document.createElement('div');\n        this._viewportElement.classList.add('xterm-viewport');\n        fragment.appendChild(this._viewportElement);\n        this._viewportScrollArea = document.createElement('div');\n        this._viewportScrollArea.classList.add('xterm-scroll-area');\n        this._viewportElement.appendChild(this._viewportScrollArea);\n        this.screenElement = document.createElement('div');\n        this.screenElement.classList.add('xterm-screen');\n        this._helperContainer = document.createElement('div');\n        this._helperContainer.classList.add('xterm-helpers');\n        this.screenElement.appendChild(this._helperContainer);\n        fragment.appendChild(this.screenElement);\n        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);\n        this.register(this._mouseZoneManager);\n        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));\n        this.linkifier.attachToDom(this._mouseZoneManager);\n        this.textarea = document.createElement('textarea');\n        this.textarea.classList.add('xterm-helper-textarea');\n        this.textarea.setAttribute('aria-label', Strings.promptLabel);\n        this.textarea.setAttribute('aria-multiline', 'false');\n        this.textarea.setAttribute('autocorrect', 'off');\n        this.textarea.setAttribute('autocapitalize', 'off');\n        this.textarea.setAttribute('spellcheck', 'false');\n        this.textarea.tabIndex = 0;\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));\n        this._helperContainer.appendChild(this.textarea);\n        this._compositionView = document.createElement('div');\n        this._compositionView.classList.add('composition-view');\n        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);\n        this._helperContainer.appendChild(this._compositionView);\n        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);\n        this.element.appendChild(fragment);\n        this._theme = this.options.theme;\n        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);\n        this._colorManager.setTheme(this._theme);\n        var renderer = this._createRenderer();\n        this._renderCoordinator = new RenderCoordinator_1.RenderCoordinator(renderer, this.rows, this.screenElement);\n        this._renderCoordinator.onRender(function (e) { return _this._onRender.fire(e); });\n        this.onResize(function (e) { return _this._renderCoordinator.resize(e.cols, e.rows); });\n        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure, this._renderCoordinator.dimensions);\n        this.viewport.onThemeChange(this._colorManager.colors);\n        this.register(this.viewport);\n        this.register(this.onCursorMove(function () { return _this._renderCoordinator.onCursorMove(); }));\n        this.register(this.onResize(function () { return _this._renderCoordinator.onResize(_this.cols, _this.rows); }));\n        this.register(this.addDisposableListener('blur', function () { return _this._renderCoordinator.onBlur(); }));\n        this.register(this.addDisposableListener('focus', function () { return _this._renderCoordinator.onFocus(); }));\n        this.register(this.charMeasure.onCharSizeChanged(function () { return _this._renderCoordinator.onCharSizeChanged(); }));\n        this.register(this._renderCoordinator.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));\n        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);\n        this.register(this.selectionManager.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));\n        this.register(this.selectionManager.onRedrawRequest(function (e) { return _this._renderCoordinator.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));\n        this.register(this.selectionManager.onLinuxMouseSelection(function (text) {\n            _this.textarea.value = text;\n            _this.textarea.focus();\n            _this.textarea.select();\n        }));\n        this.register(this.onScroll(function () {\n            _this.viewport.syncScrollArea();\n            _this.selectionManager.refresh();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));\n        this.mouseHelper = new MouseHelper_1.MouseHelper(this._renderCoordinator);\n        this.element.classList.toggle('enable-mouse-events', this.mouseEvents);\n        if (this.mouseEvents) {\n            this.selectionManager.disable();\n        }\n        else {\n            this.selectionManager.enable();\n        }\n        if (this.options.screenReaderMode) {\n            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n            this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function (e) { return _this._accessibilityManager.setDimensions(e); }));\n        }\n        this.charMeasure.measure(this.options);\n        this.refresh(0, this.rows - 1);\n        this._initGlobal();\n        this.bindMouse();\n    };\n    Terminal.prototype._createRenderer = function () {\n        switch (this.options.rendererType) {\n            case 'canvas':\n                return new Renderer_1.Renderer(this, this._colorManager.colors);\n                break;\n            case 'dom':\n                return new DomRenderer_1.DomRenderer(this, this._colorManager.colors);\n                break;\n            default: throw new Error(\"Unrecognized rendererType \\\"\" + this.options.rendererType + \"\\\"\");\n        }\n    };\n    Terminal.prototype._setTheme = function (theme) {\n        this._theme = theme;\n        if (this._colorManager) {\n            this._colorManager.setTheme(theme);\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.setColors(this._colorManager.colors);\n        }\n        if (this.viewport) {\n            this.viewport.onThemeChange(this._colorManager.colors);\n        }\n    };\n    Terminal.prototype.bindMouse = function () {\n        var _this = this;\n        var el = this.element;\n        var self = this;\n        var pressed = 32;\n        function sendButton(ev) {\n            var button;\n            var pos;\n            button = getButton(ev);\n            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            sendEvent(button, pos);\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    pressed = button;\n                    break;\n                case 'mouseup':\n                    pressed = 32;\n                    break;\n                case 'wheel':\n                    break;\n            }\n        }\n        function sendMove(ev) {\n            var button = pressed;\n            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            button += 32;\n            sendEvent(button, pos);\n        }\n        function encode(data, ch) {\n            if (!self.utfMouse) {\n                if (ch === 255) {\n                    data.push(0);\n                    return;\n                }\n                if (ch > 127)\n                    ch = 127;\n                data.push(ch);\n            }\n            else {\n                if (ch > 2047) {\n                    data.push(2047);\n                    return;\n                }\n                data.push(ch);\n            }\n        }\n        function sendEvent(button, pos) {\n            if (self._vt300Mouse) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                var data_1 = EscapeSequences_1.C0.ESC + '[24';\n                if (button === 0)\n                    data_1 += '1';\n                else if (button === 1)\n                    data_1 += '3';\n                else if (button === 2)\n                    data_1 += '5';\n                else if (button === 3)\n                    return;\n                else\n                    data_1 += '0';\n                data_1 += '~[' + pos.x + ',' + pos.y + ']\\r';\n                self.handler(data_1);\n                return;\n            }\n            if (self._decLocator) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                if (button === 0)\n                    button = 2;\n                else if (button === 1)\n                    button = 4;\n                else if (button === 2)\n                    button = 6;\n                else if (button === 3)\n                    button = 3;\n                self.handler(EscapeSequences_1.C0.ESC + '['\n                    + button\n                    + ';'\n                    + (button === 3 ? 4 : 0)\n                    + ';'\n                    + pos.y\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.page || 0\n                    + '&w');\n                return;\n            }\n            if (self.urxvtMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                pos.x++;\n                pos.y++;\n                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');\n                return;\n            }\n            if (self.sgrMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                self.handler(EscapeSequences_1.C0.ESC + '[<'\n                    + (((button & 3) === 3 ? button & ~3 : button) - 32)\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.y\n                    + ((button & 3) === 3 ? 'm' : 'M'));\n                return;\n            }\n            var data = [];\n            encode(data, button);\n            encode(data, pos.x);\n            encode(data, pos.y);\n            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));\n        }\n        function getButton(ev) {\n            var button;\n            var shift;\n            var meta;\n            var ctrl;\n            var mod;\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    button = ev.button !== null && ev.button !== undefined\n                        ? +ev.button\n                        : ev.which !== null && ev.which !== undefined\n                            ? ev.which - 1\n                            : null;\n                    if (Browser.isMSIE) {\n                        button = button === 1 ? 0 : button === 4 ? 1 : button;\n                    }\n                    break;\n                case 'mouseup':\n                    button = 3;\n                    break;\n                case 'DOMMouseScroll':\n                    button = ev.detail < 0\n                        ? 64\n                        : 65;\n                    break;\n                case 'wheel':\n                    button = ev.deltaY < 0\n                        ? 64\n                        : 65;\n                    break;\n            }\n            shift = ev.shiftKey ? 4 : 0;\n            meta = ev.metaKey ? 8 : 0;\n            ctrl = ev.ctrlKey ? 16 : 0;\n            mod = shift | meta | ctrl;\n            if (self.vt200Mouse) {\n                mod &= ctrl;\n            }\n            else if (!self.normalMouse) {\n                mod = 0;\n            }\n            button = (32 + (mod << 2)) + button;\n            return button;\n        }\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {\n            ev.preventDefault();\n            _this.focus();\n            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {\n                return;\n            }\n            sendButton(ev);\n            if (_this.vt200Mouse) {\n                ev.overrideType = 'mouseup';\n                sendButton(ev);\n                return _this.cancel(ev);\n            }\n            var moveHandler;\n            if (_this.normalMouse) {\n                moveHandler = function (event) {\n                    if (!_this.normalMouse) {\n                        return;\n                    }\n                    sendMove(event);\n                };\n                _this._document.addEventListener('mousemove', moveHandler);\n            }\n            var handler = function (ev) {\n                if (_this.normalMouse && !_this.x10Mouse) {\n                    sendButton(ev);\n                }\n                if (moveHandler) {\n                    _this._document.removeEventListener('mousemove', moveHandler);\n                    moveHandler = null;\n                }\n                _this._document.removeEventListener('mouseup', handler);\n                return _this.cancel(ev);\n            };\n            _this._document.addEventListener('mouseup', handler);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (!_this.mouseEvents) {\n                if (!_this.buffer.hasScrollback) {\n                    var amount = _this.viewport.getLinesScrolled(ev);\n                    if (amount === 0) {\n                        return;\n                    }\n                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n                    var data = '';\n                    for (var i = 0; i < Math.abs(amount); i++) {\n                        data += sequence;\n                    }\n                    _this.handler(data);\n                }\n                return;\n            }\n            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)\n                return;\n            sendButton(ev);\n            ev.preventDefault();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onWheel(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchStart(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchMove(ev);\n            return _this.cancel(ev);\n        }));\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        if (this._renderCoordinator) {\n            this._renderCoordinator.refreshRows(start, end);\n        }\n    };\n    Terminal.prototype._queueLinkification = function (start, end) {\n        if (this.linkifier) {\n            this.linkifier.linkifyRows(start, end);\n        }\n    };\n    Terminal.prototype.updateCursorStyle = function (ev) {\n        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {\n            this.element.classList.add('column-select');\n        }\n        else {\n            this.element.classList.remove('column-select');\n        }\n    };\n    Terminal.prototype.showCursor = function () {\n        if (!this.cursorState) {\n            this.cursorState = 1;\n            this.refresh(this.buffer.y, this.buffer.y);\n        }\n    };\n    Terminal.prototype.scroll = function (isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        var newLine;\n        newLine = this._blankLine;\n        var eraseAttr = this.eraseAttrData();\n        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);\n            this._blankLine = newLine;\n        }\n        newLine.isWrapped = isWrapped;\n        var topRow = this.buffer.ybase + this.buffer.scrollTop;\n        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;\n        if (this.buffer.scrollTop === 0) {\n            var willBufferBeTrimmed = this.buffer.lines.isFull;\n            if (bottomRow === this.buffer.lines.length - 1) {\n                if (willBufferBeTrimmed) {\n                    this.buffer.lines.recycle().copyFrom(newLine);\n                }\n                else {\n                    this.buffer.lines.push(newLine.clone());\n                }\n            }\n            else {\n                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n            }\n            if (!willBufferBeTrimmed) {\n                this.buffer.ybase++;\n                if (!this._userScrolling) {\n                    this.buffer.ydisp++;\n                }\n            }\n            else {\n                if (this._userScrolling) {\n                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);\n                }\n            }\n        }\n        else {\n            var scrollRegionHeight = bottomRow - topRow + 1;\n            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n            this.buffer.lines.set(bottomRow, newLine.clone());\n        }\n        if (!this._userScrolling) {\n            this.buffer.ydisp = this.buffer.ybase;\n        }\n        this.updateRange(this.buffer.scrollTop);\n        this.updateRange(this.buffer.scrollBottom);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {\n        if (disp < 0) {\n            if (this.buffer.ydisp === 0) {\n                return;\n            }\n            this._userScrolling = true;\n        }\n        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {\n            this._userScrolling = false;\n        }\n        var oldYdisp = this.buffer.ydisp;\n        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);\n        if (oldYdisp === this.buffer.ydisp) {\n            return;\n        }\n        if (!suppressScrollEvent) {\n            this._onScroll.fire(this.buffer.ydisp);\n        }\n        this.refresh(0, this.rows - 1);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this.scrollLines(pageCount * (this.rows - 1));\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this.scrollLines(-this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        var scrollAmount = line - this.buffer.ydisp;\n        if (scrollAmount !== 0) {\n            this.scrollLines(scrollAmount);\n        }\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBufferUtf8.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBufferUtf8.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBufferUtf8.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWriteUtf8();\n            });\n        }\n    };\n    Terminal.prototype._innerWriteUtf8 = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBufferUtf8 = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBufferUtf8.length > bufferOffset) {\n            var data = this.writeBufferUtf8[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBufferUtf8.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parseUtf8(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBufferUtf8.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBufferUtf8 = this.writeBufferUtf8.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWriteUtf8(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBufferUtf8 = [];\n        }\n    };\n    Terminal.prototype.write = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBuffer.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBuffer.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWrite();\n            });\n        }\n    };\n    Terminal.prototype._innerWrite = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBuffer = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBuffer.length > bufferOffset) {\n            var data = this.writeBuffer[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parse(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBuffer.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBuffer = this.writeBuffer.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBuffer = [];\n        }\n    };\n    Terminal.prototype.writeln = function (data) {\n        this.write(data + '\\r\\n');\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._customKeyEventHandler = customKeyEventHandler;\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._inputHandler.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._inputHandler.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n        this.refresh(0, this.rows - 1);\n        return matcherId;\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        var joinerId = this._renderCoordinator.registerCharacterJoiner(handler);\n        this.refresh(0, this.rows - 1);\n        return joinerId;\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        if (this._renderCoordinator.deregisterCharacterJoiner(joinerId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () {\n            return this.buffer.markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        if (this.buffer !== this.buffers.normal) {\n            return;\n        }\n        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this.selectionManager ? this.selectionManager.hasSelection : false;\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this.selectionManager.setSelection(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this.selectionManager ? this.selectionManager.selectionText : '';\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        if (!this.selectionManager.hasSelection) {\n            return undefined;\n        }\n        return {\n            startColumn: this.selectionManager.selectionStart[0],\n            startRow: this.selectionManager.selectionStart[1],\n            endColumn: this.selectionManager.selectionEnd[0],\n            endRow: this.selectionManager.selectionEnd[1]\n        };\n    };\n    Terminal.prototype.clearSelection = function () {\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n        }\n    };\n    Terminal.prototype.selectAll = function () {\n        if (this.selectionManager) {\n            this.selectionManager.selectAll();\n        }\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        if (this.selectionManager) {\n            this.selectionManager.selectLines(start, end);\n        }\n    };\n    Terminal.prototype._keyDown = function (event) {\n        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n            return false;\n        }\n        if (!this._compositionHelper.keydown(event)) {\n            if (this.buffer.ybase !== this.buffer.ydisp) {\n                this.scrollToBottom();\n            }\n            return false;\n        }\n        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);\n        this.updateCursorStyle(event);\n        if (result.type === 3 || result.type === 2) {\n            var scrollCount = this.rows - 1;\n            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);\n            return this.cancel(event, true);\n        }\n        if (result.type === 1) {\n            this.selectAll();\n        }\n        if (this._isThirdLevelShift(this.browser, event)) {\n            return true;\n        }\n        if (result.cancel) {\n            this.cancel(event, true);\n        }\n        if (!result.key) {\n            return true;\n        }\n        this.emit('keydown', event);\n        this._onKey.fire({ key: result.key, domEvent: event });\n        this.showCursor();\n        this.handler(result.key);\n        return this.cancel(event, true);\n    };\n    Terminal.prototype._isThirdLevelShift = function (browser, ev) {\n        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n        if (ev.type === 'keypress') {\n            return thirdLevelKey;\n        }\n        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n    };\n    Terminal.prototype.setgLevel = function (g) {\n        this.glevel = g;\n        this.charset = this.charsets[g];\n    };\n    Terminal.prototype.setgCharset = function (g, charset) {\n        this.charsets[g] = charset;\n        if (this.glevel === g) {\n            this.charset = charset;\n        }\n    };\n    Terminal.prototype._keyUp = function (ev) {\n        this.updateCursorStyle(ev);\n    };\n    Terminal.prototype._keyPress = function (ev) {\n        var key;\n        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n            return false;\n        }\n        this.cancel(ev);\n        if (ev.charCode) {\n            key = ev.charCode;\n        }\n        else if (ev.which === null || ev.which === undefined) {\n            key = ev.keyCode;\n        }\n        else if (ev.which !== 0 && ev.charCode !== 0) {\n            key = ev.which;\n        }\n        else {\n            return false;\n        }\n        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {\n            return false;\n        }\n        key = String.fromCharCode(key);\n        this.emit('keypress', key, ev);\n        this._onKey.fire({ key: key, domEvent: ev });\n        this.showCursor();\n        this.handler(key);\n        return true;\n    };\n    Terminal.prototype.bell = function () {\n        var _this = this;\n        this.emit('bell');\n        if (this._soundBell()) {\n            this.soundManager.playBellSound();\n        }\n        if (this._visualBell()) {\n            this.element.classList.add('visual-bell-active');\n            clearTimeout(this._visualBellTimer);\n            this._visualBellTimer = window.setTimeout(function () {\n                _this.element.classList.remove('visual-bell-active');\n            }, 200);\n        }\n    };\n    Terminal.prototype.log = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.log)\n            return;\n        this._context.console.log(text, data);\n    };\n    Terminal.prototype.error = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.error)\n            return;\n        this._context.console.error(text, data);\n    };\n    Terminal.prototype.resize = function (x, y) {\n        if (isNaN(x) || isNaN(y)) {\n            return;\n        }\n        if (x === this.cols && y === this.rows) {\n            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {\n                this.charMeasure.measure(this.options);\n            }\n            return;\n        }\n        if (x < MINIMUM_COLS)\n            x = MINIMUM_COLS;\n        if (y < MINIMUM_ROWS)\n            y = MINIMUM_ROWS;\n        this.buffers.resize(x, y);\n        this.cols = x;\n        this.rows = y;\n        this.buffers.setupTabStops(this.cols);\n        if (this.charMeasure) {\n            this.charMeasure.measure(this.options);\n        }\n        this.refresh(0, this.rows - 1);\n        this._onResize.fire({ cols: x, rows: y });\n    };\n    Terminal.prototype.updateRange = function (y) {\n        if (y < this._refreshStart)\n            this._refreshStart = y;\n        if (y > this._refreshEnd)\n            this._refreshEnd = y;\n    };\n    Terminal.prototype.maxRange = function () {\n        this._refreshStart = 0;\n        this._refreshEnd = this.rows - 1;\n    };\n    Terminal.prototype.clear = function () {\n        if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n            return;\n        }\n        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));\n        this.buffer.lines.length = 1;\n        this.buffer.ydisp = 0;\n        this.buffer.ybase = 0;\n        this.buffer.y = 0;\n        for (var i = 1; i < this.rows; i++) {\n            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this.refresh(0, this.rows - 1);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.is = function (term) {\n        return (this.options.termName + '').indexOf(term) === 0;\n    };\n    Terminal.prototype.handler = function (data) {\n        if (this.options.disableStdin) {\n            return;\n        }\n        if (this.selectionManager && this.selectionManager.hasSelection) {\n            this.selectionManager.clearSelection();\n        }\n        if (this.buffer.ybase !== this.buffer.ydisp) {\n            this.scrollToBottom();\n        }\n        this._onData.fire(data);\n    };\n    Terminal.prototype.handleTitle = function (title) {\n        this._onTitleChange.fire(title);\n    };\n    Terminal.prototype.index = function () {\n        this.buffer.y++;\n        if (this.buffer.y > this.buffer.scrollBottom) {\n            this.buffer.y--;\n            this.scroll();\n        }\n        if (this.buffer.x >= this.cols) {\n            this.buffer.x--;\n        }\n    };\n    Terminal.prototype.reverseIndex = function () {\n        if (this.buffer.y === this.buffer.scrollTop) {\n            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;\n            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);\n            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttrData()));\n            this.updateRange(this.buffer.scrollTop);\n            this.updateRange(this.buffer.scrollBottom);\n        }\n        else {\n            this.buffer.y--;\n        }\n    };\n    Terminal.prototype.reset = function () {\n        this.options.rows = this.rows;\n        this.options.cols = this.cols;\n        var customKeyEventHandler = this._customKeyEventHandler;\n        var inputHandler = this._inputHandler;\n        var cursorState = this.cursorState;\n        var writeBuffer = this.writeBuffer;\n        var writeBufferUtf8 = this.writeBufferUtf8;\n        var writeInProgress = this._writeInProgress;\n        var xoffSentToCatchUp = this._xoffSentToCatchUp;\n        var userScrolling = this._userScrolling;\n        this._setup();\n        this._customKeyEventHandler = customKeyEventHandler;\n        this._inputHandler = inputHandler;\n        this.cursorState = cursorState;\n        this.writeBuffer = writeBuffer;\n        this.writeBufferUtf8 = writeBufferUtf8;\n        this._writeInProgress = writeInProgress;\n        this._xoffSentToCatchUp = xoffSentToCatchUp;\n        this._userScrolling = userScrolling;\n        this.refresh(0, this.rows - 1);\n        if (this.viewport) {\n            this.viewport.syncScrollArea();\n        }\n    };\n    Terminal.prototype.tabSet = function () {\n        this.buffer.tabs[this.buffer.x] = true;\n    };\n    Terminal.prototype.cancel = function (ev, force) {\n        if (!this.options.cancelEvents && !force) {\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    };\n    Terminal.prototype._visualBell = function () {\n        return false;\n    };\n    Terminal.prototype._soundBell = function () {\n        return this.options.bellStyle === 'sound';\n    };\n    return Terminal;\n}(EventEmitter_1.EventEmitter));\nexports.Terminal = Terminal;\nfunction wasModifierKeyOnlyEvent(ev) {\n    return ev.keyCode === 16 ||\n        ev.keyCode === 17 ||\n        ev.keyCode === 18;\n}\n\n},{\"./AccessibilityManager\":1,\"./Buffer\":2,\"./BufferSet\":3,\"./CharMeasure\":4,\"./Clipboard\":6,\"./CompositionHelper\":7,\"./InputHandler\":9,\"./Linkifier\":10,\"./MouseHelper\":11,\"./MouseZoneManager\":12,\"./SelectionManager\":13,\"./SoundManager\":15,\"./Strings\":16,\"./Viewport\":18,\"./WindowsMode\":19,\"./common/Clone\":21,\"./common/EventEmitter\":22,\"./common/EventEmitter2\":23,\"./common/Platform\":25,\"./common/data/EscapeSequences\":28,\"./core/buffer/BufferLine\":29,\"./core/input/Keyboard\":33,\"./renderer/RenderCoordinator\":43,\"./renderer/Renderer\":44,\"./renderer/atlas/CharAtlasCache\":48,\"./renderer/dom/DomRenderer\":56,\"./ui/ColorManager\":58,\"./ui/Lifecycle\":59}],18:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar FALLBACK_SCROLL_BAR_WIDTH = 15;\nvar Viewport = (function (_super) {\n    __extends(Viewport, _super);\n    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._viewportElement = _viewportElement;\n        _this._scrollArea = _scrollArea;\n        _this._charMeasure = _charMeasure;\n        _this._dimensions = _dimensions;\n        _this.scrollBarWidth = 0;\n        _this._currentRowHeight = 0;\n        _this._lastRecordedBufferLength = 0;\n        _this._lastRecordedViewportHeight = 0;\n        _this._lastRecordedBufferHeight = 0;\n        _this._lastScrollTop = 0;\n        _this._wheelPartialScroll = 0;\n        _this._refreshAnimationFrame = null;\n        _this._ignoreNextScrollEvent = false;\n        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));\n        setTimeout(function () { return _this.syncScrollArea(); }, 0);\n        return _this;\n    }\n    Viewport.prototype.onDimensionsChance = function (dimensions) {\n        this._dimensions = dimensions;\n    };\n    Viewport.prototype.onThemeChange = function (colors) {\n        this._viewportElement.style.backgroundColor = colors.background.css;\n    };\n    Viewport.prototype._refresh = function () {\n        var _this = this;\n        if (this._refreshAnimationFrame === null) {\n            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });\n        }\n    };\n    Viewport.prototype._innerRefresh = function () {\n        if (this._charMeasure.height > 0) {\n            this._currentRowHeight = this._dimensions.scaledCellHeight / window.devicePixelRatio;\n            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._dimensions.canvasHeight);\n            if (this._lastRecordedBufferHeight !== newBufferHeight) {\n                this._lastRecordedBufferHeight = newBufferHeight;\n                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n            }\n        }\n        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._viewportElement.scrollTop !== scrollTop) {\n            this._ignoreNextScrollEvent = true;\n            this._viewportElement.scrollTop = scrollTop;\n        }\n        this._refreshAnimationFrame = null;\n    };\n    Viewport.prototype.syncScrollArea = function () {\n        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {\n            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;\n            this._refresh();\n            return;\n        }\n        if (this._lastRecordedViewportHeight !== this._dimensions.canvasHeight) {\n            this._refresh();\n            return;\n        }\n        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._lastScrollTop !== newScrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n            this._refresh();\n            return;\n        }\n    };\n    Viewport.prototype._onScroll = function (ev) {\n        this._lastScrollTop = this._viewportElement.scrollTop;\n        if (!this._viewportElement.offsetParent) {\n            return;\n        }\n        if (this._ignoreNextScrollEvent) {\n            this._ignoreNextScrollEvent = false;\n            return;\n        }\n        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n        var diff = newRow - this._terminal.buffer.ydisp;\n        this._terminal.scrollLines(diff, true);\n    };\n    Viewport.prototype.onWheel = function (ev) {\n        var amount = this._getPixelsScrolled(ev);\n        if (amount === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += amount;\n        ev.preventDefault();\n    };\n    Viewport.prototype._getPixelsScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n            amount *= this._currentRowHeight;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._currentRowHeight * this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.getLinesScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n            amount /= this._currentRowHeight + 0.0;\n            this._wheelPartialScroll += amount;\n            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n            this._wheelPartialScroll %= 1;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.onTouchStart = function (ev) {\n        this._lastTouchY = ev.touches[0].pageY;\n    };\n    Viewport.prototype.onTouchMove = function (ev) {\n        var deltaY = this._lastTouchY - ev.touches[0].pageY;\n        this._lastTouchY = ev.touches[0].pageY;\n        if (deltaY === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += deltaY;\n        ev.preventDefault();\n    };\n    return Viewport;\n}(Lifecycle_1.Disposable));\nexports.Viewport = Viewport;\n\n},{\"./common/Lifecycle\":24,\"./ui/Lifecycle\":59}],19:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nfunction applyWindowsMode(terminal) {\n    return terminal.onLineFeed(function () {\n        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);\n        var lastChar = line.get(terminal.cols - 1);\n        var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);\n        nextLine.isWrapped = (lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.NULL_CELL_CODE && lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.WHITESPACE_CELL_CODE);\n    });\n}\nexports.applyWindowsMode = applyWindowsMode;\n\n},{\"./core/buffer/BufferLine\":29}],20:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./EventEmitter2\");\nvar CircularList = (function () {\n    function CircularList(_maxLength) {\n        this._maxLength = _maxLength;\n        this.onDeleteEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onInsertEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onTrimEmitter = new EventEmitter2_1.EventEmitter2();\n        this._array = new Array(this._maxLength);\n        this._startIndex = 0;\n        this._length = 0;\n    }\n    Object.defineProperty(CircularList.prototype, \"onDelete\", {\n        get: function () { return this.onDeleteEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onInsert\", {\n        get: function () { return this.onInsertEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onTrim\", {\n        get: function () { return this.onTrimEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (newMaxLength) {\n            if (this._maxLength === newMaxLength) {\n                return;\n            }\n            var newArray = new Array(newMaxLength);\n            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {\n                newArray[i] = this._array[this._getCyclicIndex(i)];\n            }\n            this._array = newArray;\n            this._maxLength = newMaxLength;\n            this._startIndex = 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"length\", {\n        get: function () {\n            return this._length;\n        },\n        set: function (newLength) {\n            if (newLength > this._length) {\n                for (var i = this._length; i < newLength; i++) {\n                    this._array[i] = undefined;\n                }\n            }\n            this._length = newLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.get = function (index) {\n        return this._array[this._getCyclicIndex(index)];\n    };\n    CircularList.prototype.set = function (index, value) {\n        this._array[this._getCyclicIndex(index)] = value;\n    };\n    CircularList.prototype.push = function (value) {\n        this._array[this._getCyclicIndex(this._length)] = value;\n        if (this._length === this._maxLength) {\n            this._startIndex = ++this._startIndex % this._maxLength;\n            this.onTrimEmitter.fire(1);\n        }\n        else {\n            this._length++;\n        }\n    };\n    CircularList.prototype.recycle = function () {\n        if (this._length !== this._maxLength) {\n            throw new Error('Can only recycle when the buffer is full');\n        }\n        this._startIndex = ++this._startIndex % this._maxLength;\n        this.onTrimEmitter.fire(1);\n        return this._array[this._getCyclicIndex(this._length - 1)];\n    };\n    Object.defineProperty(CircularList.prototype, \"isFull\", {\n        get: function () {\n            return this._length === this._maxLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.pop = function () {\n        return this._array[this._getCyclicIndex(this._length-- - 1)];\n    };\n    CircularList.prototype.splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        if (deleteCount) {\n            for (var i = start; i < this._length - deleteCount; i++) {\n                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n            }\n            this._length -= deleteCount;\n        }\n        for (var i = this._length - 1; i >= start; i--) {\n            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n        }\n        for (var i = 0; i < items.length; i++) {\n            this._array[this._getCyclicIndex(start + i)] = items[i];\n        }\n        if (this._length + items.length > this._maxLength) {\n            var countToTrim = (this._length + items.length) - this._maxLength;\n            this._startIndex += countToTrim;\n            this._length = this._maxLength;\n            this.onTrimEmitter.fire(countToTrim);\n        }\n        else {\n            this._length += items.length;\n        }\n    };\n    CircularList.prototype.trimStart = function (count) {\n        if (count > this._length) {\n            count = this._length;\n        }\n        this._startIndex += count;\n        this._length -= count;\n        this.onTrimEmitter.fire(count);\n    };\n    CircularList.prototype.shiftElements = function (start, count, offset) {\n        if (count <= 0) {\n            return;\n        }\n        if (start < 0 || start >= this._length) {\n            throw new Error('start argument out of range');\n        }\n        if (start + offset < 0) {\n            throw new Error('Cannot shift elements in list beyond index 0');\n        }\n        if (offset > 0) {\n            for (var i = count - 1; i >= 0; i--) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n            var expandListBy = (start + count + offset) - this._length;\n            if (expandListBy > 0) {\n                this._length += expandListBy;\n                while (this._length > this._maxLength) {\n                    this._length--;\n                    this._startIndex++;\n                    this.onTrimEmitter.fire(1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < count; i++) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n        }\n    };\n    CircularList.prototype._getCyclicIndex = function (index) {\n        return (this._startIndex + index) % this._maxLength;\n    };\n    return CircularList;\n}());\nexports.CircularList = CircularList;\n\n},{\"./EventEmitter2\":23}],21:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction clone(val, depth) {\n    if (depth === void 0) { depth = 5; }\n    if (typeof val !== 'object') {\n        return val;\n    }\n    if (val === null) {\n        return null;\n    }\n    var clonedObject = Array.isArray(val) ? [] : {};\n    for (var key in val) {\n        clonedObject[key] = depth <= 1 ? val[key] : clone(val[key], depth - 1);\n    }\n    return clonedObject;\n}\nexports.clone = clone;\n\n},{}],22:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./Lifecycle\");\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter() {\n        var _this = _super.call(this) || this;\n        _this._events = _this._events || {};\n        return _this;\n    }\n    EventEmitter.prototype.on = function (type, listener) {\n        this._events[type] = this._events[type] || [];\n        this._events[type].push(listener);\n    };\n    EventEmitter.prototype.addDisposableListener = function (type, handler) {\n        var _this = this;\n        this.on(type, handler);\n        var disposed = false;\n        return {\n            dispose: function () {\n                if (disposed) {\n                    return;\n                }\n                _this.off(type, handler);\n                disposed = true;\n            }\n        };\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var i = obj.length;\n        while (i--) {\n            if (obj[i] === listener) {\n                obj.splice(i, 1);\n                return;\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllListeners = function (type) {\n        if (this._events[type]) {\n            delete this._events[type];\n        }\n    };\n    EventEmitter.prototype.emit = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n        }\n    };\n    EventEmitter.prototype.emitMayRemoveListeners = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n            i -= length - obj.length;\n            length = obj.length;\n        }\n    };\n    EventEmitter.prototype.listeners = function (type) {\n        return this._events[type] || [];\n    };\n    EventEmitter.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._events = {};\n    };\n    return EventEmitter;\n}(Lifecycle_1.Disposable));\nexports.EventEmitter = EventEmitter;\n\n},{\"./Lifecycle\":24}],23:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2 = (function () {\n    function EventEmitter2() {\n        this._listeners = [];\n    }\n    Object.defineProperty(EventEmitter2.prototype, \"event\", {\n        get: function () {\n            var _this = this;\n            if (!this._event) {\n                this._event = function (listener) {\n                    _this._listeners.push(listener);\n                    var disposable = {\n                        dispose: function () {\n                            for (var i = 0; i < _this._listeners.length; i++) {\n                                if (_this._listeners[i] === listener) {\n                                    _this._listeners.splice(i, 1);\n                                    return;\n                                }\n                            }\n                        }\n                    };\n                    return disposable;\n                };\n            }\n            return this._event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EventEmitter2.prototype.fire = function (data) {\n        var queue = [];\n        for (var i = 0; i < this._listeners.length; i++) {\n            queue.push(this._listeners[i]);\n        }\n        for (var i = 0; i < queue.length; i++) {\n            queue[i].call(undefined, data);\n        }\n    };\n    return EventEmitter2;\n}());\nexports.EventEmitter2 = EventEmitter2;\n\n},{}],24:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable = (function () {\n    function Disposable() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    Disposable.prototype.dispose = function () {\n        this._isDisposed = true;\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables.length = 0;\n    };\n    Disposable.prototype.register = function (d) {\n        this._disposables.push(d);\n    };\n    Disposable.prototype.unregister = function (d) {\n        var index = this._disposables.indexOf(d);\n        if (index !== -1) {\n            this._disposables.splice(index, 1);\n        }\n    };\n    return Disposable;\n}());\nexports.Disposable = Disposable;\n\n},{}],25:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode = (typeof navigator === 'undefined') ? true : false;\nvar userAgent = (isNode) ? 'node' : navigator.userAgent;\nvar platform = (isNode) ? 'node' : navigator.platform;\nexports.isFirefox = !!~userAgent.indexOf('Firefox');\nexports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');\nexports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);\nexports.isIpad = platform === 'iPad';\nexports.isIphone = platform === 'iPhone';\nexports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);\nexports.isLinux = platform.indexOf('Linux') >= 0;\nfunction contains(arr, el) {\n    return arr.indexOf(el) >= 0;\n}\n\n},{}],26:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fill(array, value, start, end) {\n    if (array.fill) {\n        return array.fill(value, start, end);\n    }\n    return fillFallback(array, value, start, end);\n}\nexports.fill = fill;\nfunction fillFallback(array, value, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = array.length; }\n    if (start >= array.length) {\n        return array;\n    }\n    start = (array.length + start) % array.length;\n    if (end >= array.length) {\n        end = array.length;\n    }\n    else {\n        end = (array.length + end) % array.length;\n    }\n    for (var i = start; i < end; ++i) {\n        array[i] = value;\n    }\n    return array;\n}\nexports.fillFallback = fillFallback;\nfunction concat(a, b) {\n    var result = new a.constructor(a.length + b.length);\n    result.set(a);\n    result.set(b, a.length);\n    return result;\n}\nexports.concat = concat;\n\n},{}],27:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_COLOR = 256;\n\n},{}],28:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar C0;\n(function (C0) {\n    C0.NUL = '\\x00';\n    C0.SOH = '\\x01';\n    C0.STX = '\\x02';\n    C0.ETX = '\\x03';\n    C0.EOT = '\\x04';\n    C0.ENQ = '\\x05';\n    C0.ACK = '\\x06';\n    C0.BEL = '\\x07';\n    C0.BS = '\\x08';\n    C0.HT = '\\x09';\n    C0.LF = '\\x0a';\n    C0.VT = '\\x0b';\n    C0.FF = '\\x0c';\n    C0.CR = '\\x0d';\n    C0.SO = '\\x0e';\n    C0.SI = '\\x0f';\n    C0.DLE = '\\x10';\n    C0.DC1 = '\\x11';\n    C0.DC2 = '\\x12';\n    C0.DC3 = '\\x13';\n    C0.DC4 = '\\x14';\n    C0.NAK = '\\x15';\n    C0.SYN = '\\x16';\n    C0.ETB = '\\x17';\n    C0.CAN = '\\x18';\n    C0.EM = '\\x19';\n    C0.SUB = '\\x1a';\n    C0.ESC = '\\x1b';\n    C0.FS = '\\x1c';\n    C0.GS = '\\x1d';\n    C0.RS = '\\x1e';\n    C0.US = '\\x1f';\n    C0.SP = '\\x20';\n    C0.DEL = '\\x7f';\n})(C0 = exports.C0 || (exports.C0 = {}));\nvar C1;\n(function (C1) {\n    C1.PAD = '\\x80';\n    C1.HOP = '\\x81';\n    C1.BPH = '\\x82';\n    C1.NBH = '\\x83';\n    C1.IND = '\\x84';\n    C1.NEL = '\\x85';\n    C1.SSA = '\\x86';\n    C1.ESA = '\\x87';\n    C1.HTS = '\\x88';\n    C1.HTJ = '\\x89';\n    C1.VTS = '\\x8a';\n    C1.PLD = '\\x8b';\n    C1.PLU = '\\x8c';\n    C1.RI = '\\x8d';\n    C1.SS2 = '\\x8e';\n    C1.SS3 = '\\x8f';\n    C1.DCS = '\\x90';\n    C1.PU1 = '\\x91';\n    C1.PU2 = '\\x92';\n    C1.STS = '\\x93';\n    C1.CCH = '\\x94';\n    C1.MW = '\\x95';\n    C1.SPA = '\\x96';\n    C1.EPA = '\\x97';\n    C1.SOS = '\\x98';\n    C1.SGCI = '\\x99';\n    C1.SCI = '\\x9a';\n    C1.CSI = '\\x9b';\n    C1.ST = '\\x9c';\n    C1.OSC = '\\x9d';\n    C1.PM = '\\x9e';\n    C1.APC = '\\x9f';\n})(C1 = exports.C1 || (exports.C1 = {}));\n\n},{}],29:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextDecoder_1 = require(\"../input/TextDecoder\");\nvar Types_1 = require(\"../../common/Types\");\nexports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);\nexports.CHAR_DATA_ATTR_INDEX = 0;\nexports.CHAR_DATA_CHAR_INDEX = 1;\nexports.CHAR_DATA_WIDTH_INDEX = 2;\nexports.CHAR_DATA_CODE_INDEX = 3;\nexports.NULL_CELL_CHAR = '';\nexports.NULL_CELL_WIDTH = 1;\nexports.NULL_CELL_CODE = 0;\nexports.WHITESPACE_CELL_CHAR = ' ';\nexports.WHITESPACE_CELL_WIDTH = 1;\nexports.WHITESPACE_CELL_CODE = 32;\nvar CELL_SIZE = 3;\nvar AttributeData = (function () {\n    function AttributeData() {\n        this.fg = 0;\n        this.bg = 0;\n    }\n    AttributeData.toColorRGB = function (value) {\n        return [\n            value >>> 16 & 255,\n            value >>> 8 & 255,\n            value & 255\n        ];\n    };\n    AttributeData.fromColorRGB = function (value) {\n        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;\n    };\n    AttributeData.prototype.clone = function () {\n        var newObj = new AttributeData();\n        newObj.fg = this.fg;\n        newObj.bg = this.bg;\n        return newObj;\n    };\n    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };\n    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };\n    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };\n    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };\n    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };\n    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };\n    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };\n    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };\n    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };\n    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };\n    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };\n    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };\n    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };\n    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };\n    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };\n    AttributeData.prototype.getFgColor = function () {\n        switch (this.fg & 50331648) {\n            case 16777216:\n            case 33554432: return this.fg & 255;\n            case 50331648: return this.fg & 16777215;\n            default: return -1;\n        }\n    };\n    AttributeData.prototype.getBgColor = function () {\n        switch (this.bg & 50331648) {\n            case 16777216:\n            case 33554432: return this.bg & 255;\n            case 50331648: return this.bg & 16777215;\n            default: return -1;\n        }\n    };\n    return AttributeData;\n}());\nexports.AttributeData = AttributeData;\nexports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData());\nvar CellData = (function (_super) {\n    __extends(CellData, _super);\n    function CellData() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.content = 0;\n        _this.fg = 0;\n        _this.bg = 0;\n        _this.combinedData = '';\n        return _this;\n    }\n    CellData.fromCharData = function (value) {\n        var obj = new CellData();\n        obj.setFromCharData(value);\n        return obj;\n    };\n    CellData.prototype.isCombined = function () {\n        return this.content & 2097152;\n    };\n    CellData.prototype.getWidth = function () {\n        return this.content >> 22;\n    };\n    CellData.prototype.getChars = function () {\n        if (this.content & 2097152) {\n            return this.combinedData;\n        }\n        if (this.content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);\n        }\n        return '';\n    };\n    CellData.prototype.getCode = function () {\n        return (this.isCombined())\n            ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n            : this.content & 2097151;\n    };\n    CellData.prototype.setFromCharData = function (value) {\n        this.fg = value[exports.CHAR_DATA_ATTR_INDEX];\n        this.bg = 0;\n        var combined = false;\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 2) {\n            combined = true;\n        }\n        else if (value[exports.CHAR_DATA_CHAR_INDEX].length === 2) {\n            var code = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                var second = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n                }\n                else {\n                    combined = true;\n                }\n            }\n            else {\n                combined = true;\n            }\n        }\n        else {\n            this.content = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        if (combined) {\n            this.combinedData = value[exports.CHAR_DATA_CHAR_INDEX];\n            this.content = 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    CellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return CellData;\n}(AttributeData));\nexports.CellData = CellData;\nvar BufferLine = (function () {\n    function BufferLine(cols, fillCellData, isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        this.isWrapped = isWrapped;\n        this._combined = {};\n        this._data = new Uint32Array(cols * CELL_SIZE);\n        var cell = fillCellData || CellData.fromCharData([0, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE]);\n        for (var i = 0; i < cols; ++i) {\n            this.setCell(i, cell);\n        }\n        this.length = cols;\n    }\n    BufferLine.prototype.get = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        var cp = content & 2097151;\n        return [\n            this._data[index * CELL_SIZE + 1],\n            (content & 2097152)\n                ? this._combined[index]\n                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',\n            content >> 22,\n            (content & 2097152)\n                ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n                : cp\n        ];\n    };\n    BufferLine.prototype.set = function (index, value) {\n        this._data[index * CELL_SIZE + 1] = value[exports.CHAR_DATA_ATTR_INDEX];\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 1) {\n            this._combined[index] = value[1];\n            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        else {\n            this._data[index * CELL_SIZE + 0] = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    BufferLine.prototype.getWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] >> 22;\n    };\n    BufferLine.prototype.hasWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 12582912;\n    };\n    BufferLine.prototype.getFg = function (index) {\n        return this._data[index * CELL_SIZE + 1];\n    };\n    BufferLine.prototype.getBg = function (index) {\n        return this._data[index * CELL_SIZE + 2];\n    };\n    BufferLine.prototype.hasContent = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 4194303;\n    };\n    BufferLine.prototype.getCodePoint = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index].charCodeAt(this._combined[index].length - 1);\n        }\n        return content & 2097151;\n    };\n    BufferLine.prototype.isCombined = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 2097152;\n    };\n    BufferLine.prototype.getString = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index];\n        }\n        if (content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(content & 2097151);\n        }\n        return '';\n    };\n    BufferLine.prototype.loadCell = function (index, cell) {\n        var startIndex = index * CELL_SIZE;\n        cell.content = this._data[startIndex + 0];\n        cell.fg = this._data[startIndex + 1];\n        cell.bg = this._data[startIndex + 2];\n        if (cell.content & 2097152) {\n            cell.combinedData = this._combined[index];\n        }\n        return cell;\n    };\n    BufferLine.prototype.setCell = function (index, cell) {\n        if (cell.content & 2097152) {\n            this._combined[index] = cell.combinedData;\n        }\n        this._data[index * CELL_SIZE + 0] = cell.content;\n        this._data[index * CELL_SIZE + 1] = cell.fg;\n        this._data[index * CELL_SIZE + 2] = cell.bg;\n    };\n    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {\n        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);\n        this._data[index * CELL_SIZE + 1] = fg;\n        this._data[index * CELL_SIZE + 2] = bg;\n    };\n    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);\n        }\n        else {\n            if (content & 2097151) {\n                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);\n                content &= ~2097151;\n                content |= 2097152;\n            }\n            else {\n                content = codePoint | (1 << 22);\n            }\n            this._data[index * CELL_SIZE + 0] = content;\n        }\n    };\n    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = this.length - pos - n - 1; i >= 0; --i) {\n                this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n            }\n            for (var i = 0; i < n; ++i) {\n                this.setCell(pos + i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = 0; i < this.length - pos - n; ++i) {\n                this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n            }\n            for (var i = this.length - n; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {\n        while (start < end && start < this.length) {\n            this.setCell(start++, fillCellData);\n        }\n    };\n    BufferLine.prototype.resize = function (cols, fillCellData) {\n        if (cols === this.length) {\n            return;\n        }\n        if (cols > this.length) {\n            var data = new Uint32Array(cols * CELL_SIZE);\n            if (this.length) {\n                if (cols * CELL_SIZE < this._data.length) {\n                    data.set(this._data.subarray(0, cols * CELL_SIZE));\n                }\n                else {\n                    data.set(this._data);\n                }\n            }\n            this._data = data;\n            for (var i = this.length; i < cols; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            if (cols) {\n                var data = new Uint32Array(cols * CELL_SIZE);\n                data.set(this._data.subarray(0, cols * CELL_SIZE));\n                this._data = data;\n                var keys = Object.keys(this._combined);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = parseInt(keys[i], 10);\n                    if (key >= cols) {\n                        delete this._combined[key];\n                    }\n                }\n            }\n            else {\n                this._data = new Uint32Array(0);\n                this._combined = {};\n            }\n        }\n        this.length = cols;\n    };\n    BufferLine.prototype.fill = function (fillCellData) {\n        this._combined = {};\n        for (var i = 0; i < this.length; ++i) {\n            this.setCell(i, fillCellData);\n        }\n    };\n    BufferLine.prototype.copyFrom = function (line) {\n        if (this.length !== line.length) {\n            this._data = new Uint32Array(line._data);\n        }\n        else {\n            this._data.set(line._data);\n        }\n        this.length = line.length;\n        this._combined = {};\n        for (var el in line._combined) {\n            this._combined[el] = line._combined[el];\n        }\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLine.prototype.clone = function () {\n        var newLine = new BufferLine(0);\n        newLine._data = new Uint32Array(this._data);\n        newLine.length = this.length;\n        for (var el in this._combined) {\n            newLine._combined[el] = this._combined[el];\n        }\n        newLine.isWrapped = this.isWrapped;\n        return newLine;\n    };\n    BufferLine.prototype.getTrimmedLength = function () {\n        for (var i = this.length - 1; i >= 0; --i) {\n            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {\n                return i + (this._data[i * CELL_SIZE + 0] >> 22);\n            }\n        }\n        return 0;\n    };\n    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {\n        var srcData = src._data;\n        if (applyInReverse) {\n            for (var cell = length - 1; cell >= 0; cell--) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        else {\n            for (var cell = 0; cell < length; cell++) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        var srcCombinedKeys = Object.keys(src._combined);\n        for (var i = 0; i < srcCombinedKeys.length; i++) {\n            var key = parseInt(srcCombinedKeys[i], 10);\n            if (key >= srcCol) {\n                this._combined[key - srcCol + destCol] = src._combined[key];\n            }\n        }\n    };\n    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {\n        if (trimRight === void 0) { trimRight = false; }\n        if (startCol === void 0) { startCol = 0; }\n        if (endCol === void 0) { endCol = this.length; }\n        if (trimRight) {\n            endCol = Math.min(endCol, this.getTrimmedLength());\n        }\n        var result = '';\n        while (startCol < endCol) {\n            var content = this._data[startCol * CELL_SIZE + 0];\n            var cp = content & 2097151;\n            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : exports.WHITESPACE_CELL_CHAR;\n            startCol += (content >> 22) || 1;\n        }\n        return result;\n    };\n    return BufferLine;\n}());\nexports.BufferLine = BufferLine;\n\n},{\"../../common/Types\":27,\"../input/TextDecoder\":34}],30:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {\n    var toRemove = [];\n    for (var y = 0; y < lines.length - 1; y++) {\n        var i = y;\n        var nextLine = lines.get(++i);\n        if (!nextLine.isWrapped) {\n            continue;\n        }\n        var wrappedLines = [lines.get(y)];\n        while (i < lines.length && nextLine.isWrapped) {\n            wrappedLines.push(nextLine);\n            nextLine = lines.get(++i);\n        }\n        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n            y += wrappedLines.length - 1;\n            continue;\n        }\n        var destLineIndex = 0;\n        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n        var srcLineIndex = 1;\n        var srcCol = 0;\n        while (srcLineIndex < wrappedLines.length) {\n            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n            var srcRemainingCells = srcTrimmedTineLength - srcCol;\n            var destRemainingCells = newCols - destCol;\n            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n            destCol += cellsToCopy;\n            if (destCol === newCols) {\n                destLineIndex++;\n                destCol = 0;\n            }\n            srcCol += cellsToCopy;\n            if (srcCol === srcTrimmedTineLength) {\n                srcLineIndex++;\n                srcCol = 0;\n            }\n            if (destCol === 0 && destLineIndex !== 0) {\n                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n                }\n            }\n        }\n        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n        var countToRemove = 0;\n        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {\n            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {\n                countToRemove++;\n            }\n            else {\n                break;\n            }\n        }\n        if (countToRemove > 0) {\n            toRemove.push(y + wrappedLines.length - countToRemove);\n            toRemove.push(countToRemove);\n        }\n        y += wrappedLines.length - 1;\n    }\n    return toRemove;\n}\nexports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;\nfunction reflowLargerCreateNewLayout(lines, toRemove) {\n    var layout = [];\n    var nextToRemoveIndex = 0;\n    var nextToRemoveStart = toRemove[nextToRemoveIndex];\n    var countRemovedSoFar = 0;\n    for (var i = 0; i < lines.length; i++) {\n        if (nextToRemoveStart === i) {\n            var countToRemove = toRemove[++nextToRemoveIndex];\n            lines.onDeleteEmitter.fire({\n                index: i - countRemovedSoFar,\n                amount: countToRemove\n            });\n            i += countToRemove - 1;\n            countRemovedSoFar += countToRemove;\n            nextToRemoveStart = toRemove[++nextToRemoveIndex];\n        }\n        else {\n            layout.push(i);\n        }\n    }\n    return {\n        layout: layout,\n        countRemoved: countRemovedSoFar\n    };\n}\nexports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;\nfunction reflowLargerApplyNewLayout(lines, newLayout) {\n    var newLayoutLines = [];\n    for (var i = 0; i < newLayout.length; i++) {\n        newLayoutLines.push(lines.get(newLayout[i]));\n    }\n    for (var i = 0; i < newLayoutLines.length; i++) {\n        lines.set(i, newLayoutLines[i]);\n    }\n    lines.length = newLayout.length;\n}\nexports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;\nfunction reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {\n    var newLineLengths = [];\n    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });\n    var srcCol = 0;\n    var srcLine = 0;\n    var cellsAvailable = 0;\n    while (cellsAvailable < cellsNeeded) {\n        if (cellsNeeded - cellsAvailable < newCols) {\n            newLineLengths.push(cellsNeeded - cellsAvailable);\n            break;\n        }\n        srcCol += newCols;\n        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n        if (srcCol > oldTrimmedLength) {\n            srcCol -= oldTrimmedLength;\n            srcLine++;\n        }\n        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n        if (endsWithWide) {\n            srcCol--;\n        }\n        var lineLength = endsWithWide ? newCols - 1 : newCols;\n        newLineLengths.push(lineLength);\n        cellsAvailable += lineLength;\n    }\n    return newLineLengths;\n}\nexports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;\nfunction getWrappedLineTrimmedLength(lines, i, cols) {\n    if (i === lines.length - 1) {\n        return lines[i].getTrimmedLength();\n    }\n    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n    if (endsInNull && followingLineStartsWithWide) {\n        return cols - 1;\n    }\n    return cols;\n}\nexports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;\n\n},{}],31:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"../../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar Marker = (function (_super) {\n    __extends(Marker, _super);\n    function Marker(line) {\n        var _this = _super.call(this) || this;\n        _this.line = line;\n        _this._id = Marker._nextId++;\n        _this.isDisposed = false;\n        _this._onDispose = new EventEmitter2_1.EventEmitter2();\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"onDispose\", {\n        get: function () { return this._onDispose.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.dispose = function () {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this._onDispose.fire();\n    };\n    Marker._nextId = 1;\n    return Marker;\n}(Lifecycle_1.Disposable));\nexports.Marker = Marker;\n\n},{\"../../common/EventEmitter2\":23,\"../../common/Lifecycle\":24}],32:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHARSETS = {};\nexports.DEFAULT_CHARSET = exports.CHARSETS['B'];\nexports.CHARSETS['0'] = {\n    '`': '\\u25c6',\n    'a': '\\u2592',\n    'b': '\\u0009',\n    'c': '\\u000c',\n    'd': '\\u000d',\n    'e': '\\u000a',\n    'f': '\\u00b0',\n    'g': '\\u00b1',\n    'h': '\\u2424',\n    'i': '\\u000b',\n    'j': '\\u2518',\n    'k': '\\u2510',\n    'l': '\\u250c',\n    'm': '\\u2514',\n    'n': '\\u253c',\n    'o': '\\u23ba',\n    'p': '\\u23bb',\n    'q': '\\u2500',\n    'r': '\\u23bc',\n    's': '\\u23bd',\n    't': '\\u251c',\n    'u': '\\u2524',\n    'v': '\\u2534',\n    'w': '\\u252c',\n    'x': '\\u2502',\n    'y': '\\u2264',\n    'z': '\\u2265',\n    '{': '\\u03c0',\n    '|': '\\u2260',\n    '}': '\\u00a3',\n    '~': '\\u00b7'\n};\nexports.CHARSETS['A'] = {\n    '#': '£'\n};\nexports.CHARSETS['B'] = null;\nexports.CHARSETS['4'] = {\n    '#': '£',\n    '@': '¾',\n    '[': 'ij',\n    '\\\\': '½',\n    ']': '|',\n    '{': '¨',\n    '|': 'f',\n    '}': '¼',\n    '~': '´'\n};\nexports.CHARSETS['C'] =\n    exports.CHARSETS['5'] = {\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['R'] = {\n    '#': '£',\n    '@': 'à',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': '§',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': '¨'\n};\nexports.CHARSETS['Q'] = {\n    '@': 'à',\n    '[': 'â',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '`': 'ô',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': 'û'\n};\nexports.CHARSETS['K'] = {\n    '@': '§',\n    '[': 'Ä',\n    '\\\\': 'Ö',\n    ']': 'Ü',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'ß'\n};\nexports.CHARSETS['Y'] = {\n    '#': '£',\n    '@': '§',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': 'é',\n    '`': 'ù',\n    '{': 'à',\n    '|': 'ò',\n    '}': 'è',\n    '~': 'ì'\n};\nexports.CHARSETS['E'] =\n    exports.CHARSETS['6'] = {\n        '@': 'Ä',\n        '[': 'Æ',\n        '\\\\': 'Ø',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'ä',\n        '{': 'æ',\n        '|': 'ø',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['Z'] = {\n    '#': '£',\n    '@': '§',\n    '[': '¡',\n    '\\\\': 'Ñ',\n    ']': '¿',\n    '{': '°',\n    '|': 'ñ',\n    '}': 'ç'\n};\nexports.CHARSETS['H'] =\n    exports.CHARSETS['7'] = {\n        '@': 'É',\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['='] = {\n    '#': 'ù',\n    '@': 'à',\n    '[': 'é',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '_': 'è',\n    '`': 'ô',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'û'\n};\n\n},{}],33:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../../common/data/EscapeSequences\");\nvar KEYCODE_KEY_MAPPINGS = {\n    48: ['0', ')'],\n    49: ['1', '!'],\n    50: ['2', '@'],\n    51: ['3', '#'],\n    52: ['4', '$'],\n    53: ['5', '%'],\n    54: ['6', '^'],\n    55: ['7', '&'],\n    56: ['8', '*'],\n    57: ['9', '('],\n    186: [';', ':'],\n    187: ['=', '+'],\n    188: [',', '<'],\n    189: ['-', '_'],\n    190: ['.', '>'],\n    191: ['/', '?'],\n    192: ['`', '~'],\n    219: ['[', '{'],\n    220: ['\\\\', '|'],\n    221: [']', '}'],\n    222: ['\\'', '\"']\n};\nfunction evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {\n    var result = {\n        type: 0,\n        cancel: false,\n        key: undefined\n    };\n    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n    switch (ev.keyCode) {\n        case 0:\n            if (ev.key === 'UIKeyInputUpArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OA';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[A';\n                }\n            }\n            else if (ev.key === 'UIKeyInputLeftArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OD';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[D';\n                }\n            }\n            else if (ev.key === 'UIKeyInputRightArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OC';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[C';\n                }\n            }\n            else if (ev.key === 'UIKeyInputDownArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OB';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[B';\n                }\n            }\n            break;\n        case 8:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.BS;\n                break;\n            }\n            else if (ev.altKey) {\n                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;\n                break;\n            }\n            result.key = EscapeSequences_1.C0.DEL;\n            break;\n        case 9:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[Z';\n                break;\n            }\n            result.key = EscapeSequences_1.C0.HT;\n            result.cancel = true;\n            break;\n        case 13:\n            result.key = EscapeSequences_1.C0.CR;\n            result.cancel = true;\n            break;\n        case 27:\n            result.key = EscapeSequences_1.C0.ESC;\n            result.cancel = true;\n            break;\n        case 37:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OD';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[D';\n            }\n            break;\n        case 39:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OC';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[C';\n            }\n            break;\n        case 38:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OA';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[A';\n            }\n            break;\n        case 40:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OB';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[B';\n            }\n            break;\n        case 45:\n            if (!ev.shiftKey && !ev.ctrlKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[2~';\n            }\n            break;\n        case 46:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[3~';\n            }\n            break;\n        case 36:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OH';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[H';\n            }\n            break;\n        case 35:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OF';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[F';\n            }\n            break;\n        case 33:\n            if (ev.shiftKey) {\n                result.type = 2;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[5~';\n            }\n            break;\n        case 34:\n            if (ev.shiftKey) {\n                result.type = 3;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[6~';\n            }\n            break;\n        case 112:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OP';\n            }\n            break;\n        case 113:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OQ';\n            }\n            break;\n        case 114:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OR';\n            }\n            break;\n        case 115:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OS';\n            }\n            break;\n        case 116:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[15~';\n            }\n            break;\n        case 117:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[17~';\n            }\n            break;\n        case 118:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[18~';\n            }\n            break;\n        case 119:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[19~';\n            }\n            break;\n        case 120:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[20~';\n            }\n            break;\n        case 121:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[21~';\n            }\n            break;\n        case 122:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[23~';\n            }\n            break;\n        case 123:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[24~';\n            }\n            break;\n        default:\n            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n                if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    result.key = String.fromCharCode(ev.keyCode - 64);\n                }\n                else if (ev.keyCode === 32) {\n                    result.key = String.fromCharCode(0);\n                }\n                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n                }\n                else if (ev.keyCode === 56) {\n                    result.key = String.fromCharCode(127);\n                }\n                else if (ev.keyCode === 219) {\n                    result.key = String.fromCharCode(27);\n                }\n                else if (ev.keyCode === 220) {\n                    result.key = String.fromCharCode(28);\n                }\n                else if (ev.keyCode === 221) {\n                    result.key = String.fromCharCode(29);\n                }\n            }\n            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n                if (key) {\n                    result.key = EscapeSequences_1.C0.ESC + key;\n                }\n                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);\n                }\n            }\n            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {\n                if (ev.keyCode === 65) {\n                    result.type = 1;\n                }\n            }\n            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n                result.key = ev.key;\n            }\n            else if (ev.key && ev.ctrlKey) {\n                if (ev.key === '_') {\n                    result.key = EscapeSequences_1.C0.US;\n                }\n            }\n            break;\n    }\n    return result;\n}\nexports.evaluateKeyboardEvent = evaluateKeyboardEvent;\n\n},{\"../../common/data/EscapeSequences\":28}],34:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction stringFromCodePoint(codePoint) {\n    if (codePoint > 0xFFFF) {\n        codePoint -= 0x10000;\n        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n    }\n    return String.fromCharCode(codePoint);\n}\nexports.stringFromCodePoint = stringFromCodePoint;\nfunction utf32ToString(data, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = data.length; }\n    var result = '';\n    for (var i = start; i < end; ++i) {\n        var codepoint = data[i];\n        if (codepoint > 0xFFFF) {\n            codepoint -= 0x10000;\n            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n        }\n        else {\n            result += String.fromCharCode(codepoint);\n        }\n    }\n    return result;\n}\nexports.utf32ToString = utf32ToString;\nvar StringToUtf32 = (function () {\n    function StringToUtf32() {\n        this._interim = 0;\n    }\n    StringToUtf32.prototype.clear = function () {\n        this._interim = 0;\n    };\n    StringToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var startPos = 0;\n        if (this._interim) {\n            var second = input.charCodeAt(startPos++);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                target[size++] = this._interim;\n                target[size++] = second;\n            }\n            this._interim = 0;\n        }\n        for (var i = startPos; i < length; ++i) {\n            var code = input.charCodeAt(i);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                if (++i >= length) {\n                    this._interim = code;\n                    return size;\n                }\n                var second = input.charCodeAt(i);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n                }\n                else {\n                    target[size++] = code;\n                    target[size++] = second;\n                }\n                continue;\n            }\n            target[size++] = code;\n        }\n        return size;\n    };\n    return StringToUtf32;\n}());\nexports.StringToUtf32 = StringToUtf32;\nvar Utf8ToUtf32 = (function () {\n    function Utf8ToUtf32() {\n        this.interim = new Uint8Array(3);\n    }\n    Utf8ToUtf32.prototype.clear = function () {\n        this.interim.fill(0);\n    };\n    Utf8ToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var byte1;\n        var byte2;\n        var byte3;\n        var byte4;\n        var codepoint = 0;\n        var startPos = 0;\n        if (this.interim[0]) {\n            var discardInterim = false;\n            var cp = this.interim[0];\n            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n            var pos = 0;\n            var tmp = void 0;\n            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n                cp <<= 6;\n                cp |= tmp;\n            }\n            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n            var missing = type - pos;\n            while (startPos < missing) {\n                if (startPos >= length) {\n                    return 0;\n                }\n                tmp = input[startPos++];\n                if ((tmp & 0xC0) !== 0x80) {\n                    startPos--;\n                    discardInterim = true;\n                    break;\n                }\n                else {\n                    this.interim[pos++] = tmp;\n                    cp <<= 6;\n                    cp |= tmp & 0x3F;\n                }\n            }\n            if (!discardInterim) {\n                if (type === 2) {\n                    if (cp < 0x80) {\n                        startPos--;\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else if (type === 3) {\n                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF)) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else {\n                    if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n            }\n            this.interim.fill(0);\n        }\n        var fourStop = length - 4;\n        var i = startPos;\n        while (i < length) {\n            while (i < fourStop\n                && !((byte1 = input[i]) & 0x80)\n                && !((byte2 = input[i + 1]) & 0x80)\n                && !((byte3 = input[i + 2]) & 0x80)\n                && !((byte4 = input[i + 3]) & 0x80)) {\n                target[size++] = byte1;\n                target[size++] = byte2;\n                target[size++] = byte3;\n                target[size++] = byte4;\n                i += 4;\n            }\n            byte1 = input[i++];\n            if (byte1 < 0x80) {\n                target[size++] = byte1;\n            }\n            else if ((byte1 & 0xE0) === 0xC0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n                if (codepoint < 0x80) {\n                    i--;\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF0) === 0xE0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF)) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF8) === 0xF0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    this.interim[2] = byte3;\n                    return size;\n                }\n                byte4 = input[i++];\n                if ((byte4 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else {\n            }\n        }\n        return size;\n    };\n    return Utf8ToUtf32;\n}());\nexports.Utf8ToUtf32 = Utf8ToUtf32;\n\n},{}],35:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../common/data/EscapeSequences\");\nvar AltClickHandler = (function () {\n    function AltClickHandler(_mouseEvent, _terminal) {\n        var _a;\n        this._mouseEvent = _mouseEvent;\n        this._terminal = _terminal;\n        this._lines = this._terminal.buffer.lines;\n        this._startCol = this._terminal.buffer.x;\n        this._startRow = this._terminal.buffer.y;\n        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);\n        if (coordinates) {\n            _a = coordinates.map(function (coordinate) {\n                return coordinate - 1;\n            }), this._endCol = _a[0], this._endRow = _a[1];\n        }\n    }\n    AltClickHandler.prototype.move = function () {\n        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {\n            this._terminal.handler(this._arrowSequences());\n        }\n    };\n    AltClickHandler.prototype._arrowSequences = function () {\n        if (!this._terminal.buffer.hasScrollback) {\n            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();\n        }\n        return this._moveHorizontallyOnly();\n    };\n    AltClickHandler.prototype._resetStartingRow = function () {\n        if (this._moveToRequestedRow().length === 0) {\n            return '';\n        }\n        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence(\"D\"));\n    };\n    AltClickHandler.prototype._moveToRequestedRow = function () {\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();\n        return repeat(rowsToMove, this._sequence(this._verticalDirection()));\n    };\n    AltClickHandler.prototype._moveToRequestedCol = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        var endRow = this._endRow;\n        var direction = this._horizontalDirection();\n        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === \"C\").length, this._sequence(direction));\n    };\n    AltClickHandler.prototype._moveHorizontallyOnly = function () {\n        var direction = this._horizontalDirection();\n        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));\n    };\n    AltClickHandler.prototype._wrappedRowsCount = function () {\n        var wrappedRows = 0;\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        for (var i = 0; i < Math.abs(startRow - endRow); i++) {\n            var direction = this._verticalDirection() === \"A\" ? -1 : 1;\n            if (this._lines.get(startRow + (direction * i)).isWrapped) {\n                wrappedRows++;\n            }\n        }\n        return wrappedRows;\n    };\n    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {\n        var rowCount = 0;\n        var lineWraps = this._lines.get(currentRow).isWrapped;\n        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {\n            rowCount++;\n            currentRow--;\n            lineWraps = this._lines.get(currentRow).isWrapped;\n        }\n        return rowCount;\n    };\n    AltClickHandler.prototype._horizontalDirection = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        if ((this._startCol < this._endCol &&\n            startRow <= this._endRow) ||\n            (this._startCol >= this._endCol &&\n                startRow < this._endRow)) {\n            return \"C\";\n        }\n        return \"D\";\n    };\n    AltClickHandler.prototype._verticalDirection = function () {\n        if (this._startRow > this._endRow) {\n            return \"A\";\n        }\n        return \"B\";\n    };\n    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {\n        var currentCol = startCol;\n        var currentRow = startRow;\n        var bufferStr = '';\n        while (currentCol !== endCol || currentRow !== endRow) {\n            currentCol += forward ? 1 : -1;\n            if (forward && currentCol > this._terminal.cols - 1) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n                currentCol = 0;\n                startCol = 0;\n                currentRow++;\n            }\n            else if (!forward && currentCol < 0) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);\n                currentCol = this._terminal.cols - 1;\n                startCol = currentCol;\n                currentRow--;\n            }\n        }\n        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n    };\n    AltClickHandler.prototype._sequence = function (direction) {\n        var mod = this._terminal.applicationCursor ? 'O' : '[';\n        return EscapeSequences_1.C0.ESC + mod + direction;\n    };\n    return AltClickHandler;\n}());\nexports.AltClickHandler = AltClickHandler;\nfunction repeat(count, str) {\n    count = Math.floor(count);\n    var rpt = '';\n    for (var i = 0; i < count; i++) {\n        rpt += str;\n    }\n    return rpt;\n}\n\n},{\"../common/data/EscapeSequences\":28}],36:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AddonManager = (function () {\n    function AddonManager() {\n        this._addons = [];\n    }\n    AddonManager.prototype.dispose = function () {\n        for (var i = this._addons.length - 1; i >= 0; i--) {\n            this._addons[i].instance.dispose();\n        }\n    };\n    AddonManager.prototype.loadAddon = function (terminal, instance) {\n        var _this = this;\n        var loadedAddon = {\n            instance: instance,\n            dispose: instance.dispose,\n            isDisposed: false\n        };\n        this._addons.push(loadedAddon);\n        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };\n        instance.activate(terminal);\n    };\n    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {\n        if (loadedAddon.isDisposed) {\n            return;\n        }\n        var index = -1;\n        for (var i = 0; i < this._addons.length; i++) {\n            if (this._addons[i] === loadedAddon) {\n                index = i;\n                break;\n            }\n        }\n        if (index === -1) {\n            throw new Error('Could not dispose an addon that has not been loaded');\n        }\n        loadedAddon.isDisposed = true;\n        loadedAddon.dispose.apply(loadedAddon.instance);\n        this._addons.splice(index, 1);\n    };\n    return AddonManager;\n}());\nexports.AddonManager = AddonManager;\n\n},{}],37:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = require(\"../Terminal\");\nvar Strings = require(\"../Strings\");\nvar AddonManager_1 = require(\"./AddonManager\");\nvar Terminal = (function () {\n    function Terminal(options) {\n        this._core = new Terminal_1.Terminal(options);\n        this._addonManager = new AddonManager_1.AddonManager();\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._core.onCursorMove; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._core.onLineFeed; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._core.onSelectionChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._core.onData; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._core.onTitleChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._core.onScroll; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._core.onKey; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._core.onRender; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._core.onResize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"element\", {\n        get: function () { return this._core.element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"textarea\", {\n        get: function () { return this._core.textarea; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"rows\", {\n        get: function () { return this._core.rows; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"cols\", {\n        get: function () { return this._core.cols; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () { return new BufferApiView(this._core.buffer); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () { return this._core.markers; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.blur = function () {\n        this._core.blur();\n    };\n    Terminal.prototype.focus = function () {\n        this._core.focus();\n    };\n    Terminal.prototype.on = function (type, listener) {\n        this._core.on(type, listener);\n    };\n    Terminal.prototype.off = function (type, listener) {\n        this._core.off(type, listener);\n    };\n    Terminal.prototype.emit = function (type, data) {\n        this._core.emit(type, data);\n    };\n    Terminal.prototype.addDisposableListener = function (type, handler) {\n        return this._core.addDisposableListener(type, handler);\n    };\n    Terminal.prototype.resize = function (columns, rows) {\n        this._core.resize(columns, rows);\n    };\n    Terminal.prototype.writeln = function (data) {\n        this._core.writeln(data);\n    };\n    Terminal.prototype.open = function (parent) {\n        this._core.open(parent);\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._core.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._core.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        return this._core.registerLinkMatcher(regex, handler, options);\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        this._core.deregisterLinkMatcher(matcherId);\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        return this._core.registerCharacterJoiner(handler);\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        this._core.deregisterCharacterJoiner(joinerId);\n    };\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        return this._core.addMarker(cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this._core.hasSelection();\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this._core.select(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this._core.getSelection();\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        return this._core.getSelectionPosition();\n    };\n    Terminal.prototype.clearSelection = function () {\n        this._core.clearSelection();\n    };\n    Terminal.prototype.selectAll = function () {\n        this._core.selectAll();\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        this._core.selectLines(start, end);\n    };\n    Terminal.prototype.dispose = function () {\n        this._addonManager.dispose();\n        this._core.dispose();\n    };\n    Terminal.prototype.destroy = function () {\n        this._core.destroy();\n    };\n    Terminal.prototype.scrollLines = function (amount) {\n        this._core.scrollLines(amount);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this._core.scrollPages(pageCount);\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this._core.scrollToTop();\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this._core.scrollToBottom();\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        this._core.scrollToLine(line);\n    };\n    Terminal.prototype.clear = function () {\n        this._core.clear();\n    };\n    Terminal.prototype.write = function (data) {\n        this._core.write(data);\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        this._core.writeUtf8(data);\n    };\n    Terminal.prototype.getOption = function (key) {\n        return this._core.getOption(key);\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        this._core.setOption(key, value);\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        this._core.refresh(start, end);\n    };\n    Terminal.prototype.reset = function () {\n        this._core.reset();\n    };\n    Terminal.applyAddon = function (addon) {\n        addon.apply(Terminal);\n    };\n    Terminal.prototype.loadAddon = function (addon) {\n        return this._addonManager.loadAddon(this, addon);\n    };\n    Object.defineProperty(Terminal, \"strings\", {\n        get: function () {\n            return Strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nvar BufferApiView = (function () {\n    function BufferApiView(_buffer) {\n        this._buffer = _buffer;\n    }\n    Object.defineProperty(BufferApiView.prototype, \"cursorY\", {\n        get: function () { return this._buffer.y; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"cursorX\", {\n        get: function () { return this._buffer.x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"viewportY\", {\n        get: function () { return this._buffer.ydisp; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"baseY\", {\n        get: function () { return this._buffer.ybase; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"length\", {\n        get: function () { return this._buffer.lines.length; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferApiView.prototype.getLine = function (y) {\n        var line = this._buffer.lines.get(y);\n        if (!line) {\n            return undefined;\n        }\n        return new BufferLineApiView(line);\n    };\n    return BufferApiView;\n}());\nvar BufferLineApiView = (function () {\n    function BufferLineApiView(_line) {\n        this._line = _line;\n    }\n    Object.defineProperty(BufferLineApiView.prototype, \"isWrapped\", {\n        get: function () { return this._line.isWrapped; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferLineApiView.prototype.getCell = function (x) {\n        if (x < 0 || x >= this._line.length) {\n            return undefined;\n        }\n        return new BufferCellApiView(this._line, x);\n    };\n    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {\n        return this._line.translateToString(trimRight, startColumn, endColumn);\n    };\n    return BufferLineApiView;\n}());\nvar BufferCellApiView = (function () {\n    function BufferCellApiView(_line, _x) {\n        this._line = _line;\n        this._x = _x;\n    }\n    Object.defineProperty(BufferCellApiView.prototype, \"char\", {\n        get: function () { return this._line.getString(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferCellApiView.prototype, \"width\", {\n        get: function () { return this._line.getWidth(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    return BufferCellApiView;\n}());\n\n},{\"../Strings\":16,\"../Terminal\":17,\"./AddonManager\":36}],38:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../common/Types\");\nvar Types_2 = require(\"./atlas/Types\");\nvar CharAtlasCache_1 = require(\"./atlas/CharAtlasCache\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BaseRenderLayer = (function () {\n    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {\n        this._container = _container;\n        this._alpha = _alpha;\n        this._colors = _colors;\n        this._scaledCharWidth = 0;\n        this._scaledCharHeight = 0;\n        this._scaledCellWidth = 0;\n        this._scaledCellHeight = 0;\n        this._scaledCharLeft = 0;\n        this._scaledCharTop = 0;\n        this._currentGlyphIdentifier = {\n            chars: '',\n            code: 0,\n            bg: 0,\n            fg: 0,\n            bold: false,\n            dim: false,\n            italic: false\n        };\n        this._canvas = document.createElement('canvas');\n        this._canvas.classList.add(\"xterm-\" + id + \"-layer\");\n        this._canvas.style.zIndex = zIndex.toString();\n        this._initCanvas();\n        this._container.appendChild(this._canvas);\n    }\n    BaseRenderLayer.prototype.dispose = function () {\n        this._container.removeChild(this._canvas);\n        if (this._charAtlas) {\n            this._charAtlas.dispose();\n        }\n    };\n    BaseRenderLayer.prototype._initCanvas = function () {\n        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });\n        if (!this._alpha) {\n            this.clearAll();\n        }\n    };\n    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };\n    BaseRenderLayer.prototype.onBlur = function (terminal) { };\n    BaseRenderLayer.prototype.onFocus = function (terminal) { };\n    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };\n    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };\n    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n    };\n    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {\n        this._refreshCharAtlas(terminal, colorSet);\n    };\n    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {\n        if (alpha === this._alpha) {\n            return;\n        }\n        var oldCanvas = this._canvas;\n        this._alpha = alpha;\n        this._canvas = this._canvas.cloneNode();\n        this._initCanvas();\n        this._container.replaceChild(this._canvas, oldCanvas);\n        this._refreshCharAtlas(terminal, this._colors);\n        this.onGridChanged(terminal, 0, terminal.rows - 1);\n    };\n    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {\n        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n            return;\n        }\n        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n        this._charAtlas.warmUp();\n    };\n    BaseRenderLayer.prototype.resize = function (terminal, dim) {\n        this._scaledCellWidth = dim.scaledCellWidth;\n        this._scaledCellHeight = dim.scaledCellHeight;\n        this._scaledCharWidth = dim.scaledCharWidth;\n        this._scaledCharHeight = dim.scaledCharHeight;\n        this._scaledCharLeft = dim.scaledCharLeft;\n        this._scaledCharTop = dim.scaledCharTop;\n        this._canvas.width = dim.scaledCanvasWidth;\n        this._canvas.height = dim.scaledCanvasHeight;\n        this._canvas.style.width = dim.canvasWidth + \"px\";\n        this._canvas.style.height = dim.canvasHeight + \"px\";\n        if (!this._alpha) {\n            this.clearAll();\n        }\n        this._refreshCharAtlas(terminal, this._colors);\n    };\n    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {\n        if (width === void 0) { width = 1; }\n        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {\n        this._ctx.lineWidth = window.devicePixelRatio;\n        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.clearAll = function () {\n        if (this._alpha) {\n            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n    };\n    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {\n        if (this._alpha) {\n            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n    };\n    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, cell, x, y) {\n        this._ctx.font = this._getFont(terminal, false, false);\n        this._ctx.textBaseline = 'middle';\n        this._clipRow(terminal, y);\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n    };\n    BaseRenderLayer.prototype.drawChars = function (terminal, cell, x, y) {\n        if (cell.isFgRGB() || cell.isBgRGB()) {\n            this._drawUncachedChars(terminal, cell, x, y);\n            return;\n        }\n        var fg;\n        var bg;\n        if (cell.isInverse()) {\n            fg = (cell.isBgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();\n            bg = (cell.isFgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();\n        }\n        else {\n            bg = (cell.isBgDefault()) ? Types_1.DEFAULT_COLOR : cell.getBgColor();\n            fg = (cell.isFgDefault()) ? Types_1.DEFAULT_COLOR : cell.getFgColor();\n        }\n        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Types_2.INVERTED_DEFAULT_COLOR;\n        fg += drawInBrightColor ? 8 : 0;\n        this._currentGlyphIdentifier.chars = cell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n        this._currentGlyphIdentifier.code = cell.getCode() || BufferLine_1.WHITESPACE_CELL_CODE;\n        this._currentGlyphIdentifier.bg = bg;\n        this._currentGlyphIdentifier.fg = fg;\n        this._currentGlyphIdentifier.bold = cell.isBold() && terminal.options.enableBold;\n        this._currentGlyphIdentifier.dim = !!cell.isDim();\n        this._currentGlyphIdentifier.italic = !!cell.isItalic();\n        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        if (!atlasDidDraw) {\n            this._drawUncachedChars(terminal, cell, x, y);\n        }\n    };\n    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, cell, x, y) {\n        this._ctx.save();\n        this._ctx.font = this._getFont(terminal, cell.isBold() && terminal.options.enableBold, !!cell.isItalic());\n        this._ctx.textBaseline = 'middle';\n        if (cell.isInverse()) {\n            if (cell.isBgDefault()) {\n                this._ctx.fillStyle = this._colors.background.css;\n            }\n            else if (cell.isBgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else {\n                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;\n            }\n        }\n        else {\n            if (cell.isFgDefault()) {\n                this._ctx.fillStyle = this._colors.foreground.css;\n            }\n            else if (cell.isFgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n            }\n            else {\n                var fg = cell.getFgColor();\n                if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                    fg += 8;\n                }\n                this._ctx.fillStyle = this._colors.ansi[fg].css;\n            }\n        }\n        this._clipRow(terminal, y);\n        if (cell.isDim()) {\n            this._ctx.globalAlpha = Types_2.DIM_OPACITY;\n        }\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n        this._ctx.restore();\n    };\n    BaseRenderLayer.prototype._clipRow = function (terminal, y) {\n        this._ctx.beginPath();\n        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);\n        this._ctx.clip();\n    };\n    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {\n        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n        var fontStyle = isItalic ? 'italic' : '';\n        return fontStyle + \" \" + fontWeight + \" \" + terminal.options.fontSize * window.devicePixelRatio + \"px \" + terminal.options.fontFamily;\n    };\n    return BaseRenderLayer;\n}());\nexports.BaseRenderLayer = BaseRenderLayer;\n\n},{\"../common/Types\":27,\"../core/buffer/BufferLine\":29,\"./atlas/CharAtlasCache\":48,\"./atlas/Types\":55}],39:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar JoinedCellData = (function (_super) {\n    __extends(JoinedCellData, _super);\n    function JoinedCellData(firstCell, chars, width) {\n        var _this = _super.call(this) || this;\n        _this.content = 0;\n        _this.combinedData = '';\n        _this.fg = firstCell.fg;\n        _this.bg = firstCell.bg;\n        _this.combinedData = chars;\n        _this._width = width;\n        return _this;\n    }\n    JoinedCellData.prototype.isCombined = function () {\n        return 2097152;\n    };\n    JoinedCellData.prototype.getWidth = function () {\n        return this._width;\n    };\n    JoinedCellData.prototype.getChars = function () {\n        return this.combinedData;\n    };\n    JoinedCellData.prototype.getCode = function () {\n        return 0x1FFFFF;\n    };\n    JoinedCellData.prototype.setFromCharData = function (value) {\n        throw new Error('not implemented');\n    };\n    JoinedCellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return JoinedCellData;\n}(BufferLine_1.AttributeData));\nexports.JoinedCellData = JoinedCellData;\nvar CharacterJoinerRegistry = (function () {\n    function CharacterJoinerRegistry(_terminal) {\n        this._terminal = _terminal;\n        this._characterJoiners = [];\n        this._nextCharacterJoinerId = 0;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {\n        var joiner = {\n            id: this._nextCharacterJoinerId++,\n            handler: handler\n        };\n        this._characterJoiners.push(joiner);\n        return joiner.id;\n    };\n    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {\n        for (var i = 0; i < this._characterJoiners.length; i++) {\n            if (this._characterJoiners[i].id === joinerId) {\n                this._characterJoiners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {\n        if (this._characterJoiners.length === 0) {\n            return [];\n        }\n        var line = this._terminal.buffer.lines.get(row);\n        if (line.length === 0) {\n            return [];\n        }\n        var ranges = [];\n        var lineStr = line.translateToString(true);\n        var rangeStartColumn = 0;\n        var currentStringIndex = 0;\n        var rangeStartStringIndex = 0;\n        var rangeAttrFG = line.getFg(0);\n        var rangeAttrBG = line.getBg(0);\n        for (var x = 0; x < line.getTrimmedLength(); x++) {\n            line.loadCell(x, this._workCell);\n            if (this._workCell.getWidth() === 0) {\n                continue;\n            }\n            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n                if (x - rangeStartColumn > 1) {\n                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n                    for (var i = 0; i < joinedRanges.length; i++) {\n                        ranges.push(joinedRanges[i]);\n                    }\n                }\n                rangeStartColumn = x;\n                rangeStartStringIndex = currentStringIndex;\n                rangeAttrFG = this._workCell.fg;\n                rangeAttrBG = this._workCell.bg;\n            }\n            currentStringIndex += this._workCell.getChars().length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n        }\n        if (this._terminal.cols - rangeStartColumn > 1) {\n            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n            for (var i = 0; i < joinedRanges.length; i++) {\n                ranges.push(joinedRanges[i]);\n            }\n        }\n        return ranges;\n    };\n    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {\n        var text = line.substring(startIndex, endIndex);\n        var joinedRanges = this._characterJoiners[0].handler(text);\n        for (var i = 1; i < this._characterJoiners.length; i++) {\n            var joinerRanges = this._characterJoiners[i].handler(text);\n            for (var j = 0; j < joinerRanges.length; j++) {\n                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);\n            }\n        }\n        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n        return joinedRanges;\n    };\n    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {\n        var currentRangeIndex = 0;\n        var currentRangeStarted = false;\n        var currentStringIndex = 0;\n        var currentRange = ranges[currentRangeIndex];\n        if (!currentRange) {\n            return;\n        }\n        for (var x = startCol; x < this._terminal.cols; x++) {\n            var width = line.getWidth(x);\n            var length_1 = line.getString(x).length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n            if (width === 0) {\n                continue;\n            }\n            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n                currentRange[0] = x;\n                currentRangeStarted = true;\n            }\n            if (currentRange[1] <= currentStringIndex) {\n                currentRange[1] = x;\n                currentRange = ranges[++currentRangeIndex];\n                if (!currentRange) {\n                    break;\n                }\n                if (currentRange[0] <= currentStringIndex) {\n                    currentRange[0] = x;\n                    currentRangeStarted = true;\n                }\n                else {\n                    currentRangeStarted = false;\n                }\n            }\n            currentStringIndex += length_1;\n        }\n        if (currentRange) {\n            currentRange[1] = this._terminal.cols;\n        }\n    };\n    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {\n        var inRange = false;\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (!inRange) {\n                if (newRange[1] <= range[0]) {\n                    ranges.splice(i, 0, newRange);\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    return ranges;\n                }\n                if (newRange[0] < range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    inRange = true;\n                }\n                continue;\n            }\n            else {\n                if (newRange[1] <= range[0]) {\n                    ranges[i - 1][1] = newRange[1];\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n                    ranges.splice(i, 1);\n                    inRange = false;\n                    return ranges;\n                }\n                ranges.splice(i, 1);\n                i--;\n            }\n        }\n        if (inRange) {\n            ranges[ranges.length - 1][1] = newRange[1];\n        }\n        else {\n            ranges.push(newRange);\n        }\n        return ranges;\n    };\n    return CharacterJoinerRegistry;\n}());\nexports.CharacterJoinerRegistry = CharacterJoinerRegistry;\n\n},{\"../core/buffer/BufferLine\":29}],40:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BLINK_INTERVAL = 600;\nvar CursorRenderLayer = (function (_super) {\n    __extends(CursorRenderLayer, _super);\n    function CursorRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;\n        _this._cell = new BufferLine_1.CellData();\n        _this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n        _this._cursorRenderers = {\n            'bar': _this._renderBarCursor.bind(_this),\n            'block': _this._renderBlockCursor.bind(_this),\n            'underline': _this._renderUnderlineCursor.bind(_this)\n        };\n        return _this;\n    }\n    CursorRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n    };\n    CursorRenderLayer.prototype.reset = function (terminal) {\n        this._clearCursor();\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.dispose();\n            this._cursorBlinkStateManager = null;\n            this.onOptionsChanged(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onBlur = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.pause();\n        }\n        terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n    };\n    CursorRenderLayer.prototype.onFocus = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.resume(terminal);\n        }\n        else {\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        var _this = this;\n        if (terminal.options.cursorBlink) {\n            if (!this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {\n                    _this._render(terminal, true);\n                });\n            }\n        }\n        else {\n            if (this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager.dispose();\n                this._cursorBlinkStateManager = null;\n            }\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onCursorMove = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {\n        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n            this._render(terminal, false);\n        }\n        else {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {\n        if (!terminal.cursorState || terminal.cursorHidden) {\n            this._clearCursor();\n            return;\n        }\n        var cursorY = terminal.buffer.ybase + terminal.buffer.y;\n        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {\n            this._clearCursor();\n            return;\n        }\n        terminal.buffer.lines.get(cursorY).loadCell(terminal.buffer.x, this._cell);\n        if (this._cell.content === undefined) {\n            return;\n        }\n        if (!terminal.isFocused) {\n            this._clearCursor();\n            this._ctx.save();\n            this._ctx.fillStyle = this._colors.cursor.css;\n            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n            this._ctx.restore();\n            this._state.x = terminal.buffer.x;\n            this._state.y = viewportRelativeCursorY;\n            this._state.isFocused = false;\n            this._state.style = terminal.options.cursorStyle;\n            this._state.width = this._cell.getWidth();\n            return;\n        }\n        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n            this._clearCursor();\n            return;\n        }\n        if (this._state) {\n            if (this._state.x === terminal.buffer.x &&\n                this._state.y === viewportRelativeCursorY &&\n                this._state.isFocused === terminal.isFocused &&\n                this._state.style === terminal.options.cursorStyle &&\n                this._state.width === this._cell.getWidth()) {\n                return;\n            }\n            this._clearCursor();\n        }\n        this._ctx.save();\n        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n        this._ctx.restore();\n        this._state.x = terminal.buffer.x;\n        this._state.y = viewportRelativeCursorY;\n        this._state.isFocused = false;\n        this._state.style = terminal.options.cursorStyle;\n        this._state.width = this._cell.getWidth();\n    };\n    CursorRenderLayer.prototype._clearCursor = function () {\n        if (this._state) {\n            this.clearCells(this._state.x, this._state.y, this._state.width, 1);\n            this._state = {\n                x: null,\n                y: null,\n                isFocused: null,\n                style: null,\n                width: null\n            };\n        }\n    };\n    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillLeftLineAtCell(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillCells(x, y, cell.getWidth(), 1);\n        this._ctx.fillStyle = this._colors.cursorAccent.css;\n        this.fillCharTrueColor(terminal, cell, x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillBottomLineAtCells(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.strokeStyle = this._colors.cursor.css;\n        this.strokeRectAtCell(x, y, cell.getWidth(), 1);\n        this._ctx.restore();\n    };\n    return CursorRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.CursorRenderLayer = CursorRenderLayer;\nvar CursorBlinkStateManager = (function () {\n    function CursorBlinkStateManager(terminal, _renderCallback) {\n        this._renderCallback = _renderCallback;\n        this.isCursorVisible = true;\n        if (terminal.isFocused) {\n            this._restartInterval();\n        }\n    }\n    Object.defineProperty(CursorBlinkStateManager.prototype, \"isPaused\", {\n        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },\n        enumerable: true,\n        configurable: true\n    });\n    CursorBlinkStateManager.prototype.dispose = function () {\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {\n        var _this = this;\n        if (this.isPaused) {\n            return;\n        }\n        this._animationTimeRestarted = Date.now();\n        this.isCursorVisible = true;\n        if (!this._animationFrame) {\n            this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n        }\n    };\n    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {\n        var _this = this;\n        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n        }\n        this._blinkStartTimeout = setTimeout(function () {\n            if (_this._animationTimeRestarted) {\n                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                _this._animationTimeRestarted = null;\n                if (time > 0) {\n                    _this._restartInterval(time);\n                    return;\n                }\n            }\n            _this.isCursorVisible = false;\n            _this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n            _this._blinkInterval = setInterval(function () {\n                if (_this._animationTimeRestarted) {\n                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                    _this._animationTimeRestarted = null;\n                    _this._restartInterval(time);\n                    return;\n                }\n                _this.isCursorVisible = !_this.isCursorVisible;\n                _this._animationFrame = window.requestAnimationFrame(function () {\n                    _this._renderCallback();\n                    _this._animationFrame = null;\n                });\n            }, BLINK_INTERVAL);\n        }, timeToStart);\n    };\n    CursorBlinkStateManager.prototype.pause = function () {\n        this.isCursorVisible = true;\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.resume = function (terminal) {\n        this._animationTimeRestarted = null;\n        this._restartInterval();\n        this.restartBlinkAnimation(terminal);\n    };\n    return CursorBlinkStateManager;\n}());\n\n},{\"../core/buffer/BufferLine\":29,\"./BaseRenderLayer\":38}],41:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache = (function () {\n    function GridCache() {\n        this.cache = [];\n    }\n    GridCache.prototype.resize = function (width, height) {\n        for (var x = 0; x < width; x++) {\n            if (this.cache.length <= x) {\n                this.cache.push([]);\n            }\n            for (var y = this.cache[x].length; y < height; y++) {\n                this.cache[x].push(null);\n            }\n            this.cache[x].length = height;\n        }\n        this.cache.length = width;\n    };\n    GridCache.prototype.clear = function () {\n        for (var x = 0; x < this.cache.length; x++) {\n            for (var y = 0; y < this.cache[x].length; y++) {\n                this.cache[x][y] = null;\n            }\n        }\n    };\n    return GridCache;\n}());\nexports.GridCache = GridCache;\n\n},{}],42:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar LinkRenderLayer = (function (_super) {\n    __extends(LinkRenderLayer, _super);\n    function LinkRenderLayer(container, zIndex, colors, terminal) {\n        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;\n        _this._state = null;\n        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    LinkRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = null;\n    };\n    LinkRenderLayer.prototype.reset = function (terminal) {\n        this._clearCurrentLink();\n    };\n    LinkRenderLayer.prototype._clearCurrentLink = function () {\n        if (this._state) {\n            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n            var middleRowCount = this._state.y2 - this._state.y1 - 1;\n            if (middleRowCount > 0) {\n                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n            }\n            this.clearCells(0, this._state.y2, this._state.x2, 1);\n            this._state = null;\n        }\n    };\n    LinkRenderLayer.prototype._onLinkHover = function (e) {\n        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(e.fg)) {\n            this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        if (e.y1 === e.y2) {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n        }\n        else {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n            for (var y = e.y1 + 1; y < e.y2; y++) {\n                this.fillBottomLineAtCells(0, y, e.cols);\n            }\n            this.fillBottomLineAtCells(0, e.y2, e.x2);\n        }\n        this._state = e;\n    };\n    LinkRenderLayer.prototype._onLinkLeave = function (e) {\n        this._clearCurrentLink();\n    };\n    return LinkRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.LinkRenderLayer = LinkRenderLayer;\n\n},{\"./BaseRenderLayer\":38,\"./atlas/CharAtlasUtils\":50,\"./atlas/Types\":55}],43:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer_1 = require(\"../ui/RenderDebouncer\");\nvar EventEmitter2_1 = require(\"../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"../ui/ScreenDprMonitor\");\nvar Lifecycle_2 = require(\"../ui/Lifecycle\");\nvar RenderCoordinator = (function (_super) {\n    __extends(RenderCoordinator, _super);\n    function RenderCoordinator(_renderer, _rowCount, screenElement) {\n        var _this = _super.call(this) || this;\n        _this._renderer = _renderer;\n        _this._rowCount = _rowCount;\n        _this._isPaused = false;\n        _this._needsFullRefresh = false;\n        _this._canvasWidth = 0;\n        _this._canvasHeight = 0;\n        _this._onDimensionsChange = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onRefreshRequest = new EventEmitter2_1.EventEmitter2();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });\n        _this.register(_this._renderDebouncer);\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this._screenDprMonitor.setListener(function () { return _this._renderer.onDevicePixelRatioChange(); });\n        _this.register(_this._screenDprMonitor);\n        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this._renderer.onDevicePixelRatioChange(); }));\n        if ('IntersectionObserver' in window) {\n            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });\n            observer_1.observe(screenElement);\n            _this.register({ dispose: function () { return observer_1.disconnect(); } });\n        }\n        return _this;\n    }\n    Object.defineProperty(RenderCoordinator.prototype, \"onDimensionsChange\", {\n        get: function () { return this._onDimensionsChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRefreshRequest\", {\n        get: function () { return this._onRefreshRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"dimensions\", {\n        get: function () { return this._renderer.dimensions; },\n        enumerable: true,\n        configurable: true\n    });\n    RenderCoordinator.prototype._onIntersectionChange = function (entry) {\n        this._isPaused = entry.intersectionRatio === 0;\n        if (!this._isPaused && this._needsFullRefresh) {\n            this.refreshRows(0, this._rowCount - 1);\n            this._needsFullRefresh = false;\n        }\n    };\n    RenderCoordinator.prototype.refreshRows = function (start, end) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n            return;\n        }\n        this._renderDebouncer.refresh(start, end, this._rowCount);\n    };\n    RenderCoordinator.prototype._renderRows = function (start, end) {\n        this._renderer.renderRows(start, end);\n        this._onRender.fire({ start: start, end: end });\n    };\n    RenderCoordinator.prototype.resize = function (cols, rows) {\n        this._rowCount = rows;\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype.changeOptions = function () {\n        this._renderer.onOptionsChanged();\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype._fireOnCanvasResize = function () {\n        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {\n            return;\n        }\n        this._onDimensionsChange.fire(this._renderer.dimensions);\n    };\n    RenderCoordinator.prototype.setRenderer = function (renderer) {\n        this._renderer.dispose();\n        this._renderer = renderer;\n    };\n    RenderCoordinator.prototype._fullRefresh = function () {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this.refreshRows(0, this._rowCount);\n        }\n    };\n    RenderCoordinator.prototype.setColors = function (colors) {\n        this._renderer.setColors(colors);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onDevicePixelRatioChange = function () {\n        this._renderer.onDevicePixelRatioChange();\n    };\n    RenderCoordinator.prototype.onResize = function (cols, rows) {\n        this._renderer.onResize(cols, rows);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onCharSizeChanged = function () {\n        this._renderer.onCharSizeChanged();\n    };\n    RenderCoordinator.prototype.onBlur = function () {\n        this._renderer.onBlur();\n    };\n    RenderCoordinator.prototype.onFocus = function () {\n        this._renderer.onFocus();\n    };\n    RenderCoordinator.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        this._renderer.onSelectionChanged(start, end, columnSelectMode);\n    };\n    RenderCoordinator.prototype.onCursorMove = function () {\n        this._renderer.onCursorMove();\n    };\n    RenderCoordinator.prototype.onOptionsChanged = function () {\n        this._renderer.onOptionsChanged();\n    };\n    RenderCoordinator.prototype.clear = function () {\n        this._renderer.clear();\n    };\n    RenderCoordinator.prototype.registerCharacterJoiner = function (handler) {\n        return this._renderer.registerCharacterJoiner(handler);\n    };\n    RenderCoordinator.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._renderer.deregisterCharacterJoiner(joinerId);\n    };\n    return RenderCoordinator;\n}(Lifecycle_1.Disposable));\nexports.RenderCoordinator = RenderCoordinator;\n\n},{\"../common/EventEmitter2\":23,\"../common/Lifecycle\":24,\"../ui/Lifecycle\":59,\"../ui/RenderDebouncer\":60,\"../ui/ScreenDprMonitor\":61}],44:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextRenderLayer_1 = require(\"./TextRenderLayer\");\nvar SelectionRenderLayer_1 = require(\"./SelectionRenderLayer\");\nvar CursorRenderLayer_1 = require(\"./CursorRenderLayer\");\nvar LinkRenderLayer_1 = require(\"./LinkRenderLayer\");\nvar CharacterJoinerRegistry_1 = require(\"../renderer/CharacterJoinerRegistry\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar Renderer = (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);\n        _this._renderLayers = [\n            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this._colors, _this._characterJoinerRegistry, allowTransparency),\n            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this._colors),\n            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this._colors, _this._terminal),\n            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this._colors)\n        ];\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._devicePixelRatio = window.devicePixelRatio;\n        _this._updateDimensions();\n        _this.onOptionsChanged();\n        return _this;\n    }\n    Renderer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._renderLayers.forEach(function (l) { return l.dispose(); });\n    };\n    Renderer.prototype.onDevicePixelRatioChange = function () {\n        if (this._devicePixelRatio !== window.devicePixelRatio) {\n            this._devicePixelRatio = window.devicePixelRatio;\n            this.onResize(this._terminal.cols, this._terminal.rows);\n        }\n    };\n    Renderer.prototype.setColors = function (colors) {\n        var _this = this;\n        this._colors = colors;\n        this._renderLayers.forEach(function (l) {\n            l.setColors(_this._terminal, _this._colors);\n            l.reset(_this._terminal);\n        });\n    };\n    Renderer.prototype.onResize = function (cols, rows) {\n        var _this = this;\n        this._updateDimensions();\n        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    Renderer.prototype.onCharSizeChanged = function () {\n        this.onResize(this._terminal.cols, this._terminal.rows);\n    };\n    Renderer.prototype.onBlur = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onBlur(_this._terminal); });\n    };\n    Renderer.prototype.onFocus = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onFocus(_this._terminal); });\n    };\n    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        var _this = this;\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });\n    };\n    Renderer.prototype.onCursorMove = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });\n    };\n    Renderer.prototype.onOptionsChanged = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });\n    };\n    Renderer.prototype.clear = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.reset(_this._terminal); });\n    };\n    Renderer.prototype._runOperation = function (operation) {\n        this._renderLayers.forEach(function (l) { return operation(l); });\n    };\n    Renderer.prototype.renderRows = function (start, end) {\n        var _this = this;\n        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });\n    };\n    Renderer.prototype._updateDimensions = function () {\n        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {\n            return;\n        }\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);\n        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;\n        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n    };\n    Renderer.prototype.registerCharacterJoiner = function (handler) {\n        return this._characterJoinerRegistry.registerCharacterJoiner(handler);\n    };\n    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);\n    };\n    return Renderer;\n}(Lifecycle_1.Disposable));\nexports.Renderer = Renderer;\n\n},{\"../common/Lifecycle\":24,\"../renderer/CharacterJoinerRegistry\":39,\"./CursorRenderLayer\":40,\"./LinkRenderLayer\":42,\"./SelectionRenderLayer\":45,\"./TextRenderLayer\":46}],45:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar SelectionRenderLayer = (function (_super) {\n    __extends(SelectionRenderLayer, _super);\n    function SelectionRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;\n        _this._clearState();\n        return _this;\n    }\n    SelectionRenderLayer.prototype._clearState = function () {\n        this._state = {\n            start: null,\n            end: null,\n            columnSelectMode: null,\n            ydisp: null\n        };\n    };\n    SelectionRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._clearState();\n    };\n    SelectionRenderLayer.prototype.reset = function (terminal) {\n        if (this._state.start && this._state.end) {\n            this._clearState();\n            this.clearAll();\n        }\n    };\n    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {\n            return;\n        }\n        this.clearAll();\n        if (!start || !end) {\n            this._clearState();\n            return;\n        }\n        var viewportStartRow = start[1] - terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        this._ctx.fillStyle = this._colors.selection.css;\n        if (columnSelectMode) {\n            var startCol = start[0];\n            var width = end[0] - startCol;\n            var height = viewportCappedEndRow - viewportCappedStartRow + 1;\n            this.fillCells(startCol, viewportCappedStartRow, width, height);\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;\n            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;\n                this.fillCells(0, viewportCappedEndRow, endCol, 1);\n            }\n        }\n        this._state.start = [start[0], start[1]];\n        this._state.end = [end[0], end[1]];\n        this._state.columnSelectMode = columnSelectMode;\n        this._state.ydisp = terminal.buffer.ydisp;\n    };\n    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {\n        return !this._areCoordinatesEqual(start, this._state.start) ||\n            !this._areCoordinatesEqual(end, this._state.end) ||\n            columnSelectMode !== this._state.columnSelectMode ||\n            ydisp !== this._state.ydisp;\n    };\n    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {\n        if (!coord1 || !coord2) {\n            return false;\n        }\n        return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n    };\n    return SelectionRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.SelectionRenderLayer = SelectionRenderLayer;\n\n},{\"./BaseRenderLayer\":38}],46:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache_1 = require(\"./GridCache\");\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar CharacterJoinerRegistry_1 = require(\"./CharacterJoinerRegistry\");\nvar TextRenderLayer = (function (_super) {\n    __extends(TextRenderLayer, _super);\n    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {\n        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;\n        _this._characterOverlapCache = {};\n        _this._workCell = new BufferLine_1.CellData();\n        _this._state = new GridCache_1.GridCache();\n        _this._characterJoinerRegistry = characterJoinerRegistry;\n        return _this;\n    }\n    TextRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        var terminalFont = this._getFont(terminal, false, false);\n        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n            this._characterWidth = dim.scaledCharWidth;\n            this._characterFont = terminalFont;\n            this._characterOverlapCache = {};\n        }\n        this._state.clear();\n        this._state.resize(terminal.cols, terminal.rows);\n    };\n    TextRenderLayer.prototype.reset = function (terminal) {\n        this._state.clear();\n        this.clearAll();\n    };\n    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {\n        for (var y = firstRow; y <= lastRow; y++) {\n            var row = y + terminal.buffer.ydisp;\n            var line = terminal.buffer.lines.get(row);\n            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];\n            for (var x = 0; x < terminal.cols; x++) {\n                line.loadCell(x, this._workCell);\n                var cell = this._workCell;\n                var isJoined = false;\n                var lastCharX = x;\n                if (cell.getWidth() === 0) {\n                    continue;\n                }\n                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n                    isJoined = true;\n                    var range = joinedRanges.shift();\n                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);\n                    lastCharX = range[1] - 1;\n                }\n                if (!isJoined && this._isOverlapping(cell)) {\n                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === BufferLine_1.NULL_CELL_CODE) {\n                        cell.content &= ~12582912;\n                        cell.content |= 2 << 22;\n                    }\n                }\n                callback(cell, x, y);\n                x = lastCharX;\n            }\n        }\n    };\n    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        var ctx = this._ctx;\n        var cols = terminal.cols;\n        var startX = 0;\n        var startY = 0;\n        var prevFillStyle = null;\n        ctx.save();\n        this._forEachCell(terminal, firstRow, lastRow, null, function (cell, x, y) {\n            var nextFillStyle = null;\n            if (cell.isInverse()) {\n                if (cell.isFgDefault()) {\n                    nextFillStyle = _this._colors.foreground.css;\n                }\n                else if (cell.isFgRGB()) {\n                    nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                }\n                else {\n                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;\n                }\n            }\n            else if (cell.isBgRGB()) {\n                nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else if (cell.isBgPalette()) {\n                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;\n            }\n            if (prevFillStyle === null) {\n                startX = x;\n                startY = y;\n            }\n            if (y !== startY) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, cols - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            else if (prevFillStyle !== nextFillStyle) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, x - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            prevFillStyle = nextFillStyle;\n        });\n        if (prevFillStyle !== null) {\n            ctx.fillStyle = prevFillStyle;\n            this.fillCells(startX, startY, cols - startX, 1);\n        }\n        ctx.restore();\n    };\n    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {\n            if (cell.isInvisible()) {\n                return;\n            }\n            _this.drawChars(terminal, cell, x, y);\n            if (cell.isUnderline()) {\n                _this._ctx.save();\n                if (cell.isInverse()) {\n                    if (cell.isBgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.background.css;\n                    }\n                    else if (cell.isBgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n                    }\n                    else {\n                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;\n                    }\n                }\n                else {\n                    if (cell.isFgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.foreground.css;\n                    }\n                    else if (cell.isFgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                    }\n                    else {\n                        var fg = cell.getFgColor();\n                        if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                            fg += 8;\n                        }\n                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;\n                    }\n                }\n                _this.fillBottomLineAtCells(x, y, cell.getWidth());\n                _this._ctx.restore();\n            }\n        });\n    };\n    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {\n        if (this._state.cache.length === 0) {\n            return;\n        }\n        if (this._charAtlas) {\n            this._charAtlas.beginFrame();\n        }\n        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);\n        this._drawBackground(terminal, firstRow, lastRow);\n        this._drawForeground(terminal, firstRow, lastRow);\n    };\n    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        this.setTransparency(terminal, terminal.options.allowTransparency);\n    };\n    TextRenderLayer.prototype._isOverlapping = function (cell) {\n        if (cell.getWidth() !== 1) {\n            return false;\n        }\n        if (cell.getCode() < 256) {\n            return false;\n        }\n        var chars = cell.getChars();\n        if (this._characterOverlapCache.hasOwnProperty(chars)) {\n            return this._characterOverlapCache[chars];\n        }\n        this._ctx.save();\n        this._ctx.font = this._characterFont;\n        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n        this._ctx.restore();\n        this._characterOverlapCache[chars] = overlaps;\n        return overlaps;\n    };\n    return TextRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.TextRenderLayer = TextRenderLayer;\n\n},{\"../core/buffer/BufferLine\":29,\"./BaseRenderLayer\":38,\"./CharacterJoinerRegistry\":39,\"./GridCache\":41}],47:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas = (function () {\n    function BaseCharAtlas() {\n        this._didWarmUp = false;\n    }\n    BaseCharAtlas.prototype.dispose = function () { };\n    BaseCharAtlas.prototype.warmUp = function () {\n        if (!this._didWarmUp) {\n            this._doWarmUp();\n            this._didWarmUp = true;\n        }\n    };\n    BaseCharAtlas.prototype._doWarmUp = function () { };\n    BaseCharAtlas.prototype.beginFrame = function () { };\n    return BaseCharAtlas;\n}());\nexports.default = BaseCharAtlas;\n\n},{}],48:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar DynamicCharAtlas_1 = require(\"./DynamicCharAtlas\");\nvar NoneCharAtlas_1 = require(\"./NoneCharAtlas\");\nvar StaticCharAtlas_1 = require(\"./StaticCharAtlas\");\nvar charAtlasImplementations = {\n    'none': NoneCharAtlas_1.default,\n    'static': StaticCharAtlas_1.default,\n    'dynamic': DynamicCharAtlas_1.default\n};\nvar charAtlasCache = [];\nfunction acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {\n    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        var ownedByIndex = entry.ownedBy.indexOf(terminal);\n        if (ownedByIndex >= 0) {\n            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n                return entry.atlas;\n            }\n            if (entry.ownedBy.length === 1) {\n                entry.atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                entry.ownedBy.splice(ownedByIndex, 1);\n            }\n            break;\n        }\n    }\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n            entry.ownedBy.push(terminal);\n            return entry.atlas;\n        }\n    }\n    var newEntry = {\n        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),\n        config: newConfig,\n        ownedBy: [terminal]\n    };\n    charAtlasCache.push(newEntry);\n    return newEntry.atlas;\n}\nexports.acquireCharAtlas = acquireCharAtlas;\nfunction removeTerminalFromCache(terminal) {\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var index = charAtlasCache[i].ownedBy.indexOf(terminal);\n        if (index !== -1) {\n            if (charAtlasCache[i].ownedBy.length === 1) {\n                charAtlasCache[i].atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                charAtlasCache[i].ownedBy.splice(index, 1);\n            }\n            break;\n        }\n    }\n}\nexports.removeTerminalFromCache = removeTerminalFromCache;\n\n},{\"./CharAtlasUtils\":50,\"./DynamicCharAtlas\":51,\"./NoneCharAtlas\":53,\"./StaticCharAtlas\":54}],49:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Platform_1 = require(\"../../common/Platform\");\nvar Types_1 = require(\"./Types\");\nfunction generateStaticCharAtlasTexture(context, canvasFactory, config) {\n    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);\n    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });\n    ctx.fillStyle = config.colors.background.css;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    ctx.fillStyle = config.colors.foreground.css;\n    ctx.font = getFont(config.fontWeight, config);\n    ctx.textBaseline = 'middle';\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight / 2);\n        ctx.restore();\n    }\n    ctx.save();\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight * 1.5);\n        ctx.restore();\n    }\n    ctx.restore();\n    ctx.font = getFont(config.fontWeight, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2 + 16) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.restore();\n    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {\n        return canvas;\n    }\n    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    clearColor(charAtlasImageData, config.colors.background);\n    return context.createImageBitmap(charAtlasImageData);\n}\nexports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;\nfunction clearColor(imageData, color) {\n    var isEmpty = true;\n    var r = color.rgba >>> 24;\n    var g = color.rgba >>> 16 & 0xFF;\n    var b = color.rgba >>> 8 & 0xFF;\n    for (var offset = 0; offset < imageData.data.length; offset += 4) {\n        if (imageData.data[offset] === r &&\n            imageData.data[offset + 1] === g &&\n            imageData.data[offset + 2] === b) {\n            imageData.data[offset + 3] = 0;\n        }\n        else {\n            isEmpty = false;\n        }\n    }\n    return isEmpty;\n}\nexports.clearColor = clearColor;\nfunction getFont(fontWeight, config) {\n    return fontWeight + \" \" + config.fontSize * config.devicePixelRatio + \"px \" + config.fontFamily;\n}\n\n},{\"../../common/Platform\":25,\"./Types\":55}],50:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../../common/Types\");\nfunction generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {\n    var clonedColors = {\n        foreground: colors.foreground,\n        background: colors.background,\n        cursor: null,\n        cursorAccent: null,\n        selection: null,\n        ansi: colors.ansi.slice(0, 16)\n    };\n    return {\n        type: terminal.options.experimentalCharAtlas,\n        devicePixelRatio: window.devicePixelRatio,\n        scaledCharWidth: scaledCharWidth,\n        scaledCharHeight: scaledCharHeight,\n        fontFamily: terminal.options.fontFamily,\n        fontSize: terminal.options.fontSize,\n        fontWeight: terminal.options.fontWeight,\n        fontWeightBold: terminal.options.fontWeightBold,\n        allowTransparency: terminal.options.allowTransparency,\n        colors: clonedColors\n    };\n}\nexports.generateConfig = generateConfig;\nfunction configEquals(a, b) {\n    for (var i = 0; i < a.colors.ansi.length; i++) {\n        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n            return false;\n        }\n    }\n    return a.type === b.type &&\n        a.devicePixelRatio === b.devicePixelRatio &&\n        a.fontFamily === b.fontFamily &&\n        a.fontSize === b.fontSize &&\n        a.fontWeight === b.fontWeight &&\n        a.fontWeightBold === b.fontWeightBold &&\n        a.allowTransparency === b.allowTransparency &&\n        a.scaledCharWidth === b.scaledCharWidth &&\n        a.scaledCharHeight === b.scaledCharHeight &&\n        a.colors.foreground === b.colors.foreground &&\n        a.colors.background === b.colors.background;\n}\nexports.configEquals = configEquals;\nfunction is256Color(colorCode) {\n    return colorCode < Types_1.DEFAULT_COLOR;\n}\nexports.is256Color = is256Color;\n\n},{\"../../common/Types\":27}],51:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar ColorManager_1 = require(\"../../ui/ColorManager\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar LRUMap_1 = require(\"./LRUMap\");\nvar Platform_1 = require(\"../../common/Platform\");\nvar TEXTURE_WIDTH = 1024;\nvar TEXTURE_HEIGHT = 1024;\nvar TRANSPARENT_COLOR = {\n    css: 'rgba(0, 0, 0, 0)',\n    rgba: 0\n};\nvar FRAME_CACHE_DRAW_LIMIT = 100;\nvar GLYPH_BITMAP_COMMIT_DELAY = 100;\nfunction getGlyphCacheKey(glyph) {\n    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\nexports.getGlyphCacheKey = getGlyphCacheKey;\nvar DynamicCharAtlas = (function (_super) {\n    __extends(DynamicCharAtlas, _super);\n    function DynamicCharAtlas(document, _config) {\n        var _this = _super.call(this) || this;\n        _this._config = _config;\n        _this._drawToCacheCount = 0;\n        _this._glyphsWaitingOnBitmap = [];\n        _this._bitmapCommitTimeout = null;\n        _this._bitmap = null;\n        _this._cacheCanvas = document.createElement('canvas');\n        _this._cacheCanvas.width = TEXTURE_WIDTH;\n        _this._cacheCanvas.height = TEXTURE_HEIGHT;\n        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = _this._config.scaledCharWidth;\n        tmpCanvas.height = _this._config.scaledCharHeight;\n        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });\n        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);\n        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);\n        var capacity = _this._width * _this._height;\n        _this._cacheMap = new LRUMap_1.default(capacity);\n        _this._cacheMap.prealloc(capacity);\n        return _this;\n    }\n    DynamicCharAtlas.prototype.dispose = function () {\n        if (this._bitmapCommitTimeout !== null) {\n            window.clearTimeout(this._bitmapCommitTimeout);\n            this._bitmapCommitTimeout = null;\n        }\n    };\n    DynamicCharAtlas.prototype.beginFrame = function () {\n        this._drawToCacheCount = 0;\n    };\n    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (glyph.code === 32) {\n            return true;\n        }\n        if (!this._canCache(glyph)) {\n            return false;\n        }\n        var glyphKey = getGlyphCacheKey(glyph);\n        var cacheValue = this._cacheMap.get(glyphKey);\n        if (cacheValue !== null && cacheValue !== undefined) {\n            this._drawFromCache(ctx, cacheValue, x, y);\n            return true;\n        }\n        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n            var index = void 0;\n            if (this._cacheMap.size < this._cacheMap.capacity) {\n                index = this._cacheMap.size;\n            }\n            else {\n                index = this._cacheMap.peek().index;\n            }\n            var cacheValue_1 = this._drawToCache(glyph, index);\n            this._cacheMap.set(glyphKey, cacheValue_1);\n            this._drawFromCache(ctx, cacheValue_1, x, y);\n            return true;\n        }\n        return false;\n    };\n    DynamicCharAtlas.prototype._canCache = function (glyph) {\n        return glyph.code < 256;\n    };\n    DynamicCharAtlas.prototype._toCoordinateX = function (index) {\n        return (index % this._width) * this._config.scaledCharWidth;\n    };\n    DynamicCharAtlas.prototype._toCoordinateY = function (index) {\n        return Math.floor(index / this._width) * this._config.scaledCharHeight;\n    };\n    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {\n        if (cacheValue.isEmpty) {\n            return;\n        }\n        var cacheX = this._toCoordinateX(cacheValue.index);\n        var cacheY = this._toCoordinateY(cacheValue.index);\n        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    };\n    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {\n        if (idx < this._config.colors.ansi.length) {\n            return this._config.colors.ansi[idx];\n        }\n        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];\n    };\n    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {\n        if (this._config.allowTransparency) {\n            return TRANSPARENT_COLOR;\n        }\n        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.foreground;\n        }\n        else if (glyph.bg < 256) {\n            return this._getColorFromAnsiIndex(glyph.bg);\n        }\n        return this._config.colors.background;\n    };\n    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {\n        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.background;\n        }\n        else if (glyph.fg < 256) {\n            return this._getColorFromAnsiIndex(glyph.fg);\n        }\n        return this._config.colors.foreground;\n    };\n    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {\n        this._drawToCacheCount++;\n        this._tmpCtx.save();\n        var backgroundColor = this._getBackgroundColor(glyph);\n        this._tmpCtx.globalCompositeOperation = 'copy';\n        this._tmpCtx.fillStyle = backgroundColor.css;\n        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        this._tmpCtx.globalCompositeOperation = 'source-over';\n        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n        var fontStyle = glyph.italic ? 'italic' : '';\n        this._tmpCtx.font =\n            fontStyle + \" \" + fontWeight + \" \" + this._config.fontSize * this._config.devicePixelRatio + \"px \" + this._config.fontFamily;\n        this._tmpCtx.textBaseline = 'middle';\n        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n        if (glyph.dim) {\n            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);\n        this._tmpCtx.restore();\n        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        var isEmpty = false;\n        if (!this._config.allowTransparency) {\n            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);\n        }\n        var x = this._toCoordinateX(index);\n        var y = this._toCoordinateY(index);\n        this._cacheCtx.putImageData(imageData, x, y);\n        var cacheValue = {\n            index: index,\n            isEmpty: isEmpty,\n            inBitmap: false\n        };\n        this._addGlyphToBitmap(cacheValue);\n        return cacheValue;\n    };\n    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {\n        var _this = this;\n        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {\n            return;\n        }\n        this._glyphsWaitingOnBitmap.push(cacheValue);\n        if (this._bitmapCommitTimeout !== null) {\n            return;\n        }\n        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);\n    };\n    DynamicCharAtlas.prototype._generateBitmap = function () {\n        var _this = this;\n        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n        this._glyphsWaitingOnBitmap = [];\n        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {\n            _this._bitmap = bitmap;\n            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {\n                var value = glyphsMovingToBitmap[i];\n                value.inBitmap = true;\n            }\n        });\n        this._bitmapCommitTimeout = null;\n    };\n    return DynamicCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = DynamicCharAtlas;\n\n},{\"../../common/Platform\":25,\"../../ui/ColorManager\":58,\"./BaseCharAtlas\":47,\"./CharAtlasGenerator\":49,\"./LRUMap\":52,\"./Types\":55}],52:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRUMap = (function () {\n    function LRUMap(capacity) {\n        this.capacity = capacity;\n        this._map = {};\n        this._head = null;\n        this._tail = null;\n        this._nodePool = [];\n        this.size = 0;\n    }\n    LRUMap.prototype._unlinkNode = function (node) {\n        var prev = node.prev;\n        var next = node.next;\n        if (node === this._head) {\n            this._head = next;\n        }\n        if (node === this._tail) {\n            this._tail = prev;\n        }\n        if (prev !== null) {\n            prev.next = next;\n        }\n        if (next !== null) {\n            next.prev = prev;\n        }\n    };\n    LRUMap.prototype._appendNode = function (node) {\n        var tail = this._tail;\n        if (tail !== null) {\n            tail.next = node;\n        }\n        node.prev = tail;\n        node.next = null;\n        this._tail = node;\n        if (this._head === null) {\n            this._head = node;\n        }\n    };\n    LRUMap.prototype.prealloc = function (count) {\n        var nodePool = this._nodePool;\n        for (var i = 0; i < count; i++) {\n            nodePool.push({\n                prev: null,\n                next: null,\n                key: null,\n                value: null\n            });\n        }\n    };\n    LRUMap.prototype.get = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            this._unlinkNode(node);\n            this._appendNode(node);\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peekValue = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peek = function () {\n        var head = this._head;\n        return head === null ? null : head.value;\n    };\n    LRUMap.prototype.set = function (key, value) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            node = this._map[key];\n            this._unlinkNode(node);\n            node.value = value;\n        }\n        else if (this.size >= this.capacity) {\n            node = this._head;\n            this._unlinkNode(node);\n            delete this._map[node.key];\n            node.key = key;\n            node.value = value;\n            this._map[key] = node;\n        }\n        else {\n            var nodePool = this._nodePool;\n            if (nodePool.length > 0) {\n                node = nodePool.pop();\n                node.key = key;\n                node.value = value;\n            }\n            else {\n                node = {\n                    prev: null,\n                    next: null,\n                    key: key,\n                    value: value\n                };\n            }\n            this._map[key] = node;\n            this.size++;\n        }\n        this._appendNode(node);\n    };\n    return LRUMap;\n}());\nexports.default = LRUMap;\n\n},{}],53:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar NoneCharAtlas = (function (_super) {\n    __extends(NoneCharAtlas, _super);\n    function NoneCharAtlas(document, config) {\n        return _super.call(this) || this;\n    }\n    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        return false;\n    };\n    return NoneCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = NoneCharAtlas;\n\n},{\"./BaseCharAtlas\":47}],54:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar Types_2 = require(\"../../common/Types\");\nvar StaticCharAtlas = (function (_super) {\n    __extends(StaticCharAtlas, _super);\n    function StaticCharAtlas(_document, _config) {\n        var _this = _super.call(this) || this;\n        _this._document = _document;\n        _this._config = _config;\n        _this._canvasFactory = function (width, height) {\n            var canvas = _this._document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            return canvas;\n        };\n        return _this;\n    }\n    StaticCharAtlas.prototype._doWarmUp = function () {\n        var _this = this;\n        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);\n        if (result instanceof HTMLCanvasElement) {\n            this._texture = result;\n        }\n        else {\n            result.then(function (texture) {\n                _this._texture = texture;\n            });\n        }\n    };\n    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {\n        var isAscii = glyph.code < 256;\n        var isBasicColor = glyph.fg < 16;\n        var isDefaultColor = glyph.fg === Types_2.DEFAULT_COLOR;\n        var isDefaultBackground = glyph.bg === Types_2.DEFAULT_COLOR;\n        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;\n    };\n    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (this._texture === null || this._texture === undefined) {\n            return false;\n        }\n        var colorIndex = 0;\n        if (CharAtlasUtils_1.is256Color(glyph.fg)) {\n            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);\n        }\n        else if (glyph.fg === Types_2.DEFAULT_COLOR) {\n            if (glyph.bold) {\n                colorIndex = 1;\n            }\n        }\n        if (!this._isCached(glyph, colorIndex)) {\n            return false;\n        }\n        ctx.save();\n        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n        if (glyph.dim) {\n            ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);\n        ctx.restore();\n        return true;\n    };\n    return StaticCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = StaticCharAtlas;\n\n},{\"../../common/Types\":27,\"./BaseCharAtlas\":47,\"./CharAtlasGenerator\":49,\"./CharAtlasUtils\":50,\"./Types\":55}],55:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.INVERTED_DEFAULT_COLOR = 257;\nexports.DIM_OPACITY = 0.5;\nexports.CHAR_ATLAS_CELL_SPACING = 1;\n\n},{}],56:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DomRendererRowFactory_1 = require(\"./DomRendererRowFactory\");\nvar Types_1 = require(\"../atlas/Types\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nvar ROW_CONTAINER_CLASS = 'xterm-rows';\nvar FG_CLASS_PREFIX = 'xterm-fg-';\nvar BG_CLASS_PREFIX = 'xterm-bg-';\nvar FOCUS_CLASS = 'xterm-focus';\nvar SELECTION_CLASS = 'xterm-selection';\nvar nextTerminalId = 1;\nvar DomRenderer = (function (_super) {\n    __extends(DomRenderer, _super);\n    function DomRenderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        _this._terminalClass = nextTerminalId++;\n        _this._rowElements = [];\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n        _this._rowContainer.style.lineHeight = 'normal';\n        _this._rowContainer.setAttribute('aria-hidden', 'true');\n        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);\n        _this._selectionContainer = document.createElement('div');\n        _this._selectionContainer.classList.add(SELECTION_CLASS);\n        _this._selectionContainer.setAttribute('aria-hidden', 'true');\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._updateDimensions();\n        _this._injectCss();\n        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(_terminal.options, document);\n        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);\n        _this._terminal.screenElement.appendChild(_this._rowContainer);\n        _this._terminal.screenElement.appendChild(_this._selectionContainer);\n        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    DomRenderer.prototype.dispose = function () {\n        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n        this._terminal.screenElement.removeChild(this._rowContainer);\n        this._terminal.screenElement.removeChild(this._selectionContainer);\n        this._terminal.screenElement.removeChild(this._themeStyleElement);\n        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);\n        _super.prototype.dispose.call(this);\n    };\n    DomRenderer.prototype._updateDimensions = function () {\n        var _this = this;\n        this.dimensions.scaledCharWidth = this._terminal.charMeasure.width * window.devicePixelRatio;\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharLeft = 0;\n        this.dimensions.scaledCharTop = 0;\n        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;\n        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this._rowElements.forEach(function (element) {\n            element.style.width = _this.dimensions.canvasWidth + \"px\";\n            element.style.height = _this.dimensions.actualCellHeight + \"px\";\n            element.style.lineHeight = _this.dimensions.actualCellHeight + \"px\";\n            element.style.overflow = 'hidden';\n        });\n        if (!this._dimensionsStyleElement) {\n            this._dimensionsStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" span {\" +\n            \" display: inline-block;\" +\n            \" height: 100%;\" +\n            \" vertical-align: top;\" +\n            (\" width: \" + this.dimensions.actualCellWidth + \"px\") +\n            \"}\";\n        this._dimensionsStyleElement.innerHTML = styles;\n        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    DomRenderer.prototype.setColors = function (colors) {\n        this._colors = colors;\n        this._injectCss();\n    };\n    DomRenderer.prototype._injectCss = function () {\n        var _this = this;\n        if (!this._themeStyleElement) {\n            this._themeStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._themeStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" {\" +\n            (\" color: \" + this._colors.foreground.css + \";\") +\n            (\" background-color: \" + this._colors.background.css + \";\") +\n            (\" font-family: \" + this._terminal.options.fontFamily + \";\") +\n            (\" font-size: \" + this._terminal.options.fontSize + \"px;\") +\n            \"}\";\n        styles +=\n            this._terminalSelector + \" span:not(.\" + DomRendererRowFactory_1.BOLD_CLASS + \") {\" +\n                (\" font-weight: \" + this._terminal.options.fontWeight + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.BOLD_CLASS + \" {\") +\n                (\" font-weight: \" + this._terminal.options.fontWeightBold + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.ITALIC_CLASS + \" {\") +\n                \" font-style: italic;\" +\n                \"}\";\n        styles +=\n            \"@keyframes blink {\" +\n                \" 0% { opacity: 1.0; }\" +\n                \" 50% { opacity: 0.0; }\" +\n                \" 100% { opacity: 1.0; }\" +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \":not(.\" + FOCUS_CLASS + \") .\" + DomRendererRowFactory_1.CURSOR_CLASS + \" {\" +\n                (\" outline: 1px solid \" + this._colors.cursor.css + \";\") +\n                \" outline-offset: -1px;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + \" {\") +\n                \" animation: blink 1s step-end infinite;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + \" {\") +\n                (\" background-color: \" + this._colors.cursor.css + \";\") +\n                (\" color: \" + this._colors.cursorAccent.css + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + \" {\") +\n                (\" box-shadow: 1px 0 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + \" {\") +\n                (\" box-shadow: 0 -1px 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + SELECTION_CLASS + \" {\" +\n                \" position: absolute;\" +\n                \" top: 0;\" +\n                \" left: 0;\" +\n                \" z-index: 1;\" +\n                \" pointer-events: none;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + SELECTION_CLASS + \" div {\") +\n                \" position: absolute;\" +\n                (\" background-color: \" + this._colors.selection.css + \";\") +\n                \"}\";\n        this._colors.ansi.forEach(function (c, i) {\n            styles +=\n                _this._terminalSelector + \" .\" + FG_CLASS_PREFIX + i + \" { color: \" + c.css + \"; }\" +\n                    (_this._terminalSelector + \" .\" + BG_CLASS_PREFIX + i + \" { background-color: \" + c.css + \"; }\");\n        });\n        styles +=\n            this._terminalSelector + \" .\" + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { color: \" + this._colors.background.css + \"; }\" +\n                (this._terminalSelector + \" .\" + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { background-color: \" + this._colors.foreground.css + \"; }\");\n        this._themeStyleElement.innerHTML = styles;\n    };\n    DomRenderer.prototype.onDevicePixelRatioChange = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype._refreshRowElements = function (cols, rows) {\n        for (var i = this._rowElements.length; i <= rows; i++) {\n            var row = document.createElement('div');\n            this._rowContainer.appendChild(row);\n            this._rowElements.push(row);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n    };\n    DomRenderer.prototype.onResize = function (cols, rows) {\n        this._refreshRowElements(cols, rows);\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onCharSizeChanged = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onBlur = function () {\n        this._rowContainer.classList.remove(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onFocus = function () {\n        this._rowContainer.classList.add(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        while (this._selectionContainer.children.length) {\n            this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n        }\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);\n        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        var documentFragment = document.createDocumentFragment();\n        if (columnSelectMode) {\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));\n            }\n        }\n        this._selectionContainer.appendChild(documentFragment);\n    };\n    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {\n        if (rowCount === void 0) { rowCount = 1; }\n        var element = document.createElement('div');\n        element.style.height = rowCount * this.dimensions.actualCellHeight + \"px\";\n        element.style.top = row * this.dimensions.actualCellHeight + \"px\";\n        element.style.left = colStart * this.dimensions.actualCellWidth + \"px\";\n        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + \"px\";\n        return element;\n    };\n    DomRenderer.prototype.onCursorMove = function () {\n    };\n    DomRenderer.prototype.onOptionsChanged = function () {\n        this._updateDimensions();\n        this._injectCss();\n        this._terminal.refresh(0, this._terminal.rows - 1);\n    };\n    DomRenderer.prototype.clear = function () {\n        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });\n    };\n    DomRenderer.prototype.renderRows = function (start, end) {\n        var terminal = this._terminal;\n        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;\n        var cursorX = this._terminal.buffer.x;\n        var cursorBlink = this._terminal.options.cursorBlink;\n        for (var y = start; y <= end; y++) {\n            var rowElement = this._rowElements[y];\n            rowElement.innerHTML = '';\n            var row = y + terminal.buffer.ydisp;\n            var lineData = terminal.buffer.lines.get(row);\n            var cursorStyle = terminal.options.cursorStyle;\n            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));\n        }\n    };\n    Object.defineProperty(DomRenderer.prototype, \"_terminalSelector\", {\n        get: function () {\n            return \".\" + TERMINAL_CLASS_PREFIX + this._terminalClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };\n    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };\n    DomRenderer.prototype._onLinkHover = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n    };\n    DomRenderer.prototype._onLinkLeave = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n    };\n    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {\n        while (x !== x2 || y !== y2) {\n            var row = this._rowElements[y];\n            if (!row) {\n                return;\n            }\n            var span = row.children[x];\n            if (span) {\n                span.style.textDecoration = enabled ? 'underline' : 'none';\n            }\n            if (++x >= cols) {\n                x = 0;\n                y++;\n            }\n        }\n    };\n    return DomRenderer;\n}(Lifecycle_1.Disposable));\nexports.DomRenderer = DomRenderer;\n\n},{\"../../common/Lifecycle\":24,\"../atlas/Types\":55,\"./DomRendererRowFactory\":57}],57:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../atlas/Types\");\nvar BufferLine_1 = require(\"../../core/buffer/BufferLine\");\nexports.BOLD_CLASS = 'xterm-bold';\nexports.DIM_CLASS = 'xterm-dim';\nexports.ITALIC_CLASS = 'xterm-italic';\nexports.UNDERLINE_CLASS = 'xterm-underline';\nexports.CURSOR_CLASS = 'xterm-cursor';\nexports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\nvar DomRendererRowFactory = (function () {\n    function DomRendererRowFactory(_terminalOptions, _document) {\n        this._terminalOptions = _terminalOptions;\n        this._document = _document;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {\n        var fragment = this._document.createDocumentFragment();\n        var lineLength = 0;\n        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n            if (lineData.loadCell(x, this._workCell).getCode() !== BufferLine_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n                lineLength = x + 1;\n                break;\n            }\n        }\n        for (var x = 0; x < lineLength; x++) {\n            lineData.loadCell(x, this._workCell);\n            var width = this._workCell.getWidth();\n            if (width === 0) {\n                continue;\n            }\n            var charElement = this._document.createElement('span');\n            if (width > 1) {\n                charElement.style.width = cellWidth * width + \"px\";\n            }\n            if (isCursorRow && x === cursorX) {\n                charElement.classList.add(exports.CURSOR_CLASS);\n                if (cursorBlink) {\n                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);\n                }\n                switch (cursorStyle) {\n                    case 'bar':\n                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);\n                        break;\n                    case 'underline':\n                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);\n                        break;\n                    default:\n                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);\n                        break;\n                }\n            }\n            if (this._workCell.isBold() && this._terminalOptions.enableBold) {\n                charElement.classList.add(exports.BOLD_CLASS);\n            }\n            if (this._workCell.isItalic()) {\n                charElement.classList.add(exports.ITALIC_CLASS);\n            }\n            if (this._workCell.isDim()) {\n                charElement.classList.add(exports.DIM_CLASS);\n            }\n            if (this._workCell.isUnderline()) {\n                charElement.classList.add(exports.UNDERLINE_CLASS);\n            }\n            charElement.textContent = this._workCell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n            var swapColor = this._workCell.isInverse();\n            if (this._workCell.isFgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? 'background-' : '') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isFgPalette()) {\n                var fg = this._workCell.getFgColor();\n                if (this._workCell.isBold() && fg < 8 && !swapColor &&\n                    this._terminalOptions.enableBold && this._terminalOptions.drawBoldTextInBrightColors) {\n                    fg += 8;\n                }\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'b' : 'f') + \"g-\" + fg);\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-bg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            if (this._workCell.isBgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? '' : 'background-') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isBgPalette()) {\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'f' : 'b') + \"g-\" + this._workCell.getBgColor());\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-fg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            fragment.appendChild(charElement);\n        }\n        return fragment;\n    };\n    return DomRendererRowFactory;\n}());\nexports.DomRendererRowFactory = DomRendererRowFactory;\n\n},{\"../../core/buffer/BufferLine\":29,\"../atlas/Types\":55}],58:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_FOREGROUND = fromHex('#ffffff');\nvar DEFAULT_BACKGROUND = fromHex('#000000');\nvar DEFAULT_CURSOR = fromHex('#ffffff');\nvar DEFAULT_CURSOR_ACCENT = fromHex('#000000');\nvar DEFAULT_SELECTION = {\n    css: 'rgba(255, 255, 255, 0.3)',\n    rgba: 0xFFFFFF77\n};\nexports.DEFAULT_ANSI_COLORS = (function () {\n    var colors = [\n        fromHex('#2e3436'),\n        fromHex('#cc0000'),\n        fromHex('#4e9a06'),\n        fromHex('#c4a000'),\n        fromHex('#3465a4'),\n        fromHex('#75507b'),\n        fromHex('#06989a'),\n        fromHex('#d3d7cf'),\n        fromHex('#555753'),\n        fromHex('#ef2929'),\n        fromHex('#8ae234'),\n        fromHex('#fce94f'),\n        fromHex('#729fcf'),\n        fromHex('#ad7fa8'),\n        fromHex('#34e2e2'),\n        fromHex('#eeeeec')\n    ];\n    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n    for (var i = 0; i < 216; i++) {\n        var r = v[(i / 36) % 6 | 0];\n        var g = v[(i / 6) % 6 | 0];\n        var b = v[i % 6];\n        colors.push({\n            css: \"#\" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),\n            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0\n        });\n    }\n    for (var i = 0; i < 24; i++) {\n        var c = 8 + i * 10;\n        var ch = toPaddedHex(c);\n        colors.push({\n            css: \"#\" + ch + ch + ch,\n            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0\n        });\n    }\n    return colors;\n})();\nfunction fromHex(css) {\n    return {\n        css: css,\n        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF\n    };\n}\nfunction toPaddedHex(c) {\n    var s = c.toString(16);\n    return s.length < 2 ? '0' + s : s;\n}\nvar ColorManager = (function () {\n    function ColorManager(document, allowTransparency) {\n        this.allowTransparency = allowTransparency;\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get rendering context');\n        }\n        this._ctx = ctx;\n        this._ctx.globalCompositeOperation = 'copy';\n        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n        this.colors = {\n            foreground: DEFAULT_FOREGROUND,\n            background: DEFAULT_BACKGROUND,\n            cursor: DEFAULT_CURSOR,\n            cursorAccent: DEFAULT_CURSOR_ACCENT,\n            selection: DEFAULT_SELECTION,\n            ansi: exports.DEFAULT_ANSI_COLORS.slice()\n        };\n    }\n    ColorManager.prototype.setTheme = function (theme) {\n        if (theme === void 0) { theme = {}; }\n        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);\n        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);\n        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);\n        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);\n        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);\n        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);\n        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);\n        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);\n        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);\n        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);\n        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);\n        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);\n        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);\n        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);\n        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);\n        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);\n    };\n    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {\n        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }\n        if (css === undefined) {\n            return fallback;\n        }\n        this._ctx.fillStyle = this._litmusColor;\n        this._ctx.fillStyle = css;\n        if (typeof this._ctx.fillStyle !== 'string') {\n            console.warn(\"Color: \" + css + \" is invalid using fallback \" + fallback.css);\n            return fallback;\n        }\n        this._ctx.fillRect(0, 0, 1, 1);\n        var data = this._ctx.getImageData(0, 0, 1, 1).data;\n        if (!allowTransparency && data[3] !== 0xFF) {\n            console.warn(\"Color: \" + css + \" is using transparency, but allowTransparency is false. \" +\n                (\"Using fallback \" + fallback.css + \".\"));\n            return fallback;\n        }\n        return {\n            css: css,\n            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0\n        };\n    };\n    return ColorManager;\n}());\nexports.ColorManager = ColorManager;\n\n},{}],59:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction addDisposableDomListener(node, type, handler, useCapture) {\n    node.addEventListener(type, handler, useCapture);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            node.removeEventListener(type, handler, useCapture);\n        }\n    };\n}\nexports.addDisposableDomListener = addDisposableDomListener;\n\n},{}],60:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer = (function () {\n    function RenderDebouncer(_renderCallback) {\n        this._renderCallback = _renderCallback;\n    }\n    RenderDebouncer.prototype.dispose = function () {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = undefined;\n        }\n    };\n    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {\n        var _this = this;\n        this._rowCount = rowCount;\n        rowStart = rowStart !== undefined ? rowStart : 0;\n        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n        if (this._animationFrame) {\n            return;\n        }\n        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });\n    };\n    RenderDebouncer.prototype._innerRefresh = function () {\n        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n            return;\n        }\n        this._rowStart = Math.max(this._rowStart, 0);\n        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);\n        this._renderCallback(this._rowStart, this._rowEnd);\n        this._rowStart = undefined;\n        this._rowEnd = undefined;\n        this._animationFrame = undefined;\n    };\n    return RenderDebouncer;\n}());\nexports.RenderDebouncer = RenderDebouncer;\n\n},{}],61:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor = (function (_super) {\n    __extends(ScreenDprMonitor, _super);\n    function ScreenDprMonitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._currentDevicePixelRatio = window.devicePixelRatio;\n        return _this;\n    }\n    ScreenDprMonitor.prototype.setListener = function (listener) {\n        var _this = this;\n        if (this._listener) {\n            this.clearListener();\n        }\n        this._listener = listener;\n        this._outerListener = function () {\n            if (!_this._listener) {\n                return;\n            }\n            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);\n            _this._updateDpr();\n        };\n        this._updateDpr();\n    };\n    ScreenDprMonitor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.clearListener();\n    };\n    ScreenDprMonitor.prototype._updateDpr = function () {\n        if (!this._resolutionMediaMatchList || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._currentDevicePixelRatio = window.devicePixelRatio;\n        this._resolutionMediaMatchList = window.matchMedia(\"screen and (resolution: \" + window.devicePixelRatio + \"dppx)\");\n        this._resolutionMediaMatchList.addListener(this._outerListener);\n    };\n    ScreenDprMonitor.prototype.clearListener = function () {\n        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._resolutionMediaMatchList = undefined;\n        this._listener = undefined;\n        this._outerListener = undefined;\n    };\n    return ScreenDprMonitor;\n}(Lifecycle_1.Disposable));\nexports.ScreenDprMonitor = ScreenDprMonitor;\n\n},{\"../common/Lifecycle\":24}],62:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = require(\"./public/Terminal\");\nmodule.exports = Terminal_1.Terminal;\n\n},{\"./public/Terminal\":37}]},{},[62])(62)\n});\n//# sourceMappingURL=xterm.js.map\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.WebLinksAddon=t():e.WebLinksAddon=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=new RegExp(\"(?:^|[^\\\\da-z\\\\.-]+)((https?:\\\\/\\\\/)((([\\\\da-z\\\\.-]+)\\\\.([a-z\\\\.]{2,6}))|((\\\\d{1,3}\\\\.){3}\\\\d{1,3})|(localhost))(:\\\\d{1,5})?((\\\\/[\\\\/\\\\w\\\\.\\\\-%~:+]*)*([^:\\\"'\\\\s]))?(\\\\?[0-9\\\\w\\\\[\\\\]\\\\(\\\\)\\\\/\\\\?\\\\!#@$%&'*+,:;~\\\\=\\\\.\\\\-]*)?(#[0-9\\\\w\\\\[\\\\]\\\\(\\\\)\\\\/\\\\?\\\\!#@$%&'*+,:;~\\\\=\\\\.\\\\-]*)?)($|[^\\\\/\\\\w\\\\.\\\\-%]+)\");function r(e,t){window.open(t,\"_blank\")}var i=function(){function e(e,t){void 0===e&&(e=r),void 0===t&&(t={}),this._handler=e,this._options=t,this._options.matchIndex=1}return e.prototype.activate=function(e){this._terminal=e,this._linkMatcherId=this._terminal.registerLinkMatcher(o,this._handler,this._options)},e.prototype.dispose=function(){void 0!==this._linkMatcherId&&void 0!==this._terminal&&this._terminal.deregisterLinkMatcher(this._linkMatcherId)},e}();t.WebLinksAddon=i}])});\n//# sourceMappingURL=xterm-addon-web-links.js.map","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.FitAddon=t():e.FitAddon=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element.parentElement){var e=this._terminal._core,t=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(t.getPropertyValue(\"height\")),n=Math.max(0,parseInt(t.getPropertyValue(\"width\"))),o=window.getComputedStyle(this._terminal.element),i=r-(parseInt(o.getPropertyValue(\"padding-top\"))+parseInt(o.getPropertyValue(\"padding-bottom\"))),l=n-(parseInt(o.getPropertyValue(\"padding-right\"))+parseInt(o.getPropertyValue(\"padding-left\")))-e.viewport.scrollBarWidth;return{cols:Math.floor(l/e._renderService.dimensions.actualCellWidth),rows:Math.floor(i/e._renderService.dimensions.actualCellHeight)}}},e}();t.FitAddon=n}])});\n//# sourceMappingURL=xterm-addon-fit.js.map","import { Terminal } from './node_modules/xterm/dist/xterm';\nimport { webLinks } from 'xterm-addon-web-links';\nimport { fit } from 'xterm-addon-fit';\n\n// see https://codercat.tk/terminal-prints.html for inspiration\nconst xterm = new Terminal();  // Instantiate the terminal\nlet command = \"\"; // is there a better way to collect commands than char-by-char?\nlet history = [];\nxterm.loadAddon(new webLinks());\nxterm.loadAddon(fit);\nxterm.open(document.getElementById('terminal'));\nxterm.fit();\nxterm.prompt = () => {\n  xterm.write('\\r\\n$> ');\n};\nxterm.writeln('Welcome to JKirchartz.com');\nxterm.writeln('type \\\"help\\\" for more information');\nxterm.prompt();\n\nxterm.on('key', (key, ev) => {\n  const printable = !ev.altKey && !ev.altGraphKey && !ev.ctrlKey && !ev.metaKey;\n  console.log(xterm);\n  if (ev.keyCode === 13) {\n    runCommand(command);\n    xterm.prompt();\n    command = \"\";\n  } else if (ev.keyCode === 8) {\n    // Do not delete the prompt\n    if (xterm._core.buffer.x > 2) {\n      xterm.write('\\b \\b');\n    }\n  } else if (printable) {\n    command += key;\n    xterm.write(key);\n  }\n});\n\nxterm.on('paste', function(data) {\n  xterm.write(data);\n  command += data;\n});\n\nconst runCommand = (command) => {\n  xterm.writeln(\"\");\n  if (command === \"help\") {\n    xterm.writeln(\"this doesn't do anything yet - check back soon!\");\n    return;\n  }\n  return command + \" unknown!\"\n};\n\n\n"],"sourceRoot":""}