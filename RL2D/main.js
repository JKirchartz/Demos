!function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t,i){"use strict";const s=2.3283064365386963e-10;class o{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(e){return e=e<1?1/e:e,this._seed=e,this._s0=(e>>>0)*s,e=69069*e+1>>>0,this._s1=e*s,e=69069*e+1>>>0,this._s2=e*s,this._c=1,this}getUniform(){let e=2091639*this._s0+this._c*s;return this._s0=this._s1,this._s1=this._s2,this._c=0|e,this._s2=e-this._c,this._s2}getUniformInt(e,t){let i=Math.max(e,t),s=Math.min(e,t);return Math.floor(this.getUniform()*(i-s+1))+s}getNormal(e=0,t=1){let i,s,o;do{o=(i=2*this.getUniform()-1)*i+(s=2*this.getUniform()-1)*s}while(o>1||0==o);return e+i*Math.sqrt(-2*Math.log(o)/o)*t}getPercentage(){return 1+Math.floor(100*this.getUniform())}getItem(e){return e.length?e[Math.floor(this.getUniform()*e.length)]:null}shuffle(e){let t=[],i=e.slice();for(;i.length;){let e=i.indexOf(this.getItem(i));t.push(i.splice(e,1)[0])}return t}getWeightedValue(e){let t=0;for(let i in e)t+=e[i];let i,s=this.getUniform()*t,o=0;for(i in e)if(s<(o+=e[i]))return i;return i}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(e){return this._s0=e[0],this._s1=e[1],this._s2=e[2],this._c=e[3],this}clone(){return(new o).setState(this.getState())}}t.a=(new o).setSeed(Date.now())},function(e,t,i){"use strict";function s(e,t){return(e%t+t)%t}function o(e,t=0,i=1){return e<t?t:e>i?i:e}function r(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e,...t){let i=n.map;return e.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,function(s,o,n,a){if("%"==e.charAt(a-1))return s.substring(1);if(!t.length)return s;let l=t[0],h=(o||n).split(","),c=h.shift()||"",u=i[c.toLowerCase()];if(!u)return s;let d=(l=t.shift())[u].apply(l,h),p=c.charAt(0);return p!=p.toLowerCase()&&(d=r(d)),d})}i.r(t),i.d(t,"mod",function(){return s}),i.d(t,"clamp",function(){return o}),i.d(t,"capitalize",function(){return r}),i.d(t,"format",function(){return n}),n.map={s:"toString"}},function(e,t,i){"use strict";i.r(t),i.d(t,"fromString",function(){return r}),i.d(t,"add",function(){return n}),i.d(t,"add_",function(){return a}),i.d(t,"multiply",function(){return l}),i.d(t,"multiply_",function(){return h}),i.d(t,"interpolate",function(){return c}),i.d(t,"lerp",function(){return u}),i.d(t,"interpolateHSL",function(){return d}),i.d(t,"lerpHSL",function(){return p}),i.d(t,"randomize",function(){return g}),i.d(t,"rgb2hsl",function(){return f}),i.d(t,"hsl2rgb",function(){return _}),i.d(t,"toRGB",function(){return b}),i.d(t,"toHex",function(){return y});var s=i(1),o=i(0);function r(e){let t,i;if(e in w)t=w[e];else{if("#"==e.charAt(0)){let i=(e.match(/[0-9a-f]/gi)||[]).map(e=>parseInt(e,16));if(3==i.length)t=i.map(e=>17*e);else{for(let e=0;e<3;e++)i[e+1]+=16*i[e],i.splice(e,1);t=i}}else t=(i=e.match(/rgb\(([0-9, ]+)\)/i))?i[1].split(/\s*,\s*/).map(e=>parseInt(e)):[0,0,0];w[e]=t}return t.slice()}function n(e,...t){let i=e.slice();for(let e=0;e<3;e++)for(let s=0;s<t.length;s++)i[e]+=t[s][e];return i}function a(e,...t){for(let i=0;i<3;i++)for(let s=0;s<t.length;s++)e[i]+=t[s][i];return e}function l(e,...t){let i=e.slice();for(let e=0;e<3;e++){for(let s=0;s<t.length;s++)i[e]*=t[s][e]/255;i[e]=Math.round(i[e])}return i}function h(e,...t){for(let i=0;i<3;i++){for(let s=0;s<t.length;s++)e[i]*=t[s][i]/255;e[i]=Math.round(e[i])}return e}function c(e,t,i=.5){let s=e.slice();for(let o=0;o<3;o++)s[o]=Math.round(s[o]+i*(t[o]-e[o]));return s}const u=c;function d(e,t,i=.5){let s=f(e),o=f(t);for(let e=0;e<3;e++)s[e]+=i*(o[e]-s[e]);return _(s)}const p=d;function g(e,t){t instanceof Array||(t=Math.round(o.a.getNormal(0,t)));let i=e.slice();for(let e=0;e<3;e++)i[e]+=t instanceof Array?Math.round(o.a.getNormal(0,t[e])):t;return i}function f(e){let t,i=e[0]/255,s=e[1]/255,o=e[2]/255,r=Math.max(i,s,o),n=Math.min(i,s,o),a=0,l=(r+n)/2;if(r==n)t=0;else{let e=r-n;switch(t=l>.5?e/(2-r-n):e/(r+n),r){case i:a=(s-o)/e+(s<o?6:0);break;case s:a=(o-i)/e+2;break;case o:a=(i-s)/e+4}a/=6}return[a,t,l]}function m(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function _(e){let t=e[2];if(0==e[1])return[t=Math.round(255*t),t,t];{let i=e[1],s=t<.5?t*(1+i):t+i-t*i,o=2*t-s,r=m(o,s,e[0]+1/3),n=m(o,s,e[0]),a=m(o,s,e[0]-1/3);return[Math.round(255*r),Math.round(255*n),Math.round(255*a)]}}function b(e){return`rgb(${e.map(e=>Object(s.clamp)(e,0,255)).join(",")})`}function y(e){return`#${e.map(e=>Object(s.clamp)(e,0,255).toString(16).padStart(2,"0")).join("")}`}const w={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]}},function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{getContainer(){return null}setOptions(e){this._options=e}}},function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return n});var s=i(3),o=i(2);function r(e){let t=o.fromString(e);return 36*Math.floor(t[0]*(6/256))+6*Math.floor(t[1]*(6/256))+1*Math.floor(t[2]*(6/256))+16}class n extends s.a{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}schedule(e){setTimeout(e,1e3/60)}setOptions(e){super.setOptions(e);let t=[e.width,e.height],i=this.computeSize();this._offset=i.map((e,i)=>Math.floor((e-t[i])/2))}clear(){e.stdout.write(`[0;48;5;${r(this._options.bg)}m[2J`)}draw(t,i){let[s,o,n,a,l]=t,h=this._offset[0]+s,c=this._offset[1]+o,u=this.computeSize();if(h<0||h>=u[0])return;if(c<0||c>=u[1])return;if(h===this._cursor[0]&&c===this._cursor[1]||(e.stdout.write(function(e,t){return`[${t+1};${e+1}H`}(h,c)),this._cursor[0]=h,this._cursor[1]=c),i&&(n||(n=" ")),!n)return;let d=function(e,t){return`[0;38;5;${r(e)};48;5;${r(t)}m`}(a,l);d!==this._lastColor&&(e.stdout.write(d),this._lastColor=d);let p=[].concat(n);e.stdout.write(p[0]),this._cursor[0]++,this._cursor[0]>=u[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(e,t){return[e,t]}computeSize(){return[e.stdout.columns,e.stdout.rows]}}}).call(this,i(6))},function(e,t,i){var s=i(10),o=i(7),r={display:null,map:{},player:null,engine:null,room:1,visited:1,treasure_found:!1,MazeMap:[[1],[2,3,5],[6,12,18],[13,16,1],[10,6,9],[3,2],[2,12],[10,1],[3,5,17],[10,19],[7,21,11],[10,20],[2,3,4],[7,21],[22,23,10],[4,7,19],[18,12],[8,22],[13,15,4],[],[11,21,14],[13,22,20],[21,16],[14,9,19]],getRoomData:function(){for(var e=["North","East","West","South"],t=[],i=0;i<this.MazeMap[this.room].length;i++)t.push({exit:e[i],room:this.MazeMap[this.room][i]});return 1==this.room?this.treasure_found?{text:"You have found the Codex Confrabjucatus, and made your way to the exit; you truely are a clever little bugger! Your journey lasted <span id='final_score'></span> years. Play Again?",links:[{exit:"Yes",destination:"reset"},{exit:"No",destination:"javascript:void"}]}:{text:"You awaken, trapped in a dim dank library, a labyrinth of shelves, somewhere deep within the Revengerists' compound. Some say their non-euclidian base has driven thousands of mortals to madness! Every wall is covered in shelves with all sorts of reading material in varying states of disarray and in every color and shape you can imagine. Legends say these books contain all the lost knowledge of the omniverse, not just from before the great purge of 1980, but the fire of Alexandria, and even the destruction of Atlantis! Somewhere within these halls is the only book which could possibly help you escape &mdash; can you find it?",links:t}:19==this.room?{text:'You are in a dim dank library, a labyrinth of shelves... except this room has no doors... wait? is this a trap? ......... there\'s a small needlepoint on the wall, it reads "Oubliette sweet oubliette", below it appears to be a pile of bones on floor.',links:!1}:23==this.room?{text:"You are in a dim dank library, a labyrinth of shelves, you look up. Illuminated by a single beam of light. the Codex Confrabjucatus. You suddenly feel as if this is the secret you've been searching for this entire time, probably because it is. The light bends down from the book and flies towards your chest, you feel as if you know exactly where to go.",links:t}:this.treasure_found?{text:o("codex"),links:t}:{text:o("origin"),links:t}},getRoomMap:function(){return 1==this.room||19==this.room||this.room,generateMap()},generateMap:function(){this.map={};var e=this.getRoomData(),t=null;switch(Math.floor(3*Math.random())){case 1:t=new s.Map.Rogue;break;case 2:t=new s.Map.Digger;break;default:t=new s.Map.Uniform}var i=[];t.create(function(e,t,s){if(!s){var o=e+","+t;i.push(o),this.map[o]={},this.map[o].icon="."}}.bind(this)),console.log("generating map with text:",e.text),document.getElementById("roomtext").innerHTML=e.text,this.generateBoxes(i,e.links),this.createPlayer(i),this.redraw()},generateBoxes:function(e,t){for(var i=Math.floor(8*Math.random())+5,r=["*","□","⎕","☐","◻","▢","❑"],n=0;n<i;n++){var a=Math.floor(s.RNG.getUniform()*e.length),l=e.splice(a,1)[0];this.map[l].icon=r[Math.floor(Math.random()*r.length)],this.map[l].text=o("item")}for(var n in t){var h="";a=Math.floor(s.RNG.getUniform()*e.length),l=e.splice(a,1)[0];switch(t[n].exit){case"North":h="N";break;case"East":h="E";break;case"West":h="W";break;case"South":h="S"}this.map[l].icon=h,this.map[l].room=t[n].room,this.map[l].text=t[n].exit}},createPlayer:function(e){var t=Math.floor(s.RNG.getUniform()*e.length),i=e.splice(t,1)[0].split(","),o=parseInt(i[0]),r=parseInt(i[1]);this.player?this.player.teleport(o,r):this.player=new n(o,r)},drawMap:function(){for(var e in this.map){var t=e.split(","),i=parseInt(t[0]),s=parseInt(t[1]);this.display.draw(i,s,this.map[e].icon)}},getDisplay:function(){return this.display},getMap:function(){return this.map},show:function(){document.body.appendChild(this.display.getContainer())},init:function(){this.display=new s.Display({fontSize:16}),this.show(),this.generateMap();var e=new s.Scheduler.Simple;e.add(this.player,!0),this.engine=new s.Engine(e),this.engine.start()},nextLevel:function(){1==this.room&&this.has_treasure&&(alert("You won!"),this.player.end()),this.visited+=1,this.generateMap(),this.engine.start(),1==this.room&&this.has_treasure&&(document.getElementById("final_score").innerHTML=this.visited)},redraw:function(){this.display.clear(),this.drawMap(),this.player.draw()},text:function(e){this.redraw(),"."!=e?this.display.drawText(0,0,e,"#0FF","#000"):this.display.drawText(0,0,e,"#FFF","#000")}},n=function(e,t){this.x=e,this.y=t,this.draw()};n.prototype.teleport=function(e,t){this.x=e,this.y=t,this.draw()},n.prototype.checkTile=function(){var e=this.x+","+this.y;"."==r.map[e].icon?r.text("There's nothing here."):r.text(r.map[e].text),r.map[e].room&&(r.room=r.map[e].room,r.nextLevel())},n.prototype.end=function(){r.engine.lock(),window.removeEventListener("keydown",this)},n.prototype.draw=function(){r.display.draw(this.x,this.y,"@","#ff0")},n.prototype.act=function(){r.engine.lock(),window.addEventListener("keydown",this)},n.prototype.handleEvent=function(e){var t={38:0,33:1,39:2,34:3,40:4,35:5,37:6,36:7};if(e.keyCode in t){var i=t[e.keyCode],o=s.DIRS[8][i],n=this.x+o[0],a=this.y+o[1];if(!(n+","+a in r.map))return;r.display.draw(this.x,this.y,r.map[this.x+","+this.y].icon),this.x=n,this.y=a,this.draw(),window.removeEventListener("keydown",this),r.engine.unlock()}else 13!=e.keyCode&&32!=e.keyCode||this.checkTile()},document.addEventListener("DOMContentLoaded",function(){r.init()})},function(e,t){var i,s,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{s="function"==typeof clearTimeout?clearTimeout:n}catch(e){s=n}}();var l,h=[],c=!1,u=-1;function d(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&p())}function p(){if(!c){var e=a(d);c=!0;for(var t=h.length;t;){for(l=h,h=[];++u<t;)l&&l[u].run();u=-1,t=h.length}l=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===n||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new g(e,t)),1!==h.length||c||a(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,i){var s=i(8),o=i(9),r=s.createGrammar(o);r.addModifiers(s.baseEngModifiers),e.exports=function(e){return r.flatten("#"+e+"#")}},function(e,t){var i=function(){var e=function(e,t,s){this.errors=[],void 0===s.raw&&(this.errors.push("Empty input for node"),s.raw=""),e instanceof i.Grammar?(this.grammar=e,this.parent=null,this.depth=0,this.childIndex=0):(this.grammar=e.grammar,this.parent=e,this.depth=e.depth+1,this.childIndex=t),this.raw=s.raw,this.type=s.type,this.isExpanded=!1,this.grammar||console.warn("No grammar specified for this node",this)};function t(e,t){this.node=e;var i=t.split(":");this.target=i[0],1===i.length?this.type=2:(this.rule=i[1],"POP"===this.rule?this.type=1:this.type=0)}function s(e,t){this.raw=t,this.grammar=e,this.falloff=1,Array.isArray(t)?this.defaultRules=t:("string"==typeof t||t instanceof String)&&(this.defaultRules=[t])}e.prototype.toString=function(){return"Node('"+this.raw+"' "+this.type+" d:"+this.depth+")"},e.prototype.expandChildren=function(t,s){if(this.children=[],this.finishedText="",this.childRule=t,void 0!==this.childRule){var o=i.parse(t);o.errors.length>0&&(this.errors=this.errors.concat(o.errors));for(var r=0;r<o.length;r++)this.children[r]=new e(this,r,o[r]),s||this.children[r].expand(s),this.finishedText+=this.children[r].finishedText}else this.errors.push("No child rule provided, can't expand children"),console.warn("No child rule provided, can't expand children")},e.prototype.expand=function(e){if(!this.isExpanded)switch(this.isExpanded=!0,this.expansionErrors=[],this.type){case-1:this.expandChildren(this.raw,e);break;case 0:this.finishedText=this.raw;break;case 1:this.preactions=[],this.postactions=[];var s=i.parseTag(this.raw);this.symbol=s.symbol,this.modifiers=s.modifiers;for(var o=0;o<s.preactions.length;o++)this.preactions[o]=new t(this,s.preactions[o].raw);for(o=0;o<s.postactions.length;o++);for(o=0;o<this.preactions.length;o++)0===this.preactions[o].type&&this.postactions.push(this.preactions[o].createUndo());for(o=0;o<this.preactions.length;o++)this.preactions[o].activate();this.finishedText=this.raw;var r=this.grammar.selectRule(this.symbol,this,this.errors);this.expandChildren(r,e);for(o=0;o<this.modifiers.length;o++){var n=this.modifiers[o],a=[];if(n.indexOf("(")>0){var l=/\(([^)]+)\)/.exec(this.modifiers[o]);if(!l||l.length<2);else{a=l[1].split(",");n=this.modifiers[o].substring(0,n.indexOf("("))}}var h=this.grammar.modifiers[n];h?this.finishedText=h(this.finishedText,a):(this.errors.push("Missing modifier "+n),this.finishedText+="((."+n+"))")}for(o=0;o<this.postactions.length;o++)this.postactions[o].activate();break;case 2:this.action=new t(this,this.raw),this.action.activate(),this.finishedText=""}},e.prototype.clearEscapeChars=function(){this.finishedText=this.finishedText.replace(/\\\\/g,"DOUBLEBACKSLASH").replace(/\\/g,"").replace(/DOUBLEBACKSLASH/g,"\\")},t.prototype.createUndo=function(){return 0===this.type?new t(this.node,this.target+":POP"):null},t.prototype.activate=function(){var t=this.node.grammar;switch(this.type){case 0:this.ruleSections=this.rule.split(","),this.finishedRules=[],this.ruleNodes=[];for(var i=0;i<this.ruleSections.length;i++){var s=new e(t,0,{type:-1,raw:this.ruleSections[i]});s.expand(),this.finishedRules.push(s.finishedText)}t.pushRules(this.target,this.finishedRules,this);break;case 1:t.popRules(this.target);break;case 2:t.flatten(this.target,!0)}},t.prototype.toText=function(){switch(this.type){case 0:return this.target+":"+this.rule;case 1:return this.target+":POP";case 2:return"((some function))";default:return"((Unknown Action))"}},s.prototype.selectRule=function(e){if(this.conditionalRule){var t=this.grammar.expand(this.conditionalRule,!0);if(this.conditionalValues[t])if(null!=(s=this.conditionalValues[t].selectRule(e)))return s}if(this.ranking)for(var i=0;i<this.ranking.length;i++){var s;if(null!=(s=this.ranking.selectRule()))return s}if(void 0!==this.defaultRules){var o=0,r=this.distribution;switch(r||(r=this.grammar.distribution),r){case"shuffle":this.shuffledDeck&&0!==this.shuffledDeck.length||(this.shuffledDeck=function(e,t){var i,s,o=e.length;for(;0!==o;)s=Math.floor(Math.random()*o),i=e[o-=1],e[o]=e[s],e[s]=i;return e}(Array.apply(null,{length:this.defaultRules.length}).map(Number.call,Number),this.falloff)),o=this.shuffledDeck.pop();break;case"weighted":e.push("Weighted distribution not yet implemented");break;case"falloff":e.push("Falloff distribution not yet implemented");break;default:o=Math.floor(Math.pow(Math.random(),this.falloff)*this.defaultRules.length)}return this.defaultUses||(this.defaultUses=[]),this.defaultUses[o]=++this.defaultUses[o]||1,this.defaultRules[o]}return e.push("No default rules defined for "+this),null},s.prototype.clearState=function(){this.defaultUses&&(this.defaultUses=[])};var o=function(e,t,i){this.key=t,this.grammar=e,this.rawRules=i,this.baseRules=new s(this.grammar,i),this.clearState()};o.prototype.clearState=function(){this.stack=[this.baseRules],this.uses=[],this.baseRules.clearState()},o.prototype.pushRules=function(e){var t=new s(this.grammar,e);this.stack.push(t)},o.prototype.popRules=function(){this.stack.pop()},o.prototype.selectRule=function(e,t){return this.uses.push({node:e}),0===this.stack.length?(t.push("The rule stack for '"+this.key+"' is empty, too many pops?"),"(("+this.key+"))"):this.stack[this.stack.length-1].selectRule()},o.prototype.getActiveRules=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1].selectRule()},o.prototype.rulesToJSON=function(){return JSON.stringify(this.rawRules)};var r=function(e,t){this.modifiers={},this.loadFromRawObj(e)};function n(e){var t=e.toLowerCase();return"a"===t||"e"===t||"i"===t||"o"===t||"u"===t}r.prototype.clearState=function(){for(var e=Object.keys(this.symbols),t=0;t<e.length;t++)this.symbols[e[t]].clearState()},r.prototype.addModifiers=function(e){for(var t in e)e.hasOwnProperty(t)&&(this.modifiers[t]=e[t])},r.prototype.loadFromRawObj=function(e){if(this.raw=e,this.symbols={},this.subgrammars=[],this.raw)for(var t in this.raw)this.raw.hasOwnProperty(t)&&(this.symbols[t]=new o(this,t,this.raw[t]))},r.prototype.createRoot=function(t){return new e(this,0,{type:-1,raw:t})},r.prototype.expand=function(e,t){var i=this.createRoot(e);return i.expand(),t||i.clearEscapeChars(),i},r.prototype.flatten=function(e,t){return this.expand(e,t).finishedText},r.prototype.toJSON=function(){for(var e=Object.keys(this.symbols),t=[],i=0;i<e.length;i++){var s=e[i];t.push(' "'+s+'" : '+this.symbols[s].rulesToJSON())}return"{\n"+t.join(",\n")+"\n}"},r.prototype.pushRules=function(e,t,i){void 0===this.symbols[e]?(this.symbols[e]=new o(this,e,t),i&&(this.symbols[e].isDynamic=!0)):this.symbols[e].pushRules(t)},r.prototype.popRules=function(e){this.symbols[e]||this.errors.push("Can't pop: no symbol for key "+e),this.symbols[e].popRules()},r.prototype.selectRule=function(e,t,i){if(this.symbols[e])return this.symbols[e].selectRule(t,i);for(var s=0;s<this.subgrammars.length;s++)if(this.subgrammars[s].symbols[e])return this.subgrammars[s].symbols[e].selectRule();return i.push("No symbol for '"+e+"'"),"(("+e+"))"};var a={replace:function(e,t){return e.replace(new RegExp(t[0].replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),t[1])},capitalizeAll:function(e){for(var t,i="",s=!0,o=0;o<e.length;o++)(t=e.charAt(o))>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"?s?(i+=e.charAt(o).toUpperCase(),s=!1):i+=e.charAt(o):(s=!0,i+=e.charAt(o));return i},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},a:function(e){if(e.length>0){if("u"===e.charAt(0).toLowerCase()&&e.length>2&&"i"===e.charAt(2).toLowerCase())return"a "+e;if(n(e.charAt(0)))return"an "+e}return"a "+e},firstS:function(e){console.log(e);var t=e.split(" "),i=a.s(t[0])+" "+t.slice(1).join(" ");return console.log(i),i},s:function(e){switch(e.charAt(e.length-1)){case"s":case"h":case"x":return e+"es";case"y":return n(e.charAt(e.length-2))?e+"s":e.substring(0,e.length-1)+"ies";default:return e+"s"}},ed:function(e){switch(e.charAt(e.length-1)){case"s":return e+"ed";case"e":return e+"d";case"h":case"x":return e+"ed";case"y":return n(e.charAt(e.length-2))?e+"d":e.substring(0,e.length-1)+"ied";default:return e+"ed"}}};return(i={createGrammar:function(e){return new r(e)},parseTag:function(e){for(var t={symbol:void 0,preactions:[],postactions:[],modifiers:[]},s=i.parse(e),o=void 0,r=0;r<s.length;r++)if(0===s[r].type){if(void 0!==o)throw"multiple main sections in "+e;o=s[r].raw}else t.preactions.push(s[r]);if(void 0===o);else{var n=o.split(".");t.symbol=n[0],t.modifiers=n.slice(1)}return t},parse:function(e){var t=0,i=!1,s=[],o=!1,r=[],n=0,a="",l=void 0;if(null===e)return(s=[]).errors=r,s;function h(t,i,o){var n;i-t<1&&(1===o&&r.push(t+": empty tag"),2===o&&r.push(t+": empty action")),n=void 0!==l?a+"\\"+e.substring(l+1,i):e.substring(t,i),s.push({type:o,raw:n}),l=void 0,a=""}for(var c=0;c<e.length;c++){if(o)o=!1;else switch(e.charAt(c)){case"[":0!==t||i||(n<c&&h(n,c,0),n=c+1),t++;break;case"]":0!==--t||i||(h(n,c,2),n=c+1);break;case"#":0===t&&(i?(h(n,c,1),n=c+1):(n<c&&h(n,c,0),n=c+1),i=!i);break;case"\\":o=!0,a+=e.substring(n,c),n=c+1,l=c}}return n<e.length&&h(n,e.length,0),i&&r.push("Unclosed tag"),t>0&&r.push("Too many ["),t<0&&r.push("Too many ]"),(s=s.filter(function(e){return 0!==e.type||0!==e.raw.length})).errors=r,s}}).baseEngModifiers=a,i.TraceryNode=e,i.Grammar=r,i.Symbol=o,i.RuleSet=s,i}();e.exports=i},function(e){e.exports={hero:["Dr Tasty","Breshvic","Bob Coffee","Bob Sequious","El Cocco","Commodore Bob","Hotknife","Der Kirche","Southside Santa","Harbjar","The Milk Man","Interns"],genre:["Poetry","Childrens","Early Reader","Young Adult","Romance","Bromance","Arts & Leisure","Comedy","Fiction","Joke","Non-fiction","Comic","Mystery","Romance","Self-Help","Instructional","Suspense","Slasher","Anthropology","Geology","Geometry","Political","Antipolitical","Bizarre","Disgusting","Lude","Nudie"],type:["Book","Codex","Pamphlet","Grimoire","Magazine","Catalog","Novel","Novella","Manual","Tome","Scroll"],qualifier:["crumbling","magic-eye","oddly glowing","oddly animated","For-Dummies","bad","good","dumb","lame","boring","Rotten","Rotting","Smutty","Decaying","French","Ancient","Accursed","Leather-Bound","Paperback","Hardcover"],book:["#type#","#genre# #type#","#qualifier# #genre# #type#","#qualifier# #book#"],shelf:["a shelf with your initials carved into it","a sagging shelf","a dusty shelf","upsidedown shelves","floating shelves","non-euclidean shelves","shelf","chair","ladder","a table","a sofa","a highback chair"],item:["#book.a#","#book.a#","#book.a#","an empty box that smells like #smells#","#bandname.a# album","#wallstuff#","#item#, it seems to #actions#",'a pair of underpants, inside is stitched "#hero#"',"#technobabble.a#"],what:["#book.a#","#bandname.a# album","#shelf# holding #book.s#","#shelf#","#wallstuff#","#what# and #what#","#what# #where#"],where:["in a dim dank library, a labyrinth of shelves","in a labyrinth of shelves","in a twisting maze of shelves","deep within the Revengerists Library","in an ancient tunnel","in a twisting maze of shelves#descriptor#"],descriptor:[", all alike",", all the same",", all shockingly similar",", twisting and swaying in the breeze",", all mimsy and outgrabe-ish",", everything is inside out",", folding in on itself perpetually"],find:["find","see","discover","try to avoid looking at","feel oddly oddly drawn to","seem dissapointed to find","seem dissapointed to see"],dance:["Bump","Creep","Freddy","Macarena","Loco-Motion","Safety Dance","Urkel","Humpty Hump","Jerry Lewis","Hustle","Electric Slide","Ol' Softshoe","Charleston","Dougie","Nae Nae","Whip","Mashed Potato","Twist","Sprinkler","Bus Driver","Wrench","Patty Duke","Watusi","Batusi","Stanky Legg","Alligator","Bartman","Dip","Cha-Cha Slide","Chicken","Harlem Shake","'History of Dance' dance","Allemande","Schottische","Mazurka","Jitterbug","Mambo","Swim","Frug","Pony","Chicken Dance"],marginalia:["is this even english!?","is this even from earth!?","you have no idea what any of these squiggles mean.","the letters shimmer with an otherworldly light","is this even writing!?","this is extremely distasteful","you start skimming the page, it makes your stomache churn","there aren't even any pictures","this book looks boring","is this even english!? ... oh, wait, it's upsidedown","the letters are dancing on the page -- this must be what dyslexia feels like","this book looks boring","this book is actually kinda hot","this is grotesque","this is disturbing","whelp, should've known better than to read that, huh?","somebody would lose their mind reading <i>this</i> crap.","it looks like this is written entirely in your handwriting, but that's impossible, right?","a little figure jumps to life, it appears to be doing the #dance#","a little figure jumps to life, it appears to be doing summersalts.","a little figure jumps to life, it appears to be... ripping itself limb from limb"],smells:["teen spirit","used diapers","roses","armpit","butt","Southside Santa's Beard","#smells# and #smells#","old books","brimstone","methane","chloroform","bleach","churros","cinnamon","peppermint","bees","puke","farts","soup","broccoli","the beach","seafood","chocolate","death"],wallstuff:["#book.s#","carrots","flask","fur","pictures","#hero#'s #qualifier# poetry","#qualifier# photos of #hero#","blood","chocolate syrup","shelves#descriptor#","empty shelves#descriptor#","empty shelves"],wallact:["lined","covered","dripping","coated","filled","stuffed"],walls:["the walls are #wallact# with #wallstuff#","#walls#... Hey! haven't we been here before?","oh what joy.","all exactly the same as before.","all exactly the friggin' same.","all completely unlike what came before.","well... at least there's more #wallstuff#.","oh, hey... what library would be complete without #wallstuff.a#?","Hey! Waitaminnit, this is new... wait.. nope... no it isn't.","at least you don't have to read the #book.s#.","at least it's not #where#.","and there's also #what#.","oh sweet! more #what#! awesome!","you #find# some #wallstuff#","hope you wanted to look at more books, coz hey, jackpot!","there aren't even shelves here, just columns of stacked books... no <i>mere mortal</i> could stack books <i>this</i> way!","the walls are #wallact# with books, books, books, more books, and ... rats!? Like literally there's fucking vermin down here!","the walls are #wallact# with books, books, books, more books, and ... oh look! another book!","the walls are #wallact# with #book.s#, #book.s#, #book.s#, more #book.s#, and ... oh look! a #book#!","you're beginning to think you're going in circles.","you're begining to think these messages aren't helpful at all!","you're beginning to think.... and it hurts a little.","you pull out a book, because it's <i>obviously</i> a switch for a secret trap door... it's not.","you pull out a book and flip through it's pages... #marginalia#",'you open a #book#, a note in the cover says "All is revealed on page 142"... you quickly flip the pages, frantically searching &ndash; is this your hope of escape? ah! here it is..... "Made you look".... that fucker!',"you #find# some #wallstuff#, you want to touch it, but you don't.",'you #find# a disc labeled "#hero# Battle Report", but you don\'t have a way to play it.',"you'd think there'd be a treasure, or landmarks, or something in here, but nope.","uh... does something smell like #smells#","at least <em>this</em> room doesn't smell like #smells#.","wow... there's nothing like the smell of #smells#","wow... there's nothing like the smell of old books (and brimstone.)","you slip on a.... used condom? Damn those Interns! they need to find somewhere else to do the freaky-hijiki.","you slip on a... Banana peel!? Dammit Bresh! Not again!","you step on a crack... when was the last time you called your mother?","you carve your initials into a shelf -- now you'll surely find your way back.","you search the shelves for your carving -- there's nothing there... you make short work of rectifying that.","you carve a little arrow into the doorway -- surely this will help you keep track of where you've been.","you find a smudged carving -- it look like somebody scratched something out here....","every book here displays clear and total lack of sense and any imaginable form of dignity.","you suddenly realize you have no freakin' clue how the dewie decimal system works.","the walls are lined with joke books. You take one down and open it randomly - 'What do bears eat for breakfast'... 'Pancakes.'","the walls are lined with joke books. You take one down and flip through the pages - apparently it's an extremely detailed history of fart jokes dating back to the Mesozoic era.","the walls are dripping with... blood?","the walls are dripping with.... blood?...... no, it's chocolate syrup! YUM!","the walls are lined with empty shelves - except for a lone Troll doll.","the walls are lined with empty shelves - except for a lone Troll doll. You rub it's belly for good luck.","you find your initals carved in the side of a shelf, are we going around in circles?"],directions:["north","south","east","west","left","right","forward","astray","in the right direction","in the wrong direction"],actions:["glow","vibrate","get colder","get warmer","pulsate","float","pull you #directions#","become weightless","get heavier","pee in your hand"],has_codex:["You feel the codex guiding you.","","","","","You feel the Codex Confrabjucatus begin to #actions#.","You sense the codex guiding you #directions#."],origin:["You are #where#, you #find# #what#","You are #where#, you #find# #what#, #walls#","You are #where#, #walls#"],codex:["You are #where#, you #find# #what#. #has_codex#","You are #where#, you #find# #what#, #walls#. #has_codex#","You are #where#, #walls#. #has_codex#"],technobabble:["#technobase#-#origin#","#origin#-#origin#","#technobase##technopostfix#","#technoprefix##technobase#","#technoprefix##technopostfix#","#technoprefix##technobase##technopostfix#"],technobase:["Ablative","Absorb","Acceleration","Accelerator","Access","Acid","Algorithm","Amplifier","Anabolic","Analysis","Analyzer","Android","Ceramic","Chamber","Channel","Charge","Chemical","Chip","Circuit","Class","Cloaking","Code","Coils","Collector","Comm","Communicator","Compartment","Components","Compression","Computer","Concrete","Conditioner","Conducting","Conduit","Cone","Conical","Continuous","Control","Controller","Converter","Coolant","Coordinate","Core","Coupling","Crystal","Cube","Cubic","Cutter","Cylinder","Damping","Data","Deflector","Degauss","Deuterium","Device","Diagnostic","Differential","Dilithium","Dimensional","Discriminator","Disk","Display","Disrupter","Dissipation","Distortion","Dorsal","Drill","Driver","Duotronic","Dynamic","Dyne","Electrical","Element","Elementary","Elements","Emergency","Encryption","Energy","Engine","Enhancer","Environmental","Extendable","Extender","Fabric","Fabrication","Fastener","Filaments","Filter","Fire","Fission","Flares","Flex","Fluctuation","Fluid","Frequency","Fusion","Gas","Gaseous","Gel","Gene","Gradient","Graviton","Gravity","Grid","Grill","Guidance","Gun","Hand","Harmonics","Heavy","Implant","Impulse","Inducer","Inertial","Infuser","Inhibitor","Injector","Instrument","Instrumentation","Insulating","Integrated","Intercom","Interlaced","Interlock","Inversion","Isolation","Jig","Laser","Latch","Lateral","Lift","Light","Line","Liquid","Load","Lobe","Lock","Magnetic","Main","Manifold","Mass","Materialization","Measure","Measurement","Medical","Memory","Mesh","Metal","Meter","Metric","Mirror","Mode","Module","Motor","Mulitronic","Multimode","Nanite","Negative","Neural","Neutral","Neutron","Nodes","Nominal","Null","Nutation","Optical","Oscillator","Pack","Particle","Pattern","Piston","Planar","Pod","Polarity","Polymer","Portal","Positive","Powerplant","Primary","Probe","Processor","Program","Projector","Proton","Purge","Quad","Radiation","Radio","Rated","Reaction","Reactor","Reader","Recalibration","Recorder","Refurbishment","Regulators","Resistor","Rifle","Robot","Scan","Scanner","Secondary","Section","Semiferrous","Sequencer","Shaft","Sheeting","Simulation","Solar","Solid","Sound","Space","Spectral","Spectrum","Sphere","Spherical","Square","Stabilizer","Standard","Stasis","Static","Stimulator","Strand","Stream","Subroutine","Subspace","Substrate","Survey","Sustainable","Sweep","Symmetry","Synthesizer","Tank","Telemetry","Telescopic","Thermal","Thruster","Time","Torch","Torsion","Tractor","Trajector","Transition","Transitional","Translational","Transmitter","Transponder","Transporter","Type","Unit","Utility","Vacuum","Ventral","Vertex","Vial","Vibration","Viewer","Visual","Volt","Wand","Warp","Watt","Wave","Weapon","Welded","Wide-band"],technopostfix:["acia","active","agen","akine","alaysis","ale","alene","alia","aline","alline","alus","anate","aneous","anium","aptic","arian","aric","arite","armor","aron","arus","asia","atine","avaion","axon","base","bato","biosis","bium","boid","bolt","bouy","cart","cell","cellular","ceron","chron","chyon","clastic","code","composite","computer","cone","ctral","cube","cyatic","cylinder","cyte","device","dian","disk","dite","dium","drill","driver","dyne","elean","energy","engine","enics","eron","erosis","eton","ezine","gan","gel","gemic","gen","graphy","grau","grid","ian","iary","ibian","ical","ides","ilical","ionic","iosis","irian","isol","istic","iton","itron","ium","izer","izine","kon","lates","leptic","line","lion","lionic","llan","llium","lobe","lock","mass","merite","minium","mite","mode","mones","mum","muter","nar","netic","nide","nimbic","niotic","nite","nizer","node","nucleic","ogenic","ograted","oidi","okine","olan","olian","oline","olites","ology","omorph","onics","onite","onium","onus","orian","oride","orium","oron","osian","oxic","pack","pestic","phalon","phan","phatic","plasmic","plast","plexing","pod","probe","racite","ragen","rated","ridium","rion","rix","robes","septic","shaft","sion","sonator","sphere","sphere","spheric","stator","stial","stian","stral","stream","stria","synine","tan","tanium","tectors","teron","thium","thold","thro","tive","torch","tram","trium","tronic","tryon","type","ual","ular","unit","uron","wave"],technoprefix:["Access","Alpha","Amn","Amo","Ana","Ani","Ano","Anti","Anyon","Aqua","Artificial","Astral","Astro","Ata","Atmo","Auto","Automated","Automatic","Autonomic","Autonomous","Auxiliary","Axi","Axo","Bal","Ban","Bar","Bari","Baryon","Basic","Beam","Bel","Ben","Benz","Ber","Beta","Bi","Bio","Bor","Byn","Byz","Cap","Car","Card","Car","Cas","Cele","Celestial","Cellular","Ceno","Centi","Ceta","Ceti","Chlor","Chloro","Cho","Chroni","Chrono","Chyrs","Class","Cloaking","Co","Code","Col","Com","Comm","Con","Containment","Control","Cor","Core","Counter","Cro","Cryo","Crypt","Crys","Cut","Cyber","Cygn","Cyp","Cyr","Dai","Dak","Dar","Data","Day","De","Deca","Deci","Deflector","Dek","Del","Delo","Delphi","Delta","Den","Deo","Dermal","Deta","Deu","Dev","Dex","Dey","Dia","Dilithium","Dio","Dis","Dol","Don","Dua","Duo","Dur","Dyna","Dyno","Dys","Echo","Edo","Eic","Eid","Ela","Electro","Elem","Emi","Emo","Emulator","En","Energy","Eno","Ento","Entro","Enviro","Epsilon","Ero","Eva","Evo","Exa","Exo","Exp","Fal","Far","Fed","Fel","Fen","Fer","Ferro","Field","Fino","Fire","Firo","Fis","Flo","Flux","For","Force","Fra","Fus","Fusion","Gal","Gam","Gamma","Gar","Gem","Gene","Genetic","Giga","Gil","Gin","Glo","Gol","Gor","Gra","Gravi","Gren","Gri","Hal","Ham","Han","Hano","Har","Hecto","Hel","Hemo","Hexi","Hol","Holo","Hover","Hum","Hydra","Hydro","Hyper","Hypo","Ico","Icon","Iconic","Imaging","Imo","Imp","In","Inf","Ing","Inh","Inner","Ino","Inter","Intra","Intron","Inve","Invi","Invis","Ion","Iono","Iso","Isomo","Istro","Jen","Jer","Jus","Kal","Kalo","Kalt","Kar","Kat","Kay","Kel","Kelo","Keno","Kilo","Kin","Kinetic","Koh","Kol","Kor","Kra","Kre","Kri","Lan","Laser","Leg","Len","Lev","Lex","Light","Linear","Ling","Liquid","Low","Lun","Ly","Macro","Mag","Magna","Magne","Main","Mal","Man","Mar","Master","Matrix","Matter","Med","Meda","Medi","Mega","Mel","Mem","Meta","Metha","Meto","Metra","Metre","Micro","Micro","Mid","Midi","Milli","Mod","Modular","Moly","Mon","Mono","Mor","Moro","Morph","Motor","Multi","Muon","Mur","Muta","Myo","Nadion","Nano","Nas","Navi","Nega","Nel","Neo","Ner","Nes","Net","Neu","Neural","Neuro","Neutral","Neutro","New","Nis","Nit","Nitro","Non","Nor","Nuc","Nucleo","Nul","Null","Ny","Ob","Ocu","Off","Ok","Omega","Omi","Omicron","Omni","Open","Opti","Optical","Orbital","Ori","Orn","Osteo","Out","Pal","Pan","Par","Para","Pars","Part","Parth","Pas","Pax","Pel","Pen","Per","Phase","Phe","Phero","Pho","Photo","Phy","Physio","Pi","Pio","Pla","Plasma","Plasti","Plato","Plexi","Plo","Polari","Poly","Post","Pra","Pres","Pri","Pri","Prime","Prin","Pro","Promo","Proto","Prox","Psi","Psy","Pul","Pur","Py","Pyl","Pyro","Quad","Quadra","Quadro","Quant","Quanto","Quantum","Quara","Quasi","Radio","Ram","Re","Rec","Red","Reg","Regen","Regu","Rel","Rem","Rep","Repto","Repu","Res","Ret","Retro","Rho","Ribo","Rod","Rol","Rom","Rubi","Sal","Salv","Sam","San","Sat","Sch","Sec","Sei","Sel","Self","Sensor","Sero","Servo","Set","Sigma","Sili","Solar","Som","Sonic","Sono","Spatial","Spectral","Standard","Star","Stasis","Static","Stellar","Sto","Str","Strato","Styro","Sub","Sul","Sun","Super","Syb","Sym","Symbo","Syn","Synchro","Synth","Tac","Tach","Tan","Tar","Tas","Tau","Tec","Tech","Techno","Tek","Tel","Tele","Tem","Temp","Tep","Tera","Teri","Term","Tero","Terra","Tert","Tes","Tet","Tetra","Tha","Thal","Thas","Thera","Thermo","Theta","Tho","Thoro","Tim","Time","Tin","Tit","Tita","Titu","Tom","Tomo","Tor","Tra","Trans","Tri","Tria","Trici","Trico","Tro","Try","Turbo","Tycho","Type","Typh","Ulti","Ultra","Ultri","Un","Uni","Uri","Val","Van","Var","Vas","Veg","Vel","Ven","Ver","Veri","Vert","Veta","Vic","Virtual","Vis","Visual","Vor","Xen","Xeno","Xep","Zeon","Zero","Zeta"],bandname:["#name# and the #adjective.capitalize# #word.capitalizeAll#","#name# and the #adjective.capitalize# #animals.capitalizeAll#","#name# and the #animals.capitalizeAll.s#","The #animals.capitalizeAll.s#","#animals.capitalize##animals#","#adjective.capitalize# #animals.capitalize#","The #adjective.capitalize# #animals.capitalizeAll#","#onetwothree#","The #onetwothree#","#name# and the #onetwothree#","#name# and the #name# #ensemble.capitalizeAll#","The #name# #ensemble.capitalizeAll#","#name# and the #adjective.capitalize# #word.capitalizeAll# #ensemble.capitalizeAll#","#name# and the #adjective.capitalize# #animals.capitalizeAll# #ensemble.capitalizeAll#","#name# and the #animals.capitalizeAll.s#","The #animals.capitalizeAll.s# #ensemble.capitalizeAll#","#animals.capitalize##animals# #ensemble.capitalizeAll#","#adjective.capitalize# #animals.capitalize# #ensemble.capitalizeAll#","The #adjective.capitalize# #animals.capitalizeAll# #ensemble.capitalizeAll#","#onetwothree# #ensemble.capitalizeAll#","The #onetwothree# #ensemble.capitalizeAll#","#name# and the #onetwothree# #ensemble.capitalizeAll#","The #alphabet##alphabet##alphabet# #ensemble.capitalizeAll#"],onetwothree:["#one# #two# #three#","#one# #three#","#two# #three#"],one:["Abandoned","Aberrant","Accident-prone","Aggressive","Aimless","Alien","All","Angry","Appropriate","Bad","Barbaric","Bare","Beacon","Big","Birmingham","Bitter","Black","Blue","Boston","Brave","Brutal","Cheerful","Crispy","Crunchy","Dancing","Dangerous","DaVinci's","Dead","Defiant","Deserted","Devout","Digital","Dirty","Disappointed","Discarded","Dismal","Downcast","Dreaded","Einstein's","Elastic","Empty","Endless","Essential","Eternal","Everyday","Fast","Fierce","Flaming","Flying","Forgotten","Forsaken","Freaky","Frozen","Full","Furious","Gandhi's","Gaseous","Ghastly","Global","Gloomy","Green","Grim","Gruesome","Gutsy","Intrepid","Headless","Heavy","Helpless","Hidden","Hideous","Homeless","Hungry","Impure","Insane","Intense","Inventive","Itchy","Jagged","Kentucky","Left-Handed","Liquid","Lone","Lost","Lurid","Marooned","Massive","Meaningful","Meaty","Medieval","Mellow","Misspent","Modern","Monday's","Morbid","Moving","Napoleon's","Nasty","Needless","Nervous","New","Next","Ninth","Nocturnal","Nonskid","Northernmost","Old","Official","Permanent","Persistent","Picasso's","Pointless","Pure","Queasy","Rampant","Random","Rare","Raw","Reborn","Remote","Restless","Rich","Risky","Robotic","Rocky","Rotary","Rough","Running","Rusty","Ruthless","Sad","Saturday's","Screaming","Serious","Severe","Silly","Skilled","Sleepy","Sliding","Small","Solid","Solitary","Stale","Steamy","Stony","Stormy","Strange","Strawberry","Stray","Streaming","Strong","Subtle","Supersonic","Surreal","Tainted","Temporary","Third","Thrifty","Tidy","Timely","Tired","Toiling","Tough","Treacherous","Unhappy","Unidentified","Unique","Unpreventable","Unsafe","Untidy","Vicious","Vital","Wanton","White","Wild","Wooden","Worthy","Young"],two:["Alarm","Albatross","Anaconda","Antique","Artificial","Autopsy","Autumn","Avenue","Backpack","Bakery","Balcony","Barbershop","Barnacle","Barnyard","Boomerang","Bulldozer","Butter","Canal","Careless","Casket","Chalk","Cloud","Clown","Coffin","Coke","Cold","Comic","Compass","Confined","Corduroy","Corrupt","Cosmic","Crayon","Creek","Crossbow","Crude","Cutlery","Dagger","Desolate","Dinosaur","Disturbed","Dog","Donut","Door","Doorstop","Eardrum","Electrical","Electron","Excessive","Eyelid","False","Fault","Filament","Firecracker","Fish","Flagpole","Flannel","Flea","Foghorn","Forbidden","Forklift","French","Fried","Frostbite","Funeral","Gangrene","Gargoyle","Gasket","Gravel","Grenade","Grindstone","Haystack","Helium","Homicide","Humidity","Insurance","Invader","Jazz","Junkyard","Kangaroo","Kneecap","Lantern","Leather","Lemonade","Lightning","Limousine","Liposuction","Lipstick","Lobster","Lockbox","Locomotive","Longitude","Love","Lust","Messenger","Metaphor","Microphone","Mildew","Milk","Minefield","Miserable","Monkey","Moose","Morning","Mountain","Mustard","Naked","Neutron","Nitrogen","Notorius","Obscure","Ostrich","Oyster","Parachute","Peasant","Pepsi","Pineapple","Plastic","Postal","Pottery","Prehistoric","Propellor","Proton","Psychotic","Puppet","Railroad","Red","Rhinestone","Roadrunner","Rubber","Scarecrow","Scoreboard","Scorpion","Sex","Shaggy","Shower","Sinister","Skunk","Slime","Smoke","Sound","Soybean","Speedy","Stagecoach","Street","Subdivision","Summer","Sunshine","Surfing","Swollen","Sycamore","Toboggan","Tea","Temple","Test","Tire","Tollbooth","Tombstone","Toothbrush","Torpedo","Toupee","Trendy","Trombone","Tuba","Tuna","Tugboat","Tungsten","Unpleasant","Vegetable","Venom","Vigilence","Vulture","Waffle","Warehouse","Waterbed","Weather","Weeknight","Windchill","Windshield","Winter","Wrench","Xylophone","Yellow"],three:["Activity","Adventure","Advantage","Advisors","Affiliation","Agenda","Airmen","Alliance","Almanac","Ambiguity","Amusement","Analogy","Anarchy","Angels","Announcement","Antics","Apparatus","Arsenal","Assassination","Assassins","Assembly","Atmosphere","Authority","Baggage","Band","Bandits","Beast","Believers","Betrayal","Blockade","Bodybags","Brigade","Bunch","Bureaucracy","Burial","Business","Cadets","Calamity","Caper","Carnival","Ceremony","Chaos","Challenge","Charmers","Cheerleaders","Choice","Choir","Chorus","Circus","Civilization","Coalition","College","Collision","Colony","Combo","Commanders","Committee","Community","Company","Conclave","Conclusion","Conductors","Confederacy","Conference","Confession","Confusion","Congregation","Conjecture","Connection","Conspiracy","Consultants","Contest","Convention","Corporation","Council","Craziness","Crew","Crisis","Culprits","Cult","Damage","Dance","Dancers","Death","Debacle","Deceit","Deduction","Democracy","Demons","Demonstration","Departure","Design","Desire","Detectives","Devils","Difference","Dilemma","Directory","Disadvantage","Disappearance","Dispute","Dominion","Downfall","Dummies","Dungeon","Edict","Effigy","Emergency","Empire","Encounter","Endeavor","Endorsement","Engineers","Enigma","Ensemble","Evidence","Examiners","Executioners","Executives","Exhibit","Exhibition","Exit","Expedition","Experience","Experiment","Explosion","Express","Extinction","Facility","Factory","Federation","Festival","Fever","Fiends","Fishermen","Five","Force","Formation","Foundation","Fragment","Freaks","Freedom","Frolic","Gangsters","Gazette","Genius","Gladiators","Glee Club","Goldfish","Gravy","Growth","Hammer","Harmony","Highway","Honesty","Hypocrisy","Hypothesis","Incident","Inequality","Influence","Information","Institute","Intensity","Interference","Inversion","Jamboree","Jesters","Jockeys","Journey","Judgment","Jugglers","Justification","Kingdom","Ladies","League","Leverage","Lighthouse","Lords","Mansion","Maze","Memorial","Menu","Miracle","Mischief","Monument","Motel","Motion","Motive","Museum","Mutants","Mutiny","Mystery","Nation","Navigators","Neighborhood","Network","Orbit","Origin","Outcome","Overview","Paradox","Parents","Party","Patrol","Penalty","Performers","Phantoms","Philharmonic","Pilots","Pioneers","Pirates","Plan","Planet","Platoon","Platform","Police","Position","Posse","Power","Prank","Premise","Pressure","Principle","Prisoners","Problem","Procedure","Process","Professors","Project","Property","Prophecy","Proposition","Pursuit","Quality","Quartet","Question","Quotient","Rangers","Reaction","Rebellion","Reform","Regime","Relics","Remedy","Republic","Requirement","Resentment","Response","Resources","Result","Revision","Revival","Rodeo","Romp","Saboteurs","Saints","Sanction","Sandwich","Scheme","Scoundrels","Service","Shadow","Shift","Significance","Sinners","Society","Solution","Soul","Space","Specimen","Squad","Stain","Standard","Statement","Station","Stockbrokers","Strategy","Students","Substances","Substitute","Subterfuge","Subway","Supervisors","Switch","Symphony","Syndicate","Syndrome","System","Tactics","Testament","Theory","Thieves","Titans","Tragedy","Transfer","Transformation","Trance","Trick","Trilogy","Trio","Troopers","Trustees","Tunnel","Turmoil","Twilight","Understatement","Union","Universe","University","Uprising","Uproar","Velocity","Vengeance","Venture","Villains","Violation","Volunteers","Voyage","Warheads","Warriors","Workshop","Worship","Yankees","Yodelers","Zealots"],name:["#firstname#","#firstname# #lastname#"],adjective:["Aristotelian","Arthurian","Bohemian","Brethren","Mosaic","Oceanic","Proctor","Terran","Tudor","abroad","absorbing","abstract","academic","accelerated","accented","accountant","acquainted","acute","addicting","addictive","adjustable","admired","adult","adverse","advised","aerosol","afraid","aggravated","aggressive","agreeable","alienate","aligned","all-round","alleged","almond","alright","altruistic","ambient","ambivalent","amiable","amino","amorphous","amused","anatomical","ancestral","angelic","angrier","answerable","antiquarian","antiretroviral","appellate","applicable","apportioned","approachable","appropriated","archer","aroused","arrested","assertive","assigned","athletic","atrocious","attained","authoritarian","autobiographical","avaricious","avocado","awake","awsome","backstage","backwoods","balding","bandaged","banded","banned","barreled","battle","beaten","begotten","beguiled","bellied","belted","beneficent","besieged","betting","big-money","biggest","biochemical","bipolar","blackened","blame","blessed","blindfolded","bloat","blocked","blooded","blue-collar","blushing","boastful","bolder","bolstered","bonnie","bored","boundary","bounded","bounding","branched","brawling","brazen","breeding","bridged","brimming","brimstone","broadest","broiled","broker","bronze","bruising","buffy","bullied","bungling","burial","buttery","candied","canonical","cantankerous","cardinal","carefree","caretaker","casual","cathartic","causal","chapel","characterized","charcoal","cheeky","cherished","chipotle","chirping","chivalrous","circumstantial","civic","civil","civilised","clanking","clapping","claptrap","classless","cleansed","cleric","cloistered","codified","colloquial","colour","combat","combined","comely","commissioned","commonplace","commuter","commuting","comparable","complementary","compromising","conceding","concentrated","conceptual","conditioned","confederate","confident","confidential","confining","confuse","congressional","consequential","conservative","constituent","contaminated","contemporaneous","contraceptive","convertible","convex","cooked","coronary","corporatist","correlated","corroborated","cosmic","cover","crash","crypto","culminate","cushioned","dandy","dashing","dazzled","decreased","decrepit","dedicated","defaced","defective","defenseless","deluded","deodorant","departed","depress","designing","despairing","destitute","detective","determined","devastating","deviant","devilish","devoted","diagonal","dictated","didactic","differentiated","diffused","dirtier","disabling","disconnected","discovered","disdainful","diseased","disfigured","disheartened","disheveled","disillusioned","disparate","dissident","doable","doctrinal","doing","dotted","double-blind","downbeat","dozen","draining","draught","dread","dried","dropped","dulled","duplicate","eaten","echoing","economical","elaborated","elastic","elective","electoral","elven","embryo","emerald","emergency","emissary","emotional","employed","enamel","encased","encrusted","endangered","engraved","engrossing","enlarged","enlisted","enlivened","ensconced","entangled","enthralling","entire","envious","eradicated","eroded","esoteric","essential","evaporated","ever-present","evergreen","everlasting","exacting","exasperated","excess","exciting","executable","existent","exonerated","exorbitant","exponential","export","extraordinary","exultant","exulting","facsimile","fading","fainter","faith-based","fallacious","faltering","famous","fancier","fast-growing","fated","favourable","fearless","feathered","fellow","fermented","ferocious","fiddling","filling","firmer","fitted","flammable","flawed","fledgling","fleshy","flexible","flickering","floral","flowering","flowing","foggy","folic","foolhardy","foolish","footy","forehand","forked","formative","formulaic","foul-mouthed","fractional","fragrant","fraudulent","freakish","freckled","freelance","freight","fresh","fretted","frugal","fulfilling","fuming","funded","funny","garbled","gathered","geologic","geometric","gibberish","gilded","ginger","glare","glaring","gleaming","glorified","glorious","goalless","gold-plated","goody","grammatical","grande","grateful","gratuitous","graven","greener","grinding","grizzly","groaning","grudging","guaranteed","gusty","half-breed","hand-held","handheld","hands-off","hard-pressed","harlot","healing","healthier","healthiest","heart","heart-shaped","heathen","hedonistic","heralded","herbal","high-density","high-performance","high-res","high-yield","hissy","hitless","holiness","homesick","honorable","hooded","hopeless","horrendous","horrible","hot-button","huddled","human","humbling","humid","humiliating","hypnotized","idealistic","idiosyncratic","ignited","illustrated","illustrative","imitated","immense","immersive","immigrant","immoral","impassive","impressionable","improbable","impulsive","in-between","in-flight","inattentive","inbound","inbounds","incalculable","incomprehensible","indefatigable","indigo","indiscriminate","indomitable","inert","inflate","inform","inheriting","injured","injurious","inking","inoffensive","insane","insensible","insidious","insincere","insistent","insolent","insufferable","intemperate","interdependent","interesting","interfering","intern","interpreted","intersecting","intolerable","intolerant","intuitive","irresolute","irritate","jealous","jerking","joining","joint","journalistic","joyful","keyed","knowing","lacklustre","laden","lagging","lamented","laughable","layered","leather","leathern","leery","left-footed","legible","leisure","lessening","liberating","life-size","lifted","lightest","limitless","listening","literary","liver","livid","lobster","locked","long-held","long-lasting","long-running","long-suffering","loudest","loveliest","low-budget","low-carb","lowering","lucid","luckless","lusty","luxurious","magazine","maniac","manmade","maroon","mastered","mated","material","materialistic","meaningful","measuring","mediaeval","medical","meditated","medley","melodic","memorable","memorial","metabolic","metallic","metallurgical","metering","midair","midterm","midway","mighty","migrating","mind-blowing","mind-boggling","minor","mirrored","misguided","misshapen","mitigated","mixed","modernized","molecular","monarch","monastic","morbid","motley","motorized","mounted","multi-million","multidisciplinary","muscled","muscular","muted","mysterious","mythic","nail-biting","natural","nauseous","negative","networked","neurological","neutered","newest","night","nitrous","no-fly","noncommercial","nonsense","north","nuanced","occurring","offensive","oldest","oncoming","one-eyed","one-year","onstage","onward","opaque","open-ended","operating","opportunist","opposing","opt-in","ordinate","outdone","outlaw","outsized","overboard","overheated","oversize","overworked","oyster","paced","panting","paralyzed","paramount","parental","parted","partisan","passive","pastel","patriot","peacekeeping","pedestrian","peevish","penal","penned","pensive","perceptual","perky","permissible","pernicious","perpetuate","perplexed","pervasive","petrochemical","philosophical","picturesque","pillaged","piped","piquant","pitching","plausible","pliable","plumb","politician","polygamous","poorest","portmanteau","posed","positive","possible","postpartum","prank","pre-emptive","precocious","predicted","premium","preparatory","prerequisite","prescient","preserved","presidential","pressed","pressurized","presumed","prewar","priced","pricier","primal","primer","primetime","printed","private","problem","procedural","process","prodigious","professional","programmed","progressive","prolific","promising","promulgated","pronged","proportionate","protracted","pulled","pulsed","purgatory","quick","rapid-fire","raunchy","razed","reactive","readable","realizing","recognised","recovering","recurrent","recycled","redeemable","reflecting","regal","registering","reliable","reminiscent","remorseless","removable","renewable","repeating","repellent","reserve","resigned","respectful","rested","restrict","resultant","retaliatory","retiring","revelatory","reverend","reversing","revolving","ridiculous","right-hand","ringed","risque","robust","roomful","rotating","roused","rubber","run-down","running","runtime","rustling","safest","salient","sanctioned","saute","saved","scandalized","scarlet","scattering","sceptical","scheming","scoundrel","scratched","scratchy","scrolled","seated","second-best","segregated","self-taught","semiautomatic","senior","sensed","sentient","sexier","shadowy","shaken","shaker","shameless","shaped","shiny","shipped","shivering","shoestring","short","short-lived","signed","simplest","simplistic","sizable","skeleton","skinny","skirting","skyrocketed","slamming","slanting","slapstick","sleek","sleepless","sleepy","slender","slimmer","smacking","smokeless","smothered","smouldering","snuff","socialized","solid-state","sometime","sought","spanking","sparing","spattered","specialized","specific","speedy","spherical","spiky","spineless","sprung","squint","stainless","standing","starlight","startled","stately","statewide","stereoscopic","sticky","stimulant","stinky","stoked","stolen","storied","strained","strapping","strengthened","stubborn","stylized","suave","subjective","subjugated","subordinate","succeeding","suffering","summary","sunset","sunshine","supernatural","supervisory","supply-side","surrogate","suspended","suspenseful","swarthy","sweating","sweeping","swinging","swooning","sympathize","synchronized","synonymous","synthetic","tailed","tallest","tangible","tanked","tarry","technical","tectonic","telepathic","tenderest","territorial","testimonial","theistic","thicker","threatening","tight-lipped","timed","timely","timid","torrent","totalled","tougher","traditional","transformed","trapped","traveled","traverse","treated","trial","trunk","trusting","trying","twisted","two-lane","tyrannical","unaided","unassisted","unassuming","unattractive","uncapped","uncomfortable","uncontrolled","uncooked","uncooperative","underground","undersea","undisturbed","unearthly","uneasy","unequal","unfazed","unfinished","unforeseen","unforgivable","unidentified","unimaginative","uninspired","unintended","uninvited","universal","unmasked","unorthodox","unparalleled","unpleasant","unprincipled","unread","unreasonable","unregulated","unreliable","unremitting","unsafe","unsanitary","unsealed","unsuccessful","unsupervised","untimely","unwary","unwrapped","uppity","upstart","useless","utter","valiant","valid","valued","vanilla","vaulting","vaunted","veering","vegetative","vented","verbal","verifying","veritable","versed","vinyl","virgin","visceral","visual","voluptuous","walk-on","wanton","warlike","washed","waterproof","waved","weakest","well-bred","well-chosen","well-informed","wetting","wheeled","whirlwind","widen","widening","willful","willing","winnable","winningest","wireless","wistful","woeful","wooded","woodland","wordless","workable","worldly","worldwide","worst-case","worsted","worthless"],firstname:["Alton","Cleveland","Noe","Cedric","Dario","Phil","Quinton","Arlen","Orlando","Brain","Davis","Faustino","Geoffrey","Marvin","Leif","Leland","Reyes","Lyndon","Devon","Clement","Laurence","Sidney","Pierre","Raleigh","Ed","Emerson","Adolph","Dick","Marcelo","Cristobal","Jerold","Jesus","Adalberto","Brant","Harvey","Franklyn","Prince","Valentin","Dustin","Edmundo","Dion","Gerardo","Tom","Hans","Rene","Santiago","Hai","Lucien","Sydney","Lee","Carina","Lucila","Tana","Jenine","Rufina","Linette","Lacey","Alesia","Inger","Monica","Niki","Erna","Mitsuko","Wilda","Earleen","Glendora","Edwina","Lavada","Gita","Nancee","Anh","Brittni","Julianna","Linnie","Dedra","Clora","Casandra","Gretchen","Lila","Keshia","Barb","Libby","Wendi","Lakia","Lasonya","Ingrid","Ebony","Mui","Shemeka","Corliss","Kayla","Georgette","Maira","Georgann","Jonna","Kourtney","Vicky","Norene","Laveta","Delana"],lastname:["Nissen","Smolen","Tanguay","Rochelle","Engram","Gerner","Tolbert","Vanallen","Medders","Hubler","Lessley","Mccowan","Harkey","Barwick","Sum","Goodale","Stiles","Bergstrom","Brin","Voris","Magallanes","Tolentino","Carlisle","Mccaskey","Abston","Gertsch","Manzella","Lavine","Swanner","Trueblood","Sinnott","Acy","Grauer","Thielen","Belles","Ardon","Barbe","Knoll","Condron","Fluitt","Burrill","Dahlberg","Rippel","Alvarado","Peluso","Axelrod","Flanary","Mccleary","Wilson","Wegman","Crotty","Cruise","Viau","Peele","Holdeman","Plump","Deen","Treadway","Henningsen","Munger","Takahashi","Deibel","Foshee","Steadman","Kirsch","Loar","Kantz","Kilmon","Rueb","Suhr","Ellinger","Torpey","Maness","Herrell","Hawke","Feltmann","Cecere","Cremin","Hight","Ostrom","Grothe","Kirch","Norling","Puccio","Mcfarlain","Klug","Greenlee","Steinberg","Boltz","Howarth","Marcos","Purcell","Luck","Thompson","Delima","Heiser","Champ","Fiqueroa","Wrench","Rist"],objects:["CD","Christmas ornament","acorn","apple","bag","bag of cotton balls","bag of popcorn","bag of rubber bands","ball of yarn","balloon","banana","bananas","bandana","bangle bracelet","bar of soap","baseball","baseball bat","baseball hat","basketball","beaded bracelet","beaded necklace","bed","beef","bell","belt","blouse","blowdryer","bonesaw","book","book of jokes","book of matches","bookmark","boom box","bottle","bottle cap","bottle of glue","bottle of honey","bottle of ink","bottle of lotion","bottle of nail polish","bottle of oil","bottle of paint","bottle of perfume","bottle of pills","bottle of soda","bottle of sunscreen","bottle of syrup","bottle of water","bouquet of flowers","bow","bow tie","bowl","box","box of Q-tips","box of baking soda","box of chalk","box of chocolates","box of crayons","box of markers","box of tissues","bracelet","bread","broccoli","brush","buckle","butter knife","button","camera","can of beans","can of chili","can of peas","can of whipped cream","candle","candlestick","candy bar","candy cane","candy wrapper","canteen","canvas","car","card","carrot","carrots","cars","carton of ice cream","cat","catalogue","cell phone","cellphone","cement stone","chain","chair","chalk","chapter book","check book","chenille stick","chicken","children's book","chocolate","class ring","clay pot","clock","clothes","clothes pin","coffee mug","coffee pot","comb","comic book","computer","conditioner","container of pudding","cookie jar","cookie tin","cork","couch","cow","cowboy hat","craft book","credit card","crow","crowbar","cucumber","cup","dagger","deodorant","desk","dictionary","dog","dolphin","domino set","door","dove","drawer","drill press","egg","egg beater","egg timer","empty bottle","empty jar","empty tin can","eraser","extension cord","eye liner","face wash","fake flowers","feather","feather duster","few batteries","fish","fishing hook","flag","flashlight","floor","flowers","flyswatter","food","football","fork","fridge","frying pan","game CD","game cartridge","garden spade","giraffe","glass","glasses","glow stick","grid paper","grocery list","hair brush","hair clip","hair pin","hair ribbon","hair tie","hammer","hamster","hand bag","hand fan","hand mirror","handbasket","handful of change","handheld game system","hanger","harmonica","helmet","house","ice cream stick","ice cube","ice pick","incense holder","ipod","ipod charger","jar of jam","jar of peanut butter","jar of pickles","jigsaw puzzle","key","key chain","keyboard","keychain","keys","kitchen knife","knife","lace","ladle","lamp","lamp shade","laser pointer","leg warmers","lemon","letter opener","light","light bulb","lighter","lime","lion","lip gloss","locket","lotion","magazine","magnet","magnifying glass","map","marble","martini glass","matchbook","microphone","milk","miniature portrait","mirror","mobile phone","model car","money","monitor","mop","mouse pad","mp3 player","multitool","music CD","nail","nail clippers","nail filer","necktie","needle","notebook","notepad","novel","ocarina","orange","outlet","pack of cards","package of crisp and crunchy edibles","package of glitter","packet of seeds","pail","paint brush","paintbrush","pair of binoculars","pair of dice","pair of earrings","pair of glasses","pair of handcuffs","pair of knitting needles","pair of rubber gloves","pair of safety goggles","pair of scissors","pair of socks","pair of sunglasses","pair of tongs","pair of water goggles","panda","pants","paper","paperclip","pasta strainer","pearl necklace","pen","pencil","pencil holder","pepper shaker","perfume","phone","photo album","picture frame","piece of gum","pillow","pinecone","plastic fork","plate","plush bear","plush cat","plush dinosaur","plush dog","plush frog","plush octopus","plush pony","plush rabbit","plush unicorn","pocketknife","pocketwatch","pool stick","pop can","postage stamp","puddle","purse","purse/bag","quartz crystal","quilt","rabbit","radio","rat","remote","rhino","ring","rock","roll of duct tape","roll of gauze","roll of masking tape","roll of stickers","roll of toilet paper","rolling pin","rope","rubber band","rubber duck","rubber stamp","rug","rusty nail","safety pin","sailboat","salt shaker","sand paper","sandal","sandglass","scallop shell","scarf","scotch tape","screw","screwdriver","seat belt","shampoo","shark","sharpie","shawl","sheep","sheet of paper","shirt","shirt button","shoe lace","shoes","shopping bag","shovel","sidewalk","sketch pad","slipper","small pouch","snail shell","snowglobe","soap","soccer ball","socks","sofa","spatula","speakers","spectacles","spice bottle","sponge","spool of ribbon","spool of string","spool of thread","spool of wire","spoon","spring","squirrel","squirt gun","statuette","steak knife","stick","stick of incense","sticker book","sticky note","stockings","stop sign","straw","street lights","sun glasses","sword","table","tea cup","tea pot","teddies","television","tennis ball","tennis racket","thermometer","thimble","thread","tiger","tire swing","tissue box","toe ring","toilet","toilet paper tube","tomato","tooth pick","toothbrush","toothpaste","toothpick","towel","toy boat","toy car","toy plane","toy robot","toy soldier","toy top","trash bag","tree","trucks","tube of lip balm","tube of lipstick","turtle","tv","tweezers","twister","umbrella","vase","video games","wallet","washcloth","washing machine","watch","water","water bottle","wedding ring","whale","whip","whistle","white out","window","wine glass","wireless control","wishbone","wooden spoon","word search","wrench","wristwatch","zebra","zipper"],word:["#objects#","#two#","#animals#"],animals:["aardvark","alligator","alpaca","antelope","ape","armadillo","baboon","badger","bat","bear","beaver","bison","boar","buffalo","bull","camel","canary","capybara","cat","chameleon","cheetah","chimpanzee","chinchilla","chipmunk","cougar","cow","coyote","crocodile","crow","deer","dingo","dog","donkey","dromedary","elephant","elk","ewe","ferret","finch","fish","fox","frog","gazelle","gila monster","giraffe","gnu","goat","gopher","gorilla","grizzly bear","ground hog","guinea pig","hamster","hedgehog","hippopotamus","hog","horse","hyena","ibex","iguana","impala","jackal","jaguar","kangaroo","koala","lamb","lemur","leopard","lion","lizard","llama","lynx","mandrill","marmoset","mink","mole","mongoose","monkey","moose","mountain goat","mouse","mule","muskrat","mustang","mynah bird","newt","ocelot","opossum","orangutan","oryx","otter","ox","panda","panther","parakeet","parrot","pig","platypus","polar bear","porcupine","porpoise","prairie dog","puma","rabbit","raccoon","ram","rat","reindeer","reptile","rhinoceros","salamander","seal","sheep","shrew","silver fox","skunk","sloth","snake","squirrel","tapir","tiger","toad","turtle","walrus","warthog","weasel","whale","wildcat","wolf","wolverine","wombat","woodchuck","yak","zebra"],alphabet:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ensemble:["trio","quartet","orchestra","brass band","allstars","Band","show band and review","marching band","jam band","jug band","jazz band","revival","big band"]}},function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"TYPE_TEXT",function(){return p}),i.d(s,"TYPE_NEWLINE",function(){return g}),i.d(s,"TYPE_FG",function(){return f}),i.d(s,"TYPE_BG",function(){return m}),i.d(s,"measure",function(){return _}),i.d(s,"tokenize",function(){return b});var o=i(0),r=i(3);class n extends r.a{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}schedule(e){requestAnimationFrame(e)}getContainer(){return this._ctx.canvas}setOptions(e){super.setOptions(e);const t=`${e.fontStyle?`${e.fontStyle} `:""} ${e.fontSize}px ${e.fontFamily}`;this._ctx.font=t,this._updateSize(),this._ctx.font=t,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}eventToPosition(e,t){let i=this._ctx.canvas,s=i.getBoundingClientRect();return e-=s.left,t-=s.top,e*=i.width/s.width,t*=i.height/s.height,e<0||t<0||e>=i.width||t>=i.height?[-1,-1]:this._normalizedEventToPosition(e,t)}}var a=i(1);class l extends n{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(e,t){let[i,s,o,r,n]=e,a=[(i+1)*this._spacingX,s*this._spacingY+this._hexSize];if(this._options.transpose&&a.reverse(),t&&(this._ctx.fillStyle=n,this._fill(a[0],a[1])),!o)return;this._ctx.fillStyle=r;let l=[].concat(o);for(let e=0;e<l.length;e++)this._ctx.fillText(l[e],a[0],Math.ceil(a[1]))}computeSize(e,t){return this._options.transpose&&(e+=t,e-=t=e-t),[Math.floor(e/this._spacingX)-1,Math.floor((t-2*this._hexSize)/this._spacingY+1)]}computeFontSize(e,t){this._options.transpose&&(e+=t,e-=t=e-t);let i=2*e/((this._options.width+1)*Math.sqrt(3))-1,s=t/(2+1.5*(this._options.height-1)),o=Math.min(i,s),r=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let n=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=r;let a=n/100,l=2*(o=Math.floor(o)+1)/(this._options.spacing*(1+a/Math.sqrt(3)));return Math.ceil(l)-1}_normalizedEventToPosition(e,t){let i;this._options.transpose?(e+=t,e-=t=e-t,i=this._ctx.canvas.width):i=this._ctx.canvas.height;let s=i/this._options.height;return t=Math.floor(t/s),Object(a.mod)(t,2)?(e-=this._spacingX,e=1+2*Math.floor(e/(2*this._spacingX))):e=2*Math.floor(e/(2*this._spacingX)),[e,t]}_fill(e,t){let i=this._hexSize,s=this._options.border;const o=this._ctx;o.beginPath(),this._options.transpose?(o.moveTo(e-i+s,t),o.lineTo(e-i/2+s,t+this._spacingX-s),o.lineTo(e+i/2-s,t+this._spacingX-s),o.lineTo(e+i-s,t),o.lineTo(e+i/2-s,t-this._spacingX+s),o.lineTo(e-i/2+s,t-this._spacingX+s),o.lineTo(e-i+s,t)):(o.moveTo(e,t-i+s),o.lineTo(e+this._spacingX-s,t-i/2+s),o.lineTo(e+this._spacingX-s,t+i/2-s),o.lineTo(e,t+i-s),o.lineTo(e-this._spacingX+s,t+i/2-s),o.lineTo(e-this._spacingX+s,t-i/2+s),o.lineTo(e,t-i+s)),o.fill()}_updateSize(){const e=this._options,t=Math.ceil(this._ctx.measureText("W").width);let i,s;this._hexSize=Math.floor(e.spacing*(e.fontSize+t/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=1.5*this._hexSize,e.transpose?(i="height",s="width"):(i="width",s="height"),this._ctx.canvas[i]=Math.ceil((e.width+1)*this._spacingX),this._ctx.canvas[s]=Math.ceil((e.height-1)*this._spacingY+2*this._hexSize)}}class h extends n{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(e){super.setOptions(e),this._canvasCache={}}draw(e,t){h.cache?this._drawWithCache(e):this._drawNoCache(e,t)}_drawWithCache(e){let t,[i,s,o,r,n]=e,a=""+o+r+n;if(a in this._canvasCache)t=this._canvasCache[a];else{let e=this._options.border,i=(t=document.createElement("canvas")).getContext("2d");if(t.width=this._spacingX,t.height=this._spacingY,i.fillStyle=n,i.fillRect(e,e,t.width-e,t.height-e),o){i.fillStyle=r,i.font=this._ctx.font,i.textAlign="center",i.textBaseline="middle";let e=[].concat(o);for(let t=0;t<e.length;t++)i.fillText(e[t],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[a]=t}this._ctx.drawImage(t,i*this._spacingX,s*this._spacingY)}_drawNoCache(e,t){let[i,s,o,r,n]=e;if(t){let e=this._options.border;this._ctx.fillStyle=n,this._ctx.fillRect(i*this._spacingX+e,s*this._spacingY+e,this._spacingX-e,this._spacingY-e)}if(!o)return;this._ctx.fillStyle=r;let a=[].concat(o);for(let e=0;e<a.length;e++)this._ctx.fillText(a[e],(i+.5)*this._spacingX,Math.ceil((s+.5)*this._spacingY))}computeSize(e,t){return[Math.floor(e/this._spacingX),Math.floor(t/this._spacingY)]}computeFontSize(e,t){let i=Math.floor(e/this._options.width),s=Math.floor(t/this._options.height),o=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let r=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=o;let n=r/100*s/i;return n>1&&(s=Math.floor(s/n)),Math.floor(s/this._options.spacing)}_normalizedEventToPosition(e,t){return[Math.floor(e/this._spacingX),Math.floor(t/this._spacingY)]}_updateSize(){const e=this._options,t=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(e.spacing*t),this._spacingY=Math.ceil(e.spacing*e.fontSize),e.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=e.width*this._spacingX,this._ctx.canvas.height=e.height*this._spacingY}}h.cache=!1;class c extends n{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(e,t){let[i,s,o,r,n]=e,a=this._options.tileWidth,l=this._options.tileHeight;if(t&&(this._options.tileColorize?this._ctx.clearRect(i*a,s*l,a,l):(this._ctx.fillStyle=n,this._ctx.fillRect(i*a,s*l,a,l))),!o)return;let h=[].concat(o),c=[].concat(r),u=[].concat(n);for(let e=0;e<h.length;e++){let t=this._options.tileMap[h[e]];if(!t)throw new Error(`Char "${h[e]}" not found in tileMap`);if(this._options.tileColorize){let o=this._colorCanvas,r=o.getContext("2d");r.globalCompositeOperation="source-over",r.clearRect(0,0,a,l);let n=c[e],h=u[e];r.drawImage(this._options.tileSet,t[0],t[1],a,l,0,0,a,l),"transparent"!=n&&(r.fillStyle=n,r.globalCompositeOperation="source-atop",r.fillRect(0,0,a,l)),"transparent"!=h&&(r.fillStyle=h,r.globalCompositeOperation="destination-over",r.fillRect(0,0,a,l)),this._ctx.drawImage(o,i*a,s*l,a,l)}else this._ctx.drawImage(this._options.tileSet,t[0],t[1],a,l,i*a,s*l,a,l)}}computeSize(e,t){return[Math.floor(e/this._options.tileWidth),Math.floor(t/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(e,t){return[Math.floor(e/this._options.tileWidth),Math.floor(t/this._options.tileHeight)]}_updateSize(){const e=this._options;this._ctx.canvas.width=e.width*e.tileWidth,this._ctx.canvas.height=e.height*e.tileHeight,this._colorCanvas.width=e.tileWidth,this._colorCanvas.height=e.tileHeight}}var u=i(4);const d=/%([bc]){([^}]*)}/g,p=0,g=1,f=2,m=3;function _(e,t){let i={width:0,height:1},s=b(e,t),o=0;for(let e=0;e<s.length;e++){let t=s[e];switch(t.type){case p:o+=t.value.length;break;case g:i.height++,i.width=Math.max(i.width,o),o=0}}return i.width=Math.max(i.width,o),i}function b(e,t){let i=[],s=0;e.replace(d,function(t,o,r,n){let a=e.substring(s,n);return a.length&&i.push({type:p,value:a}),i.push({type:"c"==o?f:m,value:r.trim()}),s=n+t.length,""});let o=e.substring(s);return o.length&&i.push({type:p,value:o}),function(e,t){t||(t=1/0);let i=0,s=0,o=-1;for(;i<e.length;){let r=e[i];if(r.type==g&&(s=0,o=-1),r.type!=p){i++;continue}for(;0==s&&" "==r.value.charAt(0);)r.value=r.value.substring(1);let n=r.value.indexOf("\n");if(-1!=n){r.value=y(e,i,n,!0);let t=r.value.split("");for(;t.length&&" "==t[t.length-1];)t.pop();r.value=t.join("")}if(r.value.length){if(s+r.value.length>t){let n=-1;for(;;){let e=r.value.indexOf(" ",n+1);if(-1==e)break;if(s+e>t)break;n=e}if(-1!=n)r.value=y(e,i,n,!0);else if(-1!=o){let t=e[o],s=t.value.lastIndexOf(" ");t.value=y(e,o,s,!0),i=o}else r.value=y(e,i,t-s,!1)}else s+=r.value.length,-1!=r.value.indexOf(" ")&&(o=i);i++}else e.splice(i,1)}e.push({type:g});let r=null;for(let t=0;t<e.length;t++){let i=e[t];switch(i.type){case p:r=i;break;case g:if(r){let e=r.value.split("");for(;e.length&&" "==e[e.length-1];)e.pop();r.value=e.join("")}r=null}}return e.pop(),e}(i,t)}function y(e,t,i,s){let o={type:g},r={type:p,value:e[t].value.substring(i+(s?1:0))};return e.splice(t+1,0,o,r),e[t].value.substring(0,i)}let w=80,k=25;const v={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},C={VK_CANCEL:3,VK_HELP:6,VK_BACK_SPACE:8,VK_TAB:9,VK_CLEAR:12,VK_RETURN:13,VK_ENTER:14,VK_SHIFT:16,VK_CONTROL:17,VK_ALT:18,VK_PAUSE:19,VK_CAPS_LOCK:20,VK_ESCAPE:27,VK_SPACE:32,VK_PAGE_UP:33,VK_PAGE_DOWN:34,VK_END:35,VK_HOME:36,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_PRINTSCREEN:44,VK_INSERT:45,VK_DELETE:46,VK_0:48,VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_COLON:58,VK_SEMICOLON:59,VK_LESS_THAN:60,VK_EQUALS:61,VK_GREATER_THAN:62,VK_QUESTION_MARK:63,VK_AT:64,VK_A:65,VK_B:66,VK_C:67,VK_D:68,VK_E:69,VK_F:70,VK_G:71,VK_H:72,VK_I:73,VK_J:74,VK_K:75,VK_L:76,VK_M:77,VK_N:78,VK_O:79,VK_P:80,VK_Q:81,VK_R:82,VK_S:83,VK_T:84,VK_U:85,VK_V:86,VK_W:87,VK_X:88,VK_Y:89,VK_Z:90,VK_CONTEXT_MENU:93,VK_NUMPAD0:96,VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8:104,VK_NUMPAD9:105,VK_MULTIPLY:106,VK_ADD:107,VK_SEPARATOR:108,VK_SUBTRACT:109,VK_DECIMAL:110,VK_DIVIDE:111,VK_F1:112,VK_F2:113,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_F10:121,VK_F11:122,VK_F12:123,VK_F13:124,VK_F14:125,VK_F15:126,VK_F16:127,VK_F17:128,VK_F18:129,VK_F19:130,VK_F20:131,VK_F21:132,VK_F22:133,VK_F23:134,VK_F24:135,VK_NUM_LOCK:144,VK_SCROLL_LOCK:145,VK_CIRCUMFLEX:160,VK_EXCLAMATION:161,VK_DOUBLE_QUOTE:162,VK_HASH:163,VK_DOLLAR:164,VK_PERCENT:165,VK_AMPERSAND:166,VK_UNDERSCORE:167,VK_OPEN_PAREN:168,VK_CLOSE_PAREN:169,VK_ASTERISK:170,VK_PLUS:171,VK_PIPE:172,VK_HYPHEN_MINUS:173,VK_OPEN_CURLY_BRACKET:174,VK_CLOSE_CURLY_BRACKET:175,VK_TILDE:176,VK_COMMA:188,VK_PERIOD:190,VK_SLASH:191,VK_BACK_QUOTE:192,VK_OPEN_BRACKET:219,VK_BACK_SLASH:220,VK_CLOSE_BRACKET:221,VK_QUOTE:222,VK_META:224,VK_ALTGR:225,VK_WIN:91,VK_KANA:21,VK_HANGUL:21,VK_EISU:22,VK_JUNJA:23,VK_FINAL:24,VK_HANJA:25,VK_KANJI:25,VK_CONVERT:28,VK_NONCONVERT:29,VK_ACCEPT:30,VK_MODECHANGE:31,VK_SELECT:41,VK_PRINT:42,VK_EXECUTE:43,VK_SLEEP:95},x={hex:l,rect:h,tile:c,term:u.a},S={width:w,height:k,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};class M{constructor(e={}){this._data={},this._dirty=!1,this._options={},e=Object.assign({},S,e),this.setOptions(e),this.DEBUG=this.DEBUG.bind(this),this._tick=this._tick.bind(this),this._backend.schedule(this._tick)}DEBUG(e,t,i){let s=[this._options.bg,this._options.fg];this.draw(e,t,null,null,s[i%s.length])}clear(){this._data={},this._dirty=!0}setOptions(e){if(Object.assign(this._options,e),e.width||e.height||e.fontSize||e.fontFamily||e.spacing||e.layout){if(e.layout){let t=x[e.layout];this._backend=new t}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(e,t){return this._backend.computeSize(e,t)}computeFontSize(e,t){return this._backend.computeFontSize(e,t)}computeTileSize(e,t){return[Math.floor(e/this._options.width),Math.floor(t/this._options.height)]}eventToPosition(e){let t,i;return"touches"in e?(t=e.touches[0].clientX,i=e.touches[0].clientY):(t=e.clientX,i=e.clientY),this._backend.eventToPosition(t,i)}draw(e,t,i,s,o){s||(s=this._options.fg),o||(o=this._options.bg);let r=`${e},${t}`;this._data[r]=[e,t,i,s,o],!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[r]=!0)}drawText(e,t,i,s){let o=null,r=null,n=e,a=t,l=1;s||(s=this._options.width-e);let h=b(i,s);for(;h.length;){let t=h.shift();switch(t.type){case p:let i=!1,s=!1,h=!1,c=!1;for(let e=0;e<t.value.length;e++){let l=t.value.charCodeAt(e),u=t.value.charAt(e);h=l>65280&&l<65377||l>65500&&l<65512||l>65518,i=32==u.charCodeAt(0)||12288==u.charCodeAt(0),!c||h||i||n++,h&&!s&&n++,this.draw(n++,a,u,o,r),s=i,c=h}break;case f:o=t.value||null;break;case m:r=t.value||null;break;case g:n=e,a++,l++}}return l}_tick(){if(this._backend.schedule(this._tick),this._dirty){if(!0===this._dirty){this._backend.clear();for(let e in this._data)this._draw(e,!1)}else for(let e in this._dirty)this._draw(e,!0);this._dirty=!1}}_draw(e,t){let i=this._data[e];i[4]!=this._options.bg&&(t=!0),this._backend.draw(i,t)}}M.Rect=h,M.Hex=l,M.Tile=c,M.Term=u.a;class T{constructor(e){this._options={words:!1,order:3,prior:.001},Object.assign(this._options,e),this._boundary=String.fromCharCode(0),this._suffix=this._boundary,this._prefix=[];for(let e=0;e<this._options.order;e++)this._prefix.push(this._boundary);this._priorValues={},this._priorValues[this._boundary]=this._options.prior,this._data={}}clear(){this._data={},this._priorValues={}}generate(){let e=[this._sample(this._prefix)];for(;e[e.length-1]!=this._boundary;)e.push(this._sample(e));return this._join(e.slice(0,-1))}observe(e){let t=this._split(e);for(let e=0;e<t.length;e++)this._priorValues[t[e]]=this._options.prior;t=this._prefix.concat(t).concat(this._suffix);for(let e=this._options.order;e<t.length;e++){let i=t.slice(e-this._options.order,e),s=t[e];for(let e=0;e<i.length;e++){let t=i.slice(e);this._observeEvent(t,s)}}}getStats(){let e=[],t=Object.keys(this._priorValues).length;t--,e.push("distinct samples: "+t);let i=Object.keys(this._data).length,s=0;for(let e in this._data)s+=Object.keys(this._data[e]).length;return e.push("dictionary size (contexts): "+i),e.push("dictionary size (events): "+s),e.join(", ")}_split(e){return e.split(this._options.words?/\s+/:"")}_join(e){return e.join(this._options.words?" ":"")}_observeEvent(e,t){let i=this._join(e);i in this._data||(this._data[i]={});let s=this._data[i];t in s||(s[t]=0),s[t]++}_sample(e){e=this._backoff(e);let t=this._join(e),i=this._data[t],s={};if(this._options.prior){for(let e in this._priorValues)s[e]=this._priorValues[e];for(let e in i)s[e]+=i[e]}else s=i;return o.a.getWeightedValue(s)}_backoff(e){for(e.length>this._options.order?e=e.slice(-this._options.order):e.length<this._options.order&&(e=this._prefix.slice(0,this._options.order-e.length).concat(e));!(this._join(e)in this._data)&&e.length>0;)e=e.slice(1);return e}}class A{constructor(){this._time=0,this._events=[],this._eventTimes=[]}getTime(){return this._time}clear(){return this._events=[],this._eventTimes=[],this}add(e,t){let i=this._events.length;for(let e=0;e<this._eventTimes.length;e++)if(this._eventTimes[e]>t){i=e;break}this._events.splice(i,0,e),this._eventTimes.splice(i,0,t)}get(){if(!this._events.length)return null;let e=this._eventTimes.splice(0,1)[0];if(e>0){this._time+=e;for(let t=0;t<this._eventTimes.length;t++)this._eventTimes[t]-=e}return this._events.splice(0,1)[0]}getEventTime(e){let t=this._events.indexOf(e);if(-1!=t)return this._eventTimes[t]}remove(e){let t=this._events.indexOf(e);return-1!=t&&(this._remove(t),!0)}_remove(e){this._events.splice(e,1),this._eventTimes.splice(e,1)}}class R{constructor(){this._queue=new A,this._repeat=[],this._current=null}getTime(){return this._queue.getTime()}add(e,t){return t&&this._repeat.push(e),this}getTimeOf(e){return this._queue.getEventTime(e)}clear(){return this._queue.clear(),this._repeat=[],this._current=null,this}remove(e){let t=this._queue.remove(e),i=this._repeat.indexOf(e);return-1!=i&&this._repeat.splice(i,1),this._current==e&&(this._current=null),t}next(){return this._current=this._queue.get(),this._current}}var V={Simple:class extends R{add(e,t){return this._queue.add(e,0),super.add(e,t)}next(){return this._current&&-1!=this._repeat.indexOf(this._current)&&this._queue.add(this._current,0),super.next()}},Speed:class extends R{add(e,t,i){return this._queue.add(e,void 0!==i?i:1/e.getSpeed()),super.add(e,t)}next(){return this._current&&-1!=this._repeat.indexOf(this._current)&&this._queue.add(this._current,1/this._current.getSpeed()),super.next()}},Action:class extends R{constructor(){super(),this._defaultDuration=1,this._duration=this._defaultDuration}add(e,t,i){return this._queue.add(e,i||this._defaultDuration),super.add(e,t)}clear(){return this._duration=this._defaultDuration,super.clear()}remove(e){return e==this._current&&(this._duration=this._defaultDuration),super.remove(e)}next(){return this._current&&-1!=this._repeat.indexOf(this._current)&&(this._queue.add(this._current,this._duration||this._defaultDuration),this._duration=this._defaultDuration),super.next()}setDuration(e){return this._current&&(this._duration=e),this}}};class D{constructor(e,t={}){this._lightPasses=e,this._options=Object.assign({topology:8},t)}_getCircle(e,t,i){let s,o,r,n=[];switch(this._options.topology){case 4:o=1,r=[0,1],s=[v[8][7],v[8][1],v[8][3],v[8][5]];break;case 6:s=v[6],o=1,r=[-1,1];break;case 8:s=v[4],o=2,r=[-1,1];break;default:throw new Error("Incorrect topology for FOV computation")}let a=e+r[0]*i,l=t+r[1]*i;for(let e=0;e<s.length;e++)for(let t=0;t<i*o;t++)n.push([a,l]),a+=s[e][0],l+=s[e][1];return n}}const E=[[-1,0,0,1],[0,-1,1,0],[0,-1,-1,0],[-1,0,0,-1],[1,0,0,-1],[0,1,-1,0],[0,1,1,0],[1,0,0,1]];var P={DiscreteShadowcasting:class extends D{compute(e,t,i,s){if(s(e,t,0,1),!this._lightPasses(e,t))return;let o,r,n,a,l,h=[];for(let c=1;c<=i;c++){let i=this._getCircle(e,t,c),u=360/i.length;for(let e=0;e<i.length;e++)if(n=i[e][0],a=i[e][1],r=(o=u*(e-.5))+u,l=!this._lightPasses(n,a),this._visibleCoords(Math.floor(o),Math.ceil(r),l,h)&&s(n,a,c,1),2==h.length&&0==h[0]&&360==h[1])return}}_visibleCoords(e,t,i,s){if(e<0){let o=this._visibleCoords(0,t,i,s),r=this._visibleCoords(360+e,360,i,s);return o||r}let o=0;for(;o<s.length&&s[o]<e;)o++;if(o==s.length)return i&&s.push(e,t),!0;let r=0;if(o%2){for(;o<s.length&&s[o]<t;)o++,r++;return 0!=r&&(i&&(r%2?s.splice(o-r,r,t):s.splice(o-r,r)),!0)}for(;o<s.length&&s[o]<t;)o++,r++;return(e!=s[o-r]||1!=r)&&(i&&(r%2?s.splice(o-r,r,e):s.splice(o-r,r,e,t)),!0)}},PreciseShadowcasting:class extends D{compute(e,t,i,s){if(s(e,t,0,1),!this._lightPasses(e,t))return;let o,r,n,a,l,h,c=[];for(let u=1;u<=i;u++){let i=this._getCircle(e,t,u),d=i.length;for(let e=0;e<d;e++)if(o=i[e][0],r=i[e][1],a=[e?2*e-1:2*d-1,2*d],l=[2*e+1,2*d],n=!this._lightPasses(o,r),(h=this._checkVisibility(a,l,n,c))&&s(o,r,u,h),2==c.length&&0==c[0][0]&&c[1][0]==c[1][1])return}}_checkVisibility(e,t,i,s){if(e[0]>t[0])return(this._checkVisibility(e,[e[1],e[1]],i,s)+this._checkVisibility([0,1],t,i,s))/2;let o=0,r=!1;for(;o<s.length;){let t=s[o],i=t[0]*e[1]-e[0]*t[1];if(i>=0){0!=i||o%2||(r=!0);break}o++}let n=s.length,a=!1;for(;n--;){let e=s[n],i=t[0]*e[1]-e[0]*t[1];if(i>=0){0==i&&n%2&&(a=!0);break}}let l,h=!0;if(o==n&&(r||a)?h=!1:r&&a&&o+1==n&&n%2?h=!1:o>n&&o%2&&(h=!1),!h)return 0;let c=n-o+1;if(c%2)if(o%2){let e=s[o];l=(t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]),i&&s.splice(o,c,t)}else{let t=s[n];l=(t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]),i&&s.splice(o,c,e)}else{if(!(o%2))return i&&s.splice(o,c,e,t),1;{let e=s[o],t=s[n];l=(t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]),i&&s.splice(o,c)}}return l/((t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]))}},RecursiveShadowcasting:class extends D{compute(e,t,i,s){s(e,t,0,1);for(let o=0;o<E.length;o++)this._renderOctant(e,t,E[o],i,s)}compute180(e,t,i,s,o){o(e,t,0,1);let r=(s-1+8)%8,n=(s-2+8)%8,a=(s+1+8)%8;this._renderOctant(e,t,E[n],i,o),this._renderOctant(e,t,E[r],i,o),this._renderOctant(e,t,E[s],i,o),this._renderOctant(e,t,E[a],i,o)}compute90(e,t,i,s,o){o(e,t,0,1);let r=(s-1+8)%8;this._renderOctant(e,t,E[s],i,o),this._renderOctant(e,t,E[r],i,o)}_renderOctant(e,t,i,s,o){this._castVisibility(e,t,1,1,0,s+1,i[0],i[1],i[2],i[3],o)}_castVisibility(e,t,i,s,o,r,n,a,l,h,c){if(!(s<o))for(let u=i;u<=r;u++){let i=-u-1,d=-u,p=!1,g=0;for(;i<=0;){let f=e+(i+=1)*n+d*a,m=t+i*l+d*h,_=(i-.5)/(d+.5),b=(i+.5)/(d-.5);if(!(b>s)){if(_<o)break;if(i*i+d*d<r*r&&c(f,m,u,1),p){if(!this._lightPasses(f,m)){g=b;continue}p=!1,s=g}else!this._lightPasses(f,m)&&u<r&&(p=!0,this._castVisibility(e,t,u+1,s,_,r,n,a,l,h,c),g=b)}}if(p)break}}}};class K{constructor(e=w,t=k){this._width=e,this._height=t}_fillMap(e){let t=[];for(let i=0;i<this._width;i++){t.push([]);for(let s=0;s<this._height;s++)t[i].push(e)}return t}}class z extends K{constructor(e,t){super(e,t),this._rooms=[],this._corridors=[]}getRooms(){return this._rooms}getCorridors(){return this._corridors}}class L{}class O extends L{constructor(e,t,i,s,o,r){super(),this._x1=e,this._y1=t,this._x2=i,this._y2=s,this._doors={},void 0!==o&&void 0!==r&&this.addDoor(o,r)}static createRandomAt(e,t,i,s,r){let n=r.roomWidth[0],a=r.roomWidth[1],l=o.a.getUniformInt(n,a);n=r.roomHeight[0],a=r.roomHeight[1];let h=o.a.getUniformInt(n,a);if(1==i){let i=t-Math.floor(o.a.getUniform()*h);return new this(e+1,i,e+l,i+h-1,e,t)}if(-1==i){let i=t-Math.floor(o.a.getUniform()*h);return new this(e-l,i,e-1,i+h-1,e,t)}if(1==s){let i=e-Math.floor(o.a.getUniform()*l);return new this(i,t+1,i+l-1,t+h,e,t)}if(-1==s){let i=e-Math.floor(o.a.getUniform()*l);return new this(i,t-h,i+l-1,t-1,e,t)}throw new Error("dx or dy must be 1 or -1")}static createRandomCenter(e,t,i){let s=i.roomWidth[0],r=i.roomWidth[1],n=o.a.getUniformInt(s,r);s=i.roomHeight[0],r=i.roomHeight[1];let a=o.a.getUniformInt(s,r),l=e-Math.floor(o.a.getUniform()*n),h=t-Math.floor(o.a.getUniform()*a);return new this(l,h,l+n-1,h+a-1)}static createRandom(e,t,i){let s=i.roomWidth[0],r=i.roomWidth[1],n=o.a.getUniformInt(s,r);s=i.roomHeight[0],r=i.roomHeight[1];let a=o.a.getUniformInt(s,r),l=e-n-1,h=t-a-1,c=1+Math.floor(o.a.getUniform()*l),u=1+Math.floor(o.a.getUniform()*h);return new this(c,u,c+n-1,u+a-1)}addDoor(e,t){return this._doors[e+","+t]=1,this}getDoors(e){for(let t in this._doors){let i=t.split(",");e(parseInt(i[0]),parseInt(i[1]))}return this}clearDoors(){return this._doors={},this}addDoors(e){let t=this._x1-1,i=this._x2+1,s=this._y1-1,o=this._y2+1;for(let r=t;r<=i;r++)for(let n=s;n<=o;n++)r!=t&&r!=i&&n!=s&&n!=o||e(r,n)||this.addDoor(r,n);return this}debug(){console.log("room",this._x1,this._y1,this._x2,this._y2)}isValid(e,t){let i=this._x1-1,s=this._x2+1,o=this._y1-1,r=this._y2+1;for(let n=i;n<=s;n++)for(let a=o;a<=r;a++)if(n==i||n==s||a==o||a==r){if(!e(n,a))return!1}else if(!t(n,a))return!1;return!0}create(e){let t=this._x1-1,i=this._x2+1,s=this._y1-1,o=this._y2+1,r=0;for(let n=t;n<=i;n++)for(let a=s;a<=o;a++)e(n,a,r=n+","+a in this._doors?2:n==t||n==i||a==s||a==o?1:0)}getCenter(){return[Math.round((this._x1+this._x2)/2),Math.round((this._y1+this._y2)/2)]}getLeft(){return this._x1}getRight(){return this._x2}getTop(){return this._y1}getBottom(){return this._y2}}class N extends L{constructor(e,t,i,s){super(),this._startX=e,this._startY=t,this._endX=i,this._endY=s,this._endsWithAWall=!0}static createRandomAt(e,t,i,s,r){let n=r.corridorLength[0],a=r.corridorLength[1],l=o.a.getUniformInt(n,a);return new this(e,t,e+i*l,t+s*l)}debug(){console.log("corridor",this._startX,this._startY,this._endX,this._endY)}isValid(e,t){let i=this._startX,s=this._startY,o=this._endX-i,r=this._endY-s,n=1+Math.max(Math.abs(o),Math.abs(r));o&&(o/=Math.abs(o)),r&&(r/=Math.abs(r));let a=r,l=-o,h=!0;for(let c=0;c<n;c++){let u=i+c*o,d=s+c*r;if(t(u,d)||(h=!1),e(u+a,d+l)||(h=!1),e(u-a,d-l)||(h=!1),!h){n=c,this._endX=u-o,this._endY=d-r;break}}if(0==n)return!1;if(1==n&&e(this._endX+o,this._endY+r))return!1;let c=!e(this._endX+o+a,this._endY+r+l),u=!e(this._endX+o-a,this._endY+r-l);return this._endsWithAWall=e(this._endX+o,this._endY+r),!c&&!u||!this._endsWithAWall}create(e){let t=this._startX,i=this._startY,s=this._endX-t,o=this._endY-i,r=1+Math.max(Math.abs(s),Math.abs(o));s&&(s/=Math.abs(s)),o&&(o/=Math.abs(o));for(let n=0;n<r;n++){e(t+n*s,i+n*o,0)}return!0}createPriorityWalls(e){if(!this._endsWithAWall)return;let t=this._startX,i=this._startY,s=this._endX-t,o=this._endY-i;s&&(s/=Math.abs(s)),o&&(o/=Math.abs(o));let r=o,n=-s;e(this._endX+s,this._endY+o),e(this._endX+r,this._endY+n),e(this._endX-r,this._endY-n)}}const F={room:O,corridor:N};function I(e,t,i){i[t[e+1]]=i[e],t[i[e]]=t[e+1],i[e]=e+1,t[e+1]=e}function U(e,t,i){i[t[e]]=i[e],t[i[e]]=t[e],i[e]=e,t[e]=e}var B={Arena:class extends K{create(e){let t=this._width-1,i=this._height-1;for(let s=0;s<=t;s++)for(let o=0;o<=i;o++)e(s,o,s&&o&&s<t&&o<i?0:1);return this}},Uniform:class extends z{constructor(e,t,i){super(e,t),this._options={roomWidth:[3,9],roomHeight:[3,5],roomDugPercentage:.1,timeLimit:1e3},Object.assign(this._options,i),this._map=[],this._dug=0,this._roomAttempts=20,this._corridorAttempts=20,this._connected=[],this._unconnected=[],this._digCallback=this._digCallback.bind(this),this._canBeDugCallback=this._canBeDugCallback.bind(this),this._isWallCallback=this._isWallCallback.bind(this)}create(e){let t=Date.now();for(;;){if(Date.now()-t>this._options.timeLimit)return null;if(this._map=this._fillMap(1),this._dug=0,this._rooms=[],this._unconnected=[],this._generateRooms(),!(this._rooms.length<2)&&this._generateCorridors())break}if(e)for(let t=0;t<this._width;t++)for(let i=0;i<this._height;i++)e(t,i,this._map[t][i]);return this}_generateRooms(){let e,t=this._width-2,i=this._height-2;do{if(e=this._generateRoom(),this._dug/(t*i)>this._options.roomDugPercentage)break}while(e)}_generateRoom(){let e=0;for(;e<this._roomAttempts;){e++;let t=O.createRandom(this._width,this._height,this._options);if(t.isValid(this._isWallCallback,this._canBeDugCallback))return t.create(this._digCallback),this._rooms.push(t),t}return null}_generateCorridors(){let e=0;for(;e<this._corridorAttempts;){e++,this._corridors=[],this._map=this._fillMap(1);for(let e=0;e<this._rooms.length;e++){let t=this._rooms[e];t.clearDoors(),t.create(this._digCallback)}for(this._unconnected=o.a.shuffle(this._rooms.slice()),this._connected=[],this._unconnected.length&&this._connected.push(this._unconnected.pop());;){let e=o.a.getItem(this._connected);if(!e)break;let t=this._closestRoom(this._unconnected,e);if(!t)break;let i=this._closestRoom(this._connected,t);if(!i)break;if(!this._connectRooms(t,i))break;if(!this._unconnected.length)return!0}}return!1}_closestRoom(e,t){let i=1/0,s=t.getCenter(),o=null;for(let t=0;t<e.length;t++){let r=e[t],n=r.getCenter(),a=n[0]-s[0],l=n[1]-s[1],h=a*a+l*l;h<i&&(i=h,o=r)}return o}_connectRooms(e,t){let i,s,o,r,n,a,l,h=e.getCenter(),c=t.getCenter(),u=c[0]-h[0],d=c[1]-h[1];if(Math.abs(u)<Math.abs(d)?(r=(2+(o=d>0?2:0))%4,n=t.getLeft(),a=t.getRight(),l=0):(r=(2+(o=u>0?1:3))%4,n=t.getTop(),a=t.getBottom(),l=1),!(i=this._placeInWall(e,o)))return!1;if(i[l]>=n&&i[l]<=a){s=i.slice();let e=0;switch(r){case 0:e=t.getTop()-1;break;case 1:e=t.getRight()+1;break;case 2:e=t.getBottom()+1;break;case 3:e=t.getLeft()-1}s[(l+1)%2]=e,this._digLine([i,s])}else if(i[l]<n-1||i[l]>a+1){let e=i[l]-c[l],o=0;switch(r){case 0:case 1:o=e<0?3:1;break;case 2:case 3:o=e<0?1:3}if(r=(r+o)%4,!(s=this._placeInWall(t,r)))return!1;let n=[0,0];n[l]=i[l];let a=(l+1)%2;n[a]=s[a],this._digLine([i,n,s])}else{let e=(l+1)%2;if(!(s=this._placeInWall(t,r)))return!1;let o=Math.round((s[e]+i[e])/2),n=[0,0],a=[0,0];n[l]=i[l],n[e]=o,a[l]=s[l],a[e]=o,this._digLine([i,n,a,s])}return e.addDoor(i[0],i[1]),t.addDoor(s[0],s[1]),-1!=(l=this._unconnected.indexOf(e))&&(this._unconnected.splice(l,1),this._connected.push(e)),-1!=(l=this._unconnected.indexOf(t))&&(this._unconnected.splice(l,1),this._connected.push(t)),!0}_placeInWall(e,t){let i=[0,0],s=[0,0],r=0;switch(t){case 0:s=[1,0],i=[e.getLeft(),e.getTop()-1],r=e.getRight()-e.getLeft()+1;break;case 1:s=[0,1],i=[e.getRight()+1,e.getTop()],r=e.getBottom()-e.getTop()+1;break;case 2:s=[1,0],i=[e.getLeft(),e.getBottom()+1],r=e.getRight()-e.getLeft()+1;break;case 3:s=[0,1],i=[e.getLeft()-1,e.getTop()],r=e.getBottom()-e.getTop()+1}let n=[],a=-2;for(let e=0;e<r;e++){let t=i[0]+e*s[0],o=i[1]+e*s[1];n.push(null),1==this._map[t][o]?a!=e-1&&(n[e]=[t,o]):(a=e,e&&(n[e-1]=null))}for(let e=n.length-1;e>=0;e--)n[e]||n.splice(e,1);return n.length?o.a.getItem(n):null}_digLine(e){for(let t=1;t<e.length;t++){let i=e[t-1],s=e[t],o=new N(i[0],i[1],s[0],s[1]);o.create(this._digCallback),this._corridors.push(o)}}_digCallback(e,t,i){this._map[e][t]=i,0==i&&this._dug++}_isWallCallback(e,t){return!(e<0||t<0||e>=this._width||t>=this._height)&&1==this._map[e][t]}_canBeDugCallback(e,t){return!(e<1||t<1||e+1>=this._width||t+1>=this._height)&&1==this._map[e][t]}},Cellular:class extends K{constructor(e,t,i={}){super(e,t),this._options={born:[5,6,7,8],survive:[4,5,6,7,8],topology:8},this.setOptions(i),this._dirs=v[this._options.topology],this._map=this._fillMap(0)}randomize(e){for(let t=0;t<this._width;t++)for(let i=0;i<this._height;i++)this._map[t][i]=o.a.getUniform()<e?1:0;return this}setOptions(e){Object.assign(this._options,e)}set(e,t,i){this._map[e][t]=i}create(e){let t=this._fillMap(0),i=this._options.born,s=this._options.survive;for(let e=0;e<this._height;e++){let o=1,r=0;6==this._options.topology&&(o=2,r=e%2);for(let n=r;n<this._width;n+=o){let o=this._map[n][e],r=this._getNeighbors(n,e);o&&-1!=s.indexOf(r)?t[n][e]=1:o||-1==i.indexOf(r)||(t[n][e]=1)}}this._map=t,e&&this._serviceCallback(e)}_serviceCallback(e){for(let t=0;t<this._height;t++){let i=1,s=0;6==this._options.topology&&(i=2,s=t%2);for(let o=s;o<this._width;o+=i)e(o,t,this._map[o][t])}}_getNeighbors(e,t){let i=0;for(let s=0;s<this._dirs.length;s++){let o=this._dirs[s],r=e+o[0],n=t+o[1];r<0||r>=this._width||n<0||n>=this._height||(i+=1==this._map[r][n]?1:0)}return i}connect(e,t,i){t||(t=0);let s=[],r={},n=1,a=[0,0];6==this._options.topology&&(n=2,a=[0,1]);for(let e=0;e<this._height;e++)for(let i=a[e%2];i<this._width;i+=n)if(this._freeSpace(i,e,t)){let t=[i,e];r[this._pointKey(t)]=t,s.push([i,e])}let l=s[o.a.getUniformInt(0,s.length-1)],h=this._pointKey(l),c={};for(c[h]=l,delete r[h],this._findConnected(c,r,[l],!1,t);Object.keys(r).length>0;){let e=this._getFromTo(c,r),s=e[0],o=e[1],n={};n[this._pointKey(s)]=s,this._findConnected(n,r,[s],!0,t),(6==this._options.topology?this._tunnelToConnected6:this._tunnelToConnected).call(this,o,s,c,r,t,i);for(let e in n){let i=n[e];this._map[i[0]][i[1]]=t,c[e]=i,delete r[e]}}e&&this._serviceCallback(e)}_getFromTo(e,t){let i,s=[0,0],r=[0,0],n=Object.keys(e),a=Object.keys(t);for(let l=0;l<5;l++){if(n.length<a.length){let i=n;r=e[i[o.a.getUniformInt(0,i.length-1)]],s=this._getClosest(r,t)}else{let i=a;s=t[i[o.a.getUniformInt(0,i.length-1)]],r=this._getClosest(s,e)}if((i=(s[0]-r[0])*(s[0]-r[0])+(s[1]-r[1])*(s[1]-r[1]))<64)break}return[s,r]}_getClosest(e,t){let i=null,s=null;for(let o in t){let r=t[o],n=(r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]);(null==s||n<s)&&(s=n,i=r)}return i}_findConnected(e,t,i,s,o){for(;i.length>0;){let r,n=i.splice(0,1)[0];r=6==this._options.topology?[[n[0]+2,n[1]],[n[0]+1,n[1]-1],[n[0]-1,n[1]-1],[n[0]-2,n[1]],[n[0]-1,n[1]+1],[n[0]+1,n[1]+1]]:[[n[0]+1,n[1]],[n[0]-1,n[1]],[n[0],n[1]+1],[n[0],n[1]-1]];for(let n=0;n<r.length;n++){let a=this._pointKey(r[n]);null==e[a]&&this._freeSpace(r[n][0],r[n][1],o)&&(e[a]=r[n],s||delete t[a],i.push(r[n]))}}}_tunnelToConnected(e,t,i,s,o,r){let n,a;t[0]<e[0]?(n=t,a=e):(n=e,a=t);for(let e=n[0];e<=a[0];e++){this._map[e][n[1]]=o;let t=[e,n[1]],r=this._pointKey(t);i[r]=t,delete s[r]}r&&n[0]<a[0]&&r(n,[a[0],n[1]]);let l=a[0];t[1]<e[1]?(n=t,a=e):(n=e,a=t);for(let e=n[1];e<a[1];e++){this._map[l][e]=o;let t=[l,e],r=this._pointKey(t);i[r]=t,delete s[r]}r&&n[1]<a[1]&&r([a[0],n[1]],[a[0],a[1]])}_tunnelToConnected6(e,t,i,s,o,r){let n,a;t[0]<e[0]?(n=t,a=e):(n=e,a=t);let l=n[0],h=n[1];for(;l!=a[0]||h!=a[1];){let e=2;h<a[1]?(h++,e=1):h>a[1]&&(h--,e=1),l<a[0]?l+=e:l>a[0]?l-=e:a[1]%2?l-=e:l+=e,this._map[l][h]=o;let t=[l,h],r=this._pointKey(t);i[r]=t,delete s[r]}r&&r(t,e)}_freeSpace(e,t,i){return e>=0&&e<this._width&&t>=0&&t<this._height&&this._map[e][t]==i}_pointKey(e){return e[0]+"."+e[1]}},Digger:class extends z{constructor(e,t,i={}){super(e,t),this._options=Object.assign({roomWidth:[3,9],roomHeight:[3,5],corridorLength:[3,10],dugPercentage:.2,timeLimit:1e3},i),this._features={room:4,corridor:4},this._map=[],this._featureAttempts=20,this._walls={},this._dug=0,this._digCallback=this._digCallback.bind(this),this._canBeDugCallback=this._canBeDugCallback.bind(this),this._isWallCallback=this._isWallCallback.bind(this),this._priorityWallCallback=this._priorityWallCallback.bind(this)}create(e){this._rooms=[],this._corridors=[],this._map=this._fillMap(1),this._walls={},this._dug=0;let t=(this._width-2)*(this._height-2);this._firstRoom();let i,s=Date.now();do{if(i=0,Date.now()-s>this._options.timeLimit)break;let e=this._findWall();if(!e)break;let t=e.split(","),o=parseInt(t[0]),r=parseInt(t[1]),n=this._getDiggingDirection(o,r);if(!n)continue;let a=0;do{if(a++,this._tryFeature(o,r,n[0],n[1])){this._removeSurroundingWalls(o,r),this._removeSurroundingWalls(o-n[0],r-n[1]);break}}while(a<this._featureAttempts);for(let e in this._walls)this._walls[e]>1&&i++}while(this._dug/t<this._options.dugPercentage||i);if(this._addDoors(),e)for(let t=0;t<this._width;t++)for(let i=0;i<this._height;i++)e(t,i,this._map[t][i]);return this._walls={},this._map=[],this}_digCallback(e,t,i){0==i||2==i?(this._map[e][t]=0,this._dug++):this._walls[e+","+t]=1}_isWallCallback(e,t){return!(e<0||t<0||e>=this._width||t>=this._height)&&1==this._map[e][t]}_canBeDugCallback(e,t){return!(e<1||t<1||e+1>=this._width||t+1>=this._height)&&1==this._map[e][t]}_priorityWallCallback(e,t){this._walls[e+","+t]=2}_firstRoom(){let e=Math.floor(this._width/2),t=Math.floor(this._height/2),i=O.createRandomCenter(e,t,this._options);this._rooms.push(i),i.create(this._digCallback)}_findWall(){let e=[],t=[];for(let i in this._walls)2==this._walls[i]?t.push(i):e.push(i);let i=t.length?t:e;if(!i.length)return null;let s=o.a.getItem(i.sort());return delete this._walls[s],s}_tryFeature(e,t,i,s){let r=o.a.getWeightedValue(this._features),n=F[r].createRandomAt(e,t,i,s,this._options);return!!n.isValid(this._isWallCallback,this._canBeDugCallback)&&(n.create(this._digCallback),n instanceof O&&this._rooms.push(n),n instanceof N&&(n.createPriorityWalls(this._priorityWallCallback),this._corridors.push(n)),!0)}_removeSurroundingWalls(e,t){let i=v[4];for(let s=0;s<i.length;s++){let o=i[s],r=e+o[0],n=t+o[1];delete this._walls[r+","+n],r=e+2*o[0],n=t+2*o[1],delete this._walls[r+","+n]}}_getDiggingDirection(e,t){if(e<=0||t<=0||e>=this._width-1||t>=this._height-1)return null;let i=null,s=v[4];for(let o=0;o<s.length;o++){let r=s[o],n=e+r[0],a=t+r[1];if(!this._map[n][a]){if(i)return null;i=r}}return i?[-i[0],-i[1]]:null}_addDoors(){let e=this._map;function t(t,i){return 1==e[t][i]}for(let e=0;e<this._rooms.length;e++){let i=this._rooms[e];i.clearDoors(),i.addDoors(t)}}},EllerMaze:class extends K{create(e){let t,i=this._fillMap(1),s=Math.ceil((this._width-2)/2),r=[],n=[];for(let e=0;e<s;e++)r.push(e),n.push(e);for(r.push(s-1),t=1;t+3<this._height;t+=2)for(let e=0;e<s;e++){let s=2*e+1,a=t;i[s][a]=0,e!=r[e+1]&&o.a.getUniform()>.375&&(I(e,r,n),i[s+1][a]=0),e!=r[e]&&o.a.getUniform()>.375?U(e,r,n):i[s][a+1]=0}for(let e=0;e<s;e++){let s=2*e+1,a=t;i[s][a]=0,e!=r[e+1]&&(e==r[e]||o.a.getUniform()>.375)&&(I(e,r,n),i[s+1][a]=0),U(e,r,n)}for(let t=0;t<this._width;t++)for(let s=0;s<this._height;s++)e(t,s,i[t][s]);return this}},DividedMaze:class extends K{constructor(){super(...arguments),this._stack=[],this._map=[]}create(e){let t=this._width,i=this._height;this._map=[];for(let e=0;e<t;e++){this._map.push([]);for(let s=0;s<i;s++){let o=0==e||0==s||e+1==t||s+1==i;this._map[e].push(o?1:0)}}this._stack=[[1,1,t-2,i-2]],this._process();for(let s=0;s<t;s++)for(let t=0;t<i;t++)e(s,t,this._map[s][t]);return this._map=[],this}_process(){for(;this._stack.length;){let e=this._stack.shift();this._partitionRoom(e)}}_partitionRoom(e){let t=[],i=[];for(let i=e[0]+1;i<e[2];i++){let s=this._map[i][e[1]-1],o=this._map[i][e[3]+1];!s||!o||i%2||t.push(i)}for(let t=e[1]+1;t<e[3];t++){let s=this._map[e[0]-1][t],o=this._map[e[2]+1][t];!s||!o||t%2||i.push(t)}if(!t.length||!i.length)return;let s=o.a.getItem(t),r=o.a.getItem(i);this._map[s][r]=1;let n=[],a=[];n.push(a);for(let t=e[0];t<s;t++)this._map[t][r]=1,a.push([t,r]);a=[],n.push(a);for(let t=s+1;t<=e[2];t++)this._map[t][r]=1,a.push([t,r]);a=[],n.push(a);for(let t=e[1];t<r;t++)this._map[s][t]=1,a.push([s,t]);a=[],n.push(a);for(let t=r+1;t<=e[3];t++)this._map[s][t]=1,a.push([s,t]);let l=o.a.getItem(n);for(let e=0;e<n.length;e++){let t=n[e];if(t==l)continue;let i=o.a.getItem(t);this._map[i[0]][i[1]]=0}this._stack.push([e[0],e[1],s-1,r-1]),this._stack.push([s+1,e[1],e[2],r-1]),this._stack.push([e[0],r+1,s-1,e[3]]),this._stack.push([s+1,r+1,e[2],e[3]])}},IceyMaze:class extends K{constructor(e,t,i=0){super(e,t),this._regularity=i,this._map=[]}create(e){let t=this._width,i=this._height,s=this._fillMap(1);t-=t%2?1:2,i-=i%2?1:2;let r=0,n=0,a=0,l=0,h=0,c=!1,u=[[0,0],[0,0],[0,0],[0,0]];do{if(r=1+2*Math.floor(o.a.getUniform()*(t-1)/2),n=1+2*Math.floor(o.a.getUniform()*(i-1)/2),h||(s[r][n]=0),!s[r][n]){this._randomize(u);do{0==Math.floor(o.a.getUniform()*(this._regularity+1))&&this._randomize(u),c=!0;for(let e=0;e<4;e++)if(a=r+2*u[e][0],l=n+2*u[e][1],this._isFree(s,a,l,t,i)){s[a][l]=0,s[r+u[e][0]][n+u[e][1]]=0,r=a,n=l,c=!1,h++;break}}while(!c)}}while(h+1<t*i/4);for(let t=0;t<this._width;t++)for(let i=0;i<this._height;i++)e(t,i,s[t][i]);return this._map=[],this}_randomize(e){for(let t=0;t<4;t++)e[t][0]=0,e[t][1]=0;switch(Math.floor(4*o.a.getUniform())){case 0:e[0][0]=-1,e[1][0]=1,e[2][1]=-1,e[3][1]=1;break;case 1:e[3][0]=-1,e[2][0]=1,e[1][1]=-1,e[0][1]=1;break;case 2:e[2][0]=-1,e[3][0]=1,e[0][1]=-1,e[1][1]=1;break;case 3:e[1][0]=-1,e[0][0]=1,e[3][1]=-1,e[2][1]=1}}_isFree(e,t,i,s,o){return!(t<1||i<1||t>=s||i>=o)&&e[t][i]}},Rogue:class extends K{constructor(e,t,i){super(e,t),this.map=[],this.rooms=[],this.connectedCells=[],(i=Object.assign({cellWidth:3,cellHeight:3},i)).hasOwnProperty("roomWidth")||(i.roomWidth=this._calculateRoomSize(this._width,i.cellWidth)),i.hasOwnProperty("roomHeight")||(i.roomHeight=this._calculateRoomSize(this._height,i.cellHeight)),this._options=i}create(e){if(this.map=this._fillMap(1),this.rooms=[],this.connectedCells=[],this._initRooms(),this._connectRooms(),this._connectUnconnectedRooms(),this._createRandomRoomConnections(),this._createRooms(),this._createCorridors(),e)for(let t=0;t<this._width;t++)for(let i=0;i<this._height;i++)e(t,i,this.map[t][i]);return this}_calculateRoomSize(e,t){let i=Math.floor(e/t*.8),s=Math.floor(e/t*.25);return s<2&&(s=2),i<2&&(i=2),[s,i]}_initRooms(){for(let e=0;e<this._options.cellWidth;e++){this.rooms.push([]);for(let t=0;t<this._options.cellHeight;t++)this.rooms[e].push({x:0,y:0,width:0,height:0,connections:[],cellx:e,celly:t})}}_connectRooms(){let e,t,i,s,r,n,a=o.a.getUniformInt(0,this._options.cellWidth-1),l=o.a.getUniformInt(0,this._options.cellHeight-1),h=!1;do{n=[0,2,4,6],n=o.a.shuffle(n);do{if(h=!1,e=n.pop(),t=a+v[8][e][0],i=l+v[8][e][1],!(t<0||t>=this._options.cellWidth||i<0||i>=this._options.cellHeight)){if((s=this.rooms[a][l]).connections.length>0&&s.connections[0][0]==t&&s.connections[0][1]==i)break;0==(r=this.rooms[t][i]).connections.length&&(r.connections.push([a,l]),this.connectedCells.push([t,i]),a=t,l=i,h=!0)}}while(n.length>0&&0==h)}while(n.length>0)}_connectUnconnectedRooms(){let e,t,i,s=this._options.cellWidth,r=this._options.cellHeight;this.connectedCells=o.a.shuffle(this.connectedCells);for(let n=0;n<this._options.cellWidth;n++)for(let a=0;a<this._options.cellHeight;a++)if(0==(e=this.rooms[n][a]).connections.length){let l=[0,2,4,6];l=o.a.shuffle(l),i=!1;do{let e=l.pop(),o=n+v[8][e][0],h=a+v[8][e][1];if(!(o<0||o>=s||h<0||h>=r)){if(i=!0,0==(t=this.rooms[o][h]).connections.length)break;for(let e=0;e<t.connections.length;e++)if(t.connections[e][0]==n&&t.connections[e][1]==a){i=!1;break}if(i)break}}while(l.length);i?e.connections.push([t.cellx,t.celly]):console.log("-- Unable to connect room.")}}_createRandomRoomConnections(){}_createRooms(){let e,t,i,s,r,n=this._width,a=this._height,l=this._options.cellWidth,h=this._options.cellHeight,c=Math.floor(this._width/l),u=Math.floor(this._height/h),d=this._options.roomWidth,p=this._options.roomHeight;for(let g=0;g<l;g++)for(let l=0;l<h;l++){if(0==(i=c*g)&&(i=1),0==(s=u*l)&&(s=1),e=o.a.getUniformInt(d[0],d[1]),t=o.a.getUniformInt(p[0],p[1]),l>0)for(r=this.rooms[g][l-1];s-(r.y+r.height)<3;)s++;if(g>0)for(r=this.rooms[g-1][l];i-(r.x+r.width)<3;)i++;let h=Math.round(o.a.getUniformInt(0,c-e)/2),f=Math.round(o.a.getUniformInt(0,u-t)/2);for(;i+h+e>=n;)h?h--:e--;for(;s+f+t>=a;)f?f--:t--;i+=h,s+=f,this.rooms[g][l].x=i,this.rooms[g][l].y=s,this.rooms[g][l].width=e,this.rooms[g][l].height=t;for(let o=i;o<i+e;o++)for(let e=s;e<s+t;e++)this.map[o][e]=0}}_getWallPosition(e,t){let i,s,r;return 1==t||3==t?(i=o.a.getUniformInt(e.x+1,e.x+e.width-2),r=1==t?1+(s=e.y-2):(s=e.y+e.height+1)-1,this.map[i][r]=0):(s=o.a.getUniformInt(e.y+1,e.y+e.height-2),r=2==t?(i=e.x+e.width+1)-1:1+(i=e.x-2),this.map[r][s]=0),[i,s]}_drawCorridor(e,t){let i,s,r,n,a=t[0]-e[0],l=t[1]-e[1],h=e[0],c=e[1],u=[],d=Math.abs(a),p=Math.abs(l),g=o.a.getUniform(),f=g,m=1-g;for(s=a>0?2:6,r=l>0?4:0,d<p?(i=Math.ceil(p*f),u.push([r,i]),u.push([s,d]),i=Math.floor(p*m),u.push([r,i])):(i=Math.ceil(d*f),u.push([s,i]),u.push([r,p]),i=Math.floor(d*m),u.push([s,i])),this.map[h][c]=0;u.length>0;)for(n=u.pop();n[1]>0;)h+=v[8][n[0]][0],c+=v[8][n[0]][1],this.map[h][c]=0,n[1]=n[1]-1}_createCorridors(){let e,t,i,s,o,r=this._options.cellWidth,n=this._options.cellHeight;for(let a=0;a<r;a++)for(let r=0;r<n;r++){e=this.rooms[a][r];for(let r=0;r<e.connections.length;r++)t=e.connections[r],(i=this.rooms[t[0]][t[1]]).cellx>e.cellx?(s=2,o=4):i.cellx<e.cellx?(s=4,o=2):i.celly>e.celly?(s=3,o=1):(s=1,o=3),this._drawCorridor(this._getWallPosition(e,s),this._getWallPosition(i,o))}}}};class H{}const W=.5*(Math.sqrt(3)-1),j=(3-Math.sqrt(3))/6;var G={Simplex:class extends H{constructor(e=256){super(),this._gradients=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]];let t=[];for(let i=0;i<e;i++)t.push(i);t=o.a.shuffle(t),this._perms=[],this._indexes=[];for(let i=0;i<2*e;i++)this._perms.push(t[i%e]),this._indexes.push(this._perms[i]%this._gradients.length)}get(e,t){let i,s,o,r=this._perms,n=this._indexes,l=r.length/2,h=0,c=0,u=0,d=(e+t)*W,p=Math.floor(e+d),g=Math.floor(t+d),f=(p+g)*j,m=e-(p-f),_=t-(g-f);m>_?(s=1,o=0):(s=0,o=1);let b=m-s+j,y=_-o+j,w=m-1+2*j,k=_-1+2*j,v=Object(a.mod)(p,l),C=Object(a.mod)(g,l),x=.5-m*m-_*_;if(x>=0){x*=x,i=n[v+r[C]];let e=this._gradients[i];h=x*x*(e[0]*m+e[1]*_)}let S=.5-b*b-y*y;if(S>=0){S*=S,i=n[v+s+r[C+o]];let e=this._gradients[i];c=S*S*(e[0]*b+e[1]*y)}let M=.5-w*w-k*k;if(M>=0){M*=M,i=n[v+1+r[C+1]];let e=this._gradients[i];u=M*M*(e[0]*w+e[1]*k)}return 70*(h+c+u)}}};class Y{constructor(e,t,i,s={}){this._toX=e,this._toY=t,this._passableCallback=i,this._options=Object.assign({topology:8},s),this._dirs=v[this._options.topology],8==this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}_getNeighbors(e,t){let i=[];for(let s=0;s<this._dirs.length;s++){let o=this._dirs[s],r=e+o[0],n=t+o[1];this._passableCallback(r,n)&&i.push([r,n])}return i}}var q={Dijkstra:class extends Y{constructor(e,t,i,s){super(e,t,i,s),this._computed={},this._todo=[],this._add(e,t,null)}compute(e,t,i){let s=e+","+t;if(s in this._computed||this._compute(e,t),!(s in this._computed))return;let o=this._computed[s];for(;o;)i(o.x,o.y),o=o.prev}_compute(e,t){for(;this._todo.length;){let i=this._todo.shift();if(i.x==e&&i.y==t)return;let s=this._getNeighbors(i.x,i.y);for(let e=0;e<s.length;e++){let t=s[e],o=t[0],r=t[1];o+","+r in this._computed||this._add(o,r,i)}}}_add(e,t,i){let s={x:e,y:t,prev:i};this._computed[e+","+t]=s,this._todo.push(s)}},AStar:class extends Y{constructor(e,t,i,s={}){super(e,t,i,s),this._todo=[],this._done={}}compute(e,t,i){for(this._todo=[],this._done={},this._fromX=e,this._fromY=t,this._add(this._toX,this._toY,null);this._todo.length;){let i=this._todo.shift(),s=i.x+","+i.y;if(s in this._done)continue;if(this._done[s]=i,i.x==e&&i.y==t)break;let o=this._getNeighbors(i.x,i.y);for(let e=0;e<o.length;e++){let t=o[e],s=t[0],r=t[1];s+","+r in this._done||this._add(s,r,i)}}let s=this._done[e+","+t];if(s)for(;s;)i(s.x,s.y),s=s.prev}_add(e,t,i){let s=this._distance(e,t),o={x:e,y:t,prev:i,g:i?i.g+1:0,h:s},r=o.g+o.h;for(let e=0;e<this._todo.length;e++){let t=this._todo[e],i=t.g+t.h;if(r<i||r==i&&s<t.h)return void this._todo.splice(e,0,o)}this._todo.push(o)}_distance(e,t){switch(this._options.topology){case 4:return Math.abs(e-this._fromX)+Math.abs(t-this._fromY);case 6:let i=Math.abs(e-this._fromX),s=Math.abs(t-this._fromY);return s+Math.max(0,(i-s)/2);case 8:return Math.max(Math.abs(e-this._fromX),Math.abs(t-this._fromY))}}}};class X{constructor(e){this._scheduler=e,this._lock=1}start(){return this.unlock()}lock(){return this._lock++,this}unlock(){if(!this._lock)throw new Error("Cannot unlock unlocked engine");for(this._lock--;!this._lock;){let e=this._scheduler.next();if(!e)return this.lock();let t=e.act();t&&t.then&&(this.lock(),t.then(this.unlock.bind(this)))}return this}}var J=i(2);class Q{constructor(e,t={}){this._reflectivityCallback=e,this._options={},t=Object.assign({passes:1,emissionThreshold:100,range:10},t),this._lights={},this._reflectivityCache={},this._fovCache={},this.setOptions(t)}setOptions(e){return Object.assign(this._options,e),e&&e.range&&this.reset(),this}setFOV(e){return this._fov=e,this._fovCache={},this}setLight(e,t,i){let s=e+","+t;return i?this._lights[s]="string"==typeof i?J.fromString(i):i:delete this._lights[s],this}clearLights(){this._lights={}}reset(){return this._reflectivityCache={},this._fovCache={},this}compute(e){let t={},i={},s={};for(let e in this._lights){let t=this._lights[e];i[e]=[0,0,0],J.add_(i[e],t)}for(let e=0;e<this._options.passes;e++)this._emitLight(i,s,t),e+1!=this._options.passes&&(i=this._computeEmitters(s,t));for(let t in s){let i=t.split(",");e(parseInt(i[0]),parseInt(i[1]),s[t])}return this}_emitLight(e,t,i){for(let s in e){let o=s.split(","),r=parseInt(o[0]),n=parseInt(o[1]);this._emitLightFromCell(r,n,e[s],t),i[s]=1}return this}_computeEmitters(e,t){let i={};for(let s in e){if(s in t)continue;let o,r=e[s];if(s in this._reflectivityCache)o=this._reflectivityCache[s];else{let e=s.split(","),t=parseInt(e[0]),i=parseInt(e[1]);o=this._reflectivityCallback(t,i),this._reflectivityCache[s]=o}if(0==o)continue;let n=[0,0,0],a=0;for(let e=0;e<3;e++){let t=Math.round(r[e]*o);n[e]=t,a+=t}a>this._options.emissionThreshold&&(i[s]=n)}return i}_emitLightFromCell(e,t,i,s){let o,r=e+","+t;o=r in this._fovCache?this._fovCache[r]:this._updateFOV(e,t);for(let e in o){let t,r=o[e];e in s?t=s[e]:(t=[0,0,0],s[e]=t);for(let e=0;e<3;e++)t[e]+=Math.round(i[e]*r)}return this}_updateFOV(e,t){let i=e+","+t,s={};this._fovCache[i]=s;let o=this._options.range;return this._fov.compute(e,t,o,function(e,t,i,r){let n=r*(1-i/o);0!=n&&(s[e+","+t]=n)}.bind(this)),s}}i.d(t,"Util",function(){return $}),i.d(t,"Color",function(){return Z}),i.d(t,"Text",function(){return ee}),i.d(t,"RNG",function(){return o.a}),i.d(t,"Display",function(){return M}),i.d(t,"StringGenerator",function(){return T}),i.d(t,"EventQueue",function(){return A}),i.d(t,"Scheduler",function(){return V}),i.d(t,"FOV",function(){return P}),i.d(t,"Map",function(){return B}),i.d(t,"Noise",function(){return G}),i.d(t,"Path",function(){return q}),i.d(t,"Engine",function(){return X}),i.d(t,"Lighting",function(){return Q}),i.d(t,"DEFAULT_WIDTH",function(){return w}),i.d(t,"DEFAULT_HEIGHT",function(){return k}),i.d(t,"DIRS",function(){return v}),i.d(t,"KEYS",function(){return C});const $=a,Z=J,ee=s}]);